/*! For license information please see canvasjs.js.LICENSE.txt */
!function(){var fontColor1,fontColor2,axisColor,crosshairColor,labelBackgroundColor,global={},isCanvasSupported=!!document.createElement("canvas").getContext,defaultOptions={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditHref:"",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:isCanvasSupported?"transparent":null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{backgroundColor:"white",backgroundColorOnHover:"#2196f3",borderColor:"#2196f3",borderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:isCanvasSupported?"transparent":null,borderColor:isCanvasSupported?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:isCanvasSupported?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",updated:null,hidden:null,publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:isCanvasSupported?"transparent":null,titleBorderColor:isCanvasSupported?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:isCanvasSupported?"transparent":null,labelBorderColor:isCanvasSupported?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",labelTextAlign:"left",prefix:"",suffix:"",includeZero:!1,tickLength:5,tickColor:"black",tickThickness:1,tickPlacement:"outside",lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"#A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:isCanvasSupported?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:isCanvasSupported?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:isCanvasSupported?"grey":null,labelBorderColor:isCanvasSupported?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:isCanvasSupported?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,updated:null,hidden:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:isCanvasSupported?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:isCanvasSupported?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",textAlign:"left",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},cultures={en:{}},fontStack1=isCanvasSupported?"Trebuchet MS, Helvetica, sans-serif":"Arial",fontStack11=isCanvasSupported?"Impact, Charcoal, sans-serif":"Arial",colorSets={colorSet1:["#4F81BC","#C0504E","#9BBB58","#23BFAA","#8064A1","#4AACC5","#F79647","#7F6084","#77A033","#33558B","#E59566"],colorSet2:["#6D78AD","#51CDA0","#DF7970","#4C9CA0","#AE7D99","#C9D45C","#5592AD","#DF874D","#52BCA8","#8E7AA3","#E3CB64","#C77B85","#C39762","#8DD17E","#B57952","#FCC26C"],colorSet3:["#8CA1BC","#36845C","#017E82","#8CB9D0","#708C98","#94838D","#F08891","#0366A7","#008276","#EE7757","#E5BA3A","#F2990B","#03557B","#782970"]},fontSize1=32,fontSize2=20,fontSize3=14,light1={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:fontStack11,fontSize:fontSize1,fontColor:fontColor1="#333333",fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:fontStack11,fontSize:fontSize3,fontColor:fontColor1,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:fontStack1,indexLabelFontSize:fontSize3,indexLabelFontColor:fontColor1,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor1,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2="#000000",labelFontWeight:"normal",lineThickness:1,lineColor:axisColor="#666666",tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:labelBackgroundColor="#000000",color:crosshairColor="#000000",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor1,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor1,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor1,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:fontStack1,fontSize:14,fontColor:fontColor1,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:fontStack1,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};fontColor1="#F5F5F5",fontColor2="#F5F5F5",axisColor="#FFFFFF",crosshairColor="#40BAF1",labelBackgroundColor="#F5F5F5";var light2={colorSet:"colorSet2",title:{fontFamily:fontStack1,fontSize:fontSize1=33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:fontStack1,fontSize:fontSize3=14,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:fontStack1,indexLabelFontSize:fontSize3,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:fontStack1,titleFontSize:fontSize2=20,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:fontStack1,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:fontStack1,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}},themes={light1,light2,dark1:{colorSet:"colorSet12",backgroundColor:"#2A2A2A",title:{fontFamily:fontStack11,fontSize:fontSize1=32,fontColor:fontColor1="#F5F5F5",fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:fontStack11,fontSize:fontSize3=14,fontColor:fontColor1,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:fontStack1,indexLabelFontSize:fontSize3,indexLabelFontColor:fontColor2="#F5F5F5",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:fontStack1,titleFontSize:fontSize2=20,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor="#FFFFFF",tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:labelBackgroundColor="#F5F5F5",color:crosshairColor="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:fontStack1,fontSize:14,fontColor:fontColor1,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:fontStack1,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:fontColor2,backgroundColor:"rgba(0, 0, 0, .7)"}},dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:fontStack1,fontSize:fontSize1=32,fontColor:fontColor1="#FAFAFA",fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:fontStack1,fontSize:fontSize3=14,fontColor:fontColor1,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:fontStack1,indexLabelFontSize:fontSize3,indexLabelFontColor:fontColor2="#FAFAFA",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:fontStack1,titleFontSize:fontSize2=20,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor="#FFFFFF",tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:labelBackgroundColor="#F5F5F5",color:crosshairColor="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:1,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:0,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:0,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:fontStack1,titleFontSize:fontSize2,titleFontColor:fontColor2,titleFontWeight:"normal",labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:fontColor2,labelFontWeight:"normal",lineThickness:0,lineColor:axisColor,tickThickness:1,tickColor:axisColor,gridThickness:1,gridColor:axisColor,stripLines:[{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:fontStack1,labelFontSize:fontSize3,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor,color:crosshairColor,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:fontStack1,fontSize:14,fontColor:fontColor1,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:fontStack1,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:fontColor2,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:light1,theme2:light2,theme3:light1},constants={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};function extend(derived,base){derived.prototype=function inherit(proto){function F(){}return F.prototype=proto,new F}(base.prototype),derived.prototype.constructor=derived,derived.base=base.prototype}function addToDateTime(dateTime,num,type){return"millisecond"===type?dateTime.setMilliseconds(dateTime.getMilliseconds()+1*num):"second"===type?dateTime.setSeconds(dateTime.getSeconds()+1*num):"minute"===type?dateTime.setMinutes(dateTime.getMinutes()+1*num):"hour"===type?dateTime.setHours(dateTime.getHours()+1*num):"day"===type?dateTime.setDate(dateTime.getDate()+1*num):"week"===type?dateTime.setDate(dateTime.getDate()+7*num):"month"===type?dateTime.setMonth(dateTime.getMonth()+1*num):"year"===type&&dateTime.setFullYear(dateTime.getFullYear()+1*num),dateTime}function convertToNumber(num,type){return constants[type+"Duration"]*num}function pad(value,length){var isNegative=!1;for(value<0&&(isNegative=!0,value*=-1),value=""+value,length=length||1;value.length<length;)value="0"+value;return isNegative?"-"+value:value}function trimString(str){if(!str)return str;for(var ws=/\s/,i=(str=str.replace(/^\s\s*/,"")).length;ws.test(str.charAt(--i)););return str.slice(0,i+1)}function extendCtx(context){context.roundRect=function(x,y,width,height,radius,borderThickness,backgroundColor,borderColor){backgroundColor&&(this.fillStyle=backgroundColor),borderColor&&(this.strokeStyle=borderColor),void 0===radius&&(radius=5),this.lineWidth=borderThickness,this.beginPath(),this.moveTo(x+radius,y),this.lineTo(x+width-radius,y),this.quadraticCurveTo(x+width,y,x+width,y+radius),this.lineTo(x+width,y+height-radius),this.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),this.lineTo(x+radius,y+height),this.quadraticCurveTo(x,y+height,x,y+height-radius),this.lineTo(x,y+radius),this.quadraticCurveTo(x,y,x+radius,y),this.closePath(),backgroundColor&&this.fill(),borderColor&&borderThickness>0&&this.stroke()}}function compareNumbers(a,b){return a-b}function intToHexColorString(num){var r=((16711680&num)>>16).toString(16),g=((65280&num)>>8).toString(16),b=(255&num).toString(16);return"#"+(r=r.length<2?"0"+r:r)+(g=g.length<2?"0"+g:g)+(b=b.length<2?"0"+b:b)}function arrayIndexOf(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in this&&this[from]===elt)return from;return-1}function isNullOrUndefined(value){return null==value}var isPassiveSupported=function(){var supportsPassiveOption=!1;try{var options=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){return supportsPassiveOption=!0,!1}});window.addEventListener&&(window.addEventListener("test",null,options),window.removeEventListener("test",null,options))}catch(err){supportsPassiveOption=!1}return supportsPassiveOption}();function addArrayIndexOf(obj){return obj.indexOf||(obj.indexOf=arrayIndexOf),obj}var fontHeightInPixels={},textMeasureEl=null;function getFontHeightInPixels(fontFamily,fontSize,fontWeight){var entry=fontFamily+"_"+fontSize+"_"+(fontWeight=fontWeight||"normal"),height=fontHeightInPixels[entry];if(isNaN(height)){try{var style="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+fontFamily+"; font-size:"+fontSize+"px; font-weight:"+fontWeight+";";if(!textMeasureEl){var body=document.body;(textMeasureEl=document.createElement("span")).innerHTML="";var textNode=document.createTextNode("Mpgyi");textMeasureEl.appendChild(textNode),body.appendChild(textMeasureEl)}textMeasureEl.style.display="",textMeasureEl.setAttribute("style",style),height=Math.round(textMeasureEl.offsetHeight),textMeasureEl.style.display="none"}catch(e){height=Math.ceil(1.1*fontSize)}height=Math.max(height,fontSize),fontHeightInPixels[entry]=height}return height}function getLineDashArray(lineDashType,lineThickness){var lineDashArray=[];if(lineDashArray={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[lineDashType=lineDashType||"solid"])for(var i=0;i<lineDashArray.length;i++)lineDashArray[i]*=lineThickness;else lineDashArray=[];return lineDashArray}function addEvent(obj,eventType,fn,store,useCapture){if(store=store||[],useCapture=isNullOrUndefined(useCapture)?!!isPassiveSupported&&{passive:!1,capture:!1}:useCapture,store.push([obj,eventType,fn,useCapture]),obj.addEventListener)return obj.addEventListener(eventType,fn,useCapture),fn;if(obj.attachEvent){var f=function(e){(e=e||window.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},fn.call(obj,e)};return obj.attachEvent("on"+eventType,f),f}return!1}function removeEvent(obj,eventType,fn,useCapture){if(useCapture=useCapture||!1,obj.removeEventListener)obj.removeEventListener(eventType,fn,useCapture);else{if(!obj.detachEvent)return!1;obj.detachEvent("on"+eventType,fn)}}var reg,defDays,defShortDays,defMonths,defShortMonths,timezone,timezoneClip,updateCanvasSize=function(canvasList){var width=0,height=0;if(this.options.width?width=this.width:this.width=width=this.container.clientWidth>0?this.container.clientWidth:this.width,this.options.height?height=this.height:this.height=height=this.container.clientHeight>0?this.container.clientHeight:this.height,this.canvas.width!==width*devicePixelBackingStoreRatio||this.canvas.height!==height*devicePixelBackingStoreRatio){for(var i=0;i<canvasList.length;i++)setCanvasSize(canvasList[i],width,height);return this.bounds={x1:0,y1:0,x2:this.width,y2:this.height,width:this.width,height:this.height},!0}return!1},clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},getAutoFontSize=function(standardSize,width,height){width=width||this.width,height=height||this.height;var size=Math.min(this.width,this.height),fontSizeScaleFactor=standardSize/400;return Math.max("theme4"===this.theme?0:size>=300?12:11,Math.round(size*fontSizeScaleFactor))},dateFormat=(reg=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,defDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],defShortDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],defMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],defShortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,function(dt,formatString,cultureInfo){var days=cultureInfo?cultureInfo.days:defDays,months=cultureInfo?cultureInfo.months:defMonths,shortDays=cultureInfo?cultureInfo.shortDays:defShortDays,shortMonths=cultureInfo?cultureInfo.shortMonths:defShortMonths,utc=!1;if(dt=dt&&dt.getTime?dt:dt?new Date(dt):new Date,isNaN(dt))throw SyntaxError("invalid date");"UTC:"===formatString.slice(0,4)&&(formatString=formatString.slice(4),utc=!0);var pre=utc?"getUTC":"get",date=dt[pre+"Date"](),day=dt[pre+"Day"](),month=dt[pre+"Month"](),year=dt[pre+"FullYear"](),hours=dt[pre+"Hours"](),minutes=dt[pre+"Minutes"](),seconds=dt[pre+"Seconds"](),milliseconds=dt[pre+"Milliseconds"](),offset=utc?0:dt.getTimezoneOffset();return formatString.replace(reg,(function(key){switch(key){case"D":return date;case"DD":return pad(date,2);case"DDD":return shortDays[day];case"DDDD":return days[day];case"M":return month+1;case"MM":return pad(month+1,2);case"MMM":return shortMonths[month];case"MMMM":return months[month];case"Y":return parseInt(String(year).slice(-2));case"YY":return pad(String(year).slice(-2),2);case"YYY":return pad(String(year).slice(-3),3);case"YYYY":return pad(year,4);case"h":return hours%12||12;case"hh":return pad(hours%12||12,2);case"H":return hours;case"HH":return pad(hours,2);case"m":return minutes;case"mm":return pad(minutes,2);case"s":return seconds;case"ss":return pad(seconds,2);case"f":return String(milliseconds).slice(0,1);case"ff":return pad(String(milliseconds).slice(0,2),2);case"fff":return pad(String(milliseconds).slice(0,3),3);case"t":return hours<12?"a":"p";case"tt":return hours<12?"am":"pm";case"T":return hours<12?"A":"P";case"TT":return hours<12?"AM":"PM";case"K":return utc?"UTC":(String(dt).match(timezone)||[""]).pop().replace(timezoneClip,"");case"z":return(offset>0?"-":"+")+Math.floor(Math.abs(offset)/60);case"zz":return(offset>0?"-":"+")+pad(Math.floor(Math.abs(offset)/60),2);case"zzz":return(offset>0?"-":"+")+pad(Math.floor(Math.abs(offset)/60),2)+pad(Math.abs(offset)%60,2);default:return key.slice(1,key.length-1)}}))}),numberFormat=function(v,fs,cultureInfo){if(null===v)return"";if(!isFinite(v))return v;var isNegative=(v=Number(v))<0;isNegative&&(v*=-1);var decimalSeparator=cultureInfo?cultureInfo.decimalSeparator:".",digitGroupSeparator=cultureInfo?cultureInfo.digitGroupSeparator:",";fs=String(fs);var matches,multiplier=1,result="",decimalPosition=-1,fsBeforeDecimal=[],fsAfterDecimal=[],noPhBeforeDecimal=0,noPhAfterDecimal=0,noComma=0,isScientificNotation=!1,exponent=0;matches=fs.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|‰|./g);for(var match=null,i=0;matches&&i<matches.length;i++)if("."===(match=matches[i])&&decimalPosition<0)decimalPosition=i;else{if("%"===match)multiplier*=100;else{if("‰"===match){multiplier*=1e3;continue}if(","===match[0]&&"."===match[match.length-1]){multiplier/=Math.pow(1e3,match.length-1),decimalPosition=i+match.length-1;continue}"E"!==match[0]&&"e"!==match[0]||"0"!==match[match.length-1]||(isScientificNotation=!0)}decimalPosition<0?(fsBeforeDecimal.push(match),"#"===match||"0"===match?noPhBeforeDecimal++:","===match&&noComma++):(fsAfterDecimal.push(match),"#"!==match&&"0"!==match||noPhAfterDecimal++)}if(isScientificNotation){var integer=Math.floor(v),noOfZerosAfterDecimal=-Math.floor(Math.log(v)/Math.LN10+1);exponent=0===v?0:0===integer?-(noPhBeforeDecimal+noOfZerosAfterDecimal):String(integer).length-noPhBeforeDecimal,multiplier/=Math.pow(10,exponent)}decimalPosition<0&&(decimalPosition=i);var split=(v*=multiplier).toFixed(noPhAfterDecimal).split("."),vStringBeforeDecimal=(split[0]+"").split(""),vStringAfterDecimal=(split[1]+"").split("");vStringBeforeDecimal&&"0"===vStringBeforeDecimal[0]&&vStringBeforeDecimal.shift();for(var noPhProcessed=0,noDigitsAdded=0,noCommaAdded=0,commaDistance=0,distanceFromLastComma=0;fsBeforeDecimal.length>0;)if("#"===(match=fsBeforeDecimal.pop())||"0"===match)if(++noPhProcessed===noPhBeforeDecimal){var digits=vStringBeforeDecimal;if(vStringBeforeDecimal=[],"0"===match)for(var toPad=noPhBeforeDecimal-noDigitsAdded-(digits?digits.length:0);toPad>0;)digits.unshift("0"),toPad--;for(;digits.length>0;)result=digits.pop()+result,++distanceFromLastComma%commaDistance==0&&noCommaAdded===noComma&&digits.length>0&&(result=digitGroupSeparator+result)}else vStringBeforeDecimal.length>0?(result=vStringBeforeDecimal.pop()+result,noDigitsAdded++,distanceFromLastComma++):"0"===match&&(result="0"+result,noDigitsAdded++,distanceFromLastComma++),distanceFromLastComma%commaDistance==0&&noCommaAdded===noComma&&vStringBeforeDecimal.length>0&&(result=digitGroupSeparator+result);else"E"!==match[0]&&"e"!==match[0]||"0"!==match[match.length-1]||!/[eE][+-]*[0]+/.test(match)?","===match?(noCommaAdded++,commaDistance=distanceFromLastComma,distanceFromLastComma=0,vStringBeforeDecimal.length>0&&(result=digitGroupSeparator+result)):result=match.length>1&&('"'===match[0]&&'"'===match[match.length-1]||"'"===match[0]&&"'"===match[match.length-1])?match.slice(1,match.length-1)+result:match+result:result+=(match=exponent<0?match.replace("+","").replace("-",""):match.replace("-","")).replace(/[0]+/,(function($0){return pad(exponent,$0.length)}));for(var resultAfterDecimal="",addDecimalSeparator=!1;fsAfterDecimal.length>0;)"#"===(match=fsAfterDecimal.shift())||"0"===match?vStringAfterDecimal.length>0&&0!==Number(vStringAfterDecimal.join(""))?(resultAfterDecimal+=vStringAfterDecimal.shift(),addDecimalSeparator=!0):"0"===match&&(resultAfterDecimal+="0",addDecimalSeparator=!0):match.length>1&&('"'===match[0]&&'"'===match[match.length-1]||"'"===match[0]&&"'"===match[match.length-1])?resultAfterDecimal+=match.slice(1,match.length-1):"E"!==match[0]&&"e"!==match[0]||"0"!==match[match.length-1]||!/[eE][+-]*[0]+/.test(match)?resultAfterDecimal+=match:resultAfterDecimal+=(match=exponent<0?match.replace("+","").replace("-",""):match.replace("-","")).replace(/[0]+/,(function($0){return pad(exponent,$0.length)}));return result+=(addDecimalSeparator?decimalSeparator:"")+resultAfterDecimal,isNegative?"-"+result:result};function getObjectId(x,y,ctx){x*=devicePixelBackingStoreRatio,y*=devicePixelBackingStoreRatio;for(var pixels=ctx.getImageData(x,y,2,2).data,isObject=!0,i=0;i<4;i++)if(pixels[i]!==pixels[i+4]|pixels[i]!==pixels[i+8]|pixels[i]!==pixels[i+12]){isObject=!1;break}return isObject?function RGBToInt(r,g,b){return r<<16|g<<8|b}(pixels[0],pixels[1],pixels[2]):0}var getMouseCoordinates=function(ev){var x=0,y=0;return(ev=ev||window.event).offsetX||0===ev.offsetX?(x=ev.offsetX,y=ev.offsetY):ev.layerX||0==ev.layerX?(x=ev.layerX,y=ev.layerY):(x=ev.pageX-ev.target.offsetLeft,y=ev.pageY-ev.target.offsetTop),{x,y}};function getProperty(propertyName,object,fallbackObject){return propertyName in object?object[propertyName]:fallbackObject[propertyName]}var optimizeForHiDPI=!0,devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=1,devicePixelBackingStoreRatio=optimizeForHiDPI?devicePixelRatio/backingStoreRatio:1;function setCanvasSize(canvas,width,height){if(isCanvasSupported&&optimizeForHiDPI){var ctx=canvas.getContext("2d");backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1,devicePixelBackingStoreRatio=devicePixelRatio/backingStoreRatio,canvas.width=width*devicePixelBackingStoreRatio,canvas.height=height*devicePixelBackingStoreRatio,devicePixelRatio!==backingStoreRatio&&(canvas.style.width=width+"px",canvas.style.height=height+"px",ctx.scale(devicePixelBackingStoreRatio,devicePixelBackingStoreRatio))}else canvas.width=width,canvas.height=height}var drawRect=function(ctx,x1,y1,x2,y2,color,borderThickness,borderColor,top,bottom,left,right,fillOpacity){void 0===fillOpacity&&(fillOpacity=1),borderThickness=borderThickness||0,borderColor=borderColor||"black";var a1=x1,a2=x2,b1=y1,b2=y2;if(x2-x1>15&&y2-y1>15)var bevelDepth=8;else bevelDepth=.35*Math.min(x2-x1,y2-y1);var grd,color2="rgba(255, 255, 255, .4)",color3="rgba(255, 255, 255, 0.1)",color1=color;if(ctx.beginPath(),ctx.moveTo(x1,y1),ctx.save(),ctx.fillStyle=color1,ctx.globalAlpha=fillOpacity,ctx.fillRect(x1,y1,x2-x1,y2-y1),ctx.globalAlpha=1,borderThickness>0){var offset=borderThickness%2==0?0:.5;ctx.beginPath(),ctx.lineWidth=borderThickness,ctx.strokeStyle=borderColor,ctx.moveTo(x1,y1),ctx.rect(x1-offset,y1-offset,x2-x1+2*offset,y2-y1+2*offset),ctx.stroke()}(ctx.restore(),!0===top)&&(ctx.save(),ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x1+bevelDepth,y1+bevelDepth),ctx.lineTo(x2-bevelDepth,y1+bevelDepth),ctx.lineTo(x2,y1),ctx.closePath(),(grd=ctx.createLinearGradient((x2+x1)/2,b1+bevelDepth,(x2+x1)/2,b1)).addColorStop(0,color1),grd.addColorStop(1,color2),ctx.fillStyle=grd,ctx.fill(),ctx.restore());!0===bottom&&(ctx.save(),ctx.beginPath(),ctx.moveTo(x1,y2),ctx.lineTo(x1+bevelDepth,y2-bevelDepth),ctx.lineTo(x2-bevelDepth,y2-bevelDepth),ctx.lineTo(x2,y2),ctx.closePath(),(grd=ctx.createLinearGradient((x2+x1)/2,b2-bevelDepth,(x2+x1)/2,b2)).addColorStop(0,color1),grd.addColorStop(1,color2),ctx.fillStyle=grd,ctx.fill(),ctx.restore());!0===left&&(ctx.save(),ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x1+bevelDepth,y1+bevelDepth),ctx.lineTo(x1+bevelDepth,y2-bevelDepth),ctx.lineTo(x1,y2),ctx.closePath(),(grd=ctx.createLinearGradient(a1+bevelDepth,(y2+y1)/2,a1,(y2+y1)/2)).addColorStop(0,color1),grd.addColorStop(1,color3),ctx.fillStyle=grd,ctx.fill(),ctx.restore());!0===right&&(ctx.save(),ctx.beginPath(),ctx.moveTo(x2,y1),ctx.lineTo(x2-bevelDepth,y1+bevelDepth),ctx.lineTo(x2-bevelDepth,y2-bevelDepth),ctx.lineTo(x2,y2),(grd=ctx.createLinearGradient(a2-bevelDepth,(y2+y1)/2,a2,(y2+y1)/2)).addColorStop(0,color1),grd.addColorStop(1,color3),ctx.fillStyle=grd,grd.addColorStop(0,color1),grd.addColorStop(1,color3),ctx.fillStyle=grd,ctx.fill(),ctx.closePath(),ctx.restore())},fSDec=function(str){for(var dec="",i=0;i<str.length;i++)dec+=String.fromCharCode(Math.ceil(str.length/57/5)^str.charCodeAt(i));return dec},disableLnk=window&&window[fSDec("mnb`uhno")]&&window[fSDec("mnb`uhno")].href&&window[fSDec("mnb`uhno")].href.indexOf&&(-1!==window[fSDec("mnb`uhno")].href.indexOf(fSDec("b`ow`rkr/bnl"))||-1!==window[fSDec("mnb`uhno")].href.indexOf(fSDec("gdonqhy/bnl"))||-1!==window[fSDec("mnb`uhno")].href.indexOf(fSDec("gheemd")))&&-1===window[fSDec("mnb`uhno")].href.indexOf(fSDec("gheemd"));function createCanvas(width,height){var canvas=document.createElement("canvas");return canvas.setAttribute("class","canvasjs-chart-canvas"),setCanvasSize(canvas,width,height),isCanvasSupported||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(canvas),canvas}var base64Images={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"}};function setCSSProperties(element,cssStyle){for(var property in cssStyle)element.style[property]=cssStyle[property]}function setButtonState(chart,button,state){button.getAttribute("state")||(button.style.backgroundColor=chart.toolbar.backgroundColor,button.style.color=chart.toolbar.fontColor,button.style.border="none",setCSSProperties(button,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),button.getAttribute("state")!==state&&(button.setAttribute("state",state),button.setAttribute("type","button"),setCSSProperties(button,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),button.setAttribute("title",chart._cultureInfo[state+"Text"]),button.innerHTML="<img style='height:95%; pointer-events: none;' src='"+base64Images[state].image+"' alt='"+chart._cultureInfo[state+"Text"]+"' />")}function show(){for(var element=null,i=0;i<arguments.length;i++)(element=arguments[i]).style&&(element.style.display="inline")}function hide(){for(var element=null,i=0;i<arguments.length;i++)(element=arguments[i])&&element.style&&(element.style.display="none")}function convertPercentToValue(input,referenceValue,defaultValue,max,min){if(null==input)return void 0===defaultValue?referenceValue:defaultValue;var result=parseFloat(input.toString())*(input.toString().indexOf("%")>=0?referenceValue/100:1);return void 0!==max&&(result=Math.min(max,result),void 0!==min&&(result=Math.max(min,result))),!isNaN(result)&&result<=referenceValue&&result>=0?result:void 0===defaultValue?referenceValue:defaultValue}function CanvasJSObject(defaultsKey,themeOptionsKey,options,index,parent){this._defaultsKey=defaultsKey,this._themeOptionsKey=themeOptionsKey,this._index=index,this.parent=parent,this._eventListeners=[];var currentThemeOptions={};if(this.theme&&isNullOrUndefined(this.parent)&&isNullOrUndefined(themeOptionsKey)&&isNullOrUndefined(index))currentThemeOptions=isNullOrUndefined(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme];else if(this.parent&&this.parent.themeOptions&&this.parent.themeOptions[themeOptionsKey])if(null===index)currentThemeOptions=this.parent.themeOptions[themeOptionsKey];else if(this.parent.themeOptions[themeOptionsKey].length>0){var optionsIndex=Math.min(this.parent.themeOptions[themeOptionsKey].length-1,index);currentThemeOptions=this.parent.themeOptions[themeOptionsKey][optionsIndex]}this.themeOptions=currentThemeOptions,this.options=options||{_isPlaceholder:!0},this.setOptions(this.options,currentThemeOptions)}function LayoutManager(x1,y1,x2,y2,padding){void 0===padding&&(padding=0),this._padding=padding,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2,this._topOccupied=this._padding,this._bottomOccupied=this._padding,this._leftOccupied=this._padding,this._rightOccupied=this._padding}function TextBlock(ctx,options){TextBlock.base.constructor.call(this,"TextBlock",null,options,null,null),this.ctx=ctx,this._isDirty=!0,this._wrappedText=null,this._initialize()}function Toolbar(chart,options){Toolbar.base.constructor.call(this,"Toolbar","toolbar",options,null,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function Title(chart,options){if(Title.base.constructor.call(this,"Title","title",options,null,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=this.chart.ctx,this.optionsName="title",isNullOrUndefined(this.options.margin)&&chart.options.subtitles)for(var subtitles=chart.options.subtitles,i=0;i<subtitles.length;i++)if((isNullOrUndefined(subtitles[i].horizontalAlign)&&"center"===this.horizontalAlign||subtitles[i].horizontalAlign===this.horizontalAlign)&&(isNullOrUndefined(subtitles[i].verticalAlign)&&"top"===this.verticalAlign||subtitles[i].verticalAlign===this.verticalAlign)&&!subtitles[i].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.width=null,this.height=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function Subtitle(chart,options,index){Subtitle.base.constructor.call(this,"Subtitle","subtitles",options,index,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.width=null,this.height=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function CanvasPool(){this.pool=[]}function CultureInfo(culture){var cultureInfo;culture&&cultures[culture]&&(cultureInfo=cultures[culture]),CultureInfo.base.constructor.call(this,"CultureInfo",null,cultureInfo,null,null)}CanvasJSObject.prototype.setOptions=function(options,currentThemeOptions){if(defaultOptions[this._defaultsKey]){var defaults=defaultOptions[this._defaultsKey];for(var prop in defaults)"publicProperties"!==prop&&defaults.hasOwnProperty(prop)&&(this[prop]=options&&prop in options?options[prop]:currentThemeOptions&&prop in currentThemeOptions?currentThemeOptions[prop]:defaults[prop])}else false},CanvasJSObject.prototype.get=function(name){var defaults=defaultOptions[this._defaultsKey];return"options"===name?this.options&&this.options._isPlaceholder?null:this.options:defaults.hasOwnProperty(name)||defaults.publicProperties&&defaults.publicProperties.hasOwnProperty(name)?this[name]:void(window.console&&window.console.log('Property "'+name+"\" doesn't exist. Please check for typo."))},CanvasJSObject.prototype.set=function(name,value,updateChart){updateChart=void 0===updateChart||updateChart;var defaults=defaultOptions[this._defaultsKey];if("options"===name)this.createUserOptions(value);else{if(!(defaults.hasOwnProperty(name)||defaults.publicProperties&&defaults.publicProperties.hasOwnProperty(name)&&"readWrite"===defaults.publicProperties[name]))return void(window.console&&(defaults.publicProperties&&defaults.publicProperties.hasOwnProperty(name)&&"readOnly"===defaults.publicProperties[name]?window.console.log('Property "'+name+'" is read-only.'):window.console.log('Property "'+name+"\" doesn't exist. Please check for typo.")));this.options._isPlaceholder&&this.createUserOptions(),this.options[name]=value}updateChart&&(this.stockChart||this.chart||this).render()},CanvasJSObject.prototype.addTo=function(name,options,index,updateChart){updateChart=void 0===updateChart||updateChart;var arr,defaults=defaultOptions[this._defaultsKey];defaults.hasOwnProperty(name)||defaults.publicProperties&&defaults.publicProperties.hasOwnProperty(name)&&"readWrite"===defaults.publicProperties[name]?(this.options._isPlaceholder&&this.createUserOptions(),void 0===this.options[name]&&(this.options[name]=[]),arr=this.options[name],index=null==index?arr.length:index,arr.splice(index,0,options),updateChart&&(this.stockChart||this.chart||this).render()):window.console&&(defaults.publicProperties&&defaults.publicProperties.hasOwnProperty(name)&&"readOnly"===defaults.publicProperties[name]?window.console.log('Property "'+name+'" is read-only.'):window.console.log('Property "'+name+"\" doesn't exist. Please check for typo."))},CanvasJSObject.prototype.createUserOptions=function(options){if(void 0!==options||this.options._isPlaceholder)if(this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var optionsArray=this.parent.options[this.optionsName],optionsIndex=optionsArray.length;this.options._isPlaceholder||(addArrayIndexOf(optionsArray),optionsIndex=optionsArray.indexOf(this.options)),this.options=void 0===options?{}:options,optionsArray[optionsIndex]=this.options}else this.options=void 0===options?{}:options,this.parent.options[this.optionsName?this.optionsName:function firstCharToLower(str){if(str&&0!==str.length){var result=str.charAt(0).toLowerCase();return str.length>1&&(result=result.concat(str.slice(1))),result}}(this._defaultsKey)]=this.options},CanvasJSObject.prototype.remove=function(updateChart){if(updateChart=void 0===updateChart||updateChart,this.isOptionsInArray){var optionsArray=this.parent.options[this.optionsName];addArrayIndexOf(optionsArray);var optionsIndex=optionsArray.indexOf(this.options);optionsIndex>=0&&optionsArray.splice(optionsIndex,1)}else delete this.parent.options[this.optionsName];updateChart&&(this.stockChart||this.chart||this).render()},CanvasJSObject.prototype.updateOption=function(prop){this._defaultsKey;var defaults=defaultOptions[this._defaultsKey],currentThemeOptions={},newValue=this[prop],themeOptionsKey=this._themeOptionsKey,index=this._index;if(this.theme&&isNullOrUndefined(this.parent)&&isNullOrUndefined(themeOptionsKey)&&isNullOrUndefined(index))currentThemeOptions=isNullOrUndefined(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme];else if(this.parent&&this.parent.themeOptions&&this.parent.themeOptions[themeOptionsKey])if(null===index)currentThemeOptions=this.parent.themeOptions[themeOptionsKey];else if(this.parent.themeOptions[themeOptionsKey].length>0){var optionsIndex=Math.min(this.parent.themeOptions[themeOptionsKey].length-1,index);currentThemeOptions=this.parent.themeOptions[themeOptionsKey][optionsIndex]}return this.themeOptions=currentThemeOptions,prop in defaults&&(newValue=prop in this.options?this.options[prop]:currentThemeOptions&&prop in currentThemeOptions?currentThemeOptions[prop]:defaults[prop]),newValue!==this[prop]&&(this[prop]=newValue,!0)},CanvasJSObject.prototype.trackChanges=function(option){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[option]=this.options[option]},CanvasJSObject.prototype.isBeingTracked=function(option){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[option]},CanvasJSObject.prototype.hasOptionChanged=function(option){if(!this.sessionVariables)throw"Session Variable Store not set";return!(this.sessionVariables[option]===this.options[option])},CanvasJSObject.prototype.addEventListener=function(eventName,eventHandler,context){eventName&&eventHandler&&(context=context||this,this._eventListeners[eventName]=this._eventListeners[eventName]||[],this._eventListeners[eventName].push({context,eventHandler}))},CanvasJSObject.prototype.removeEventListener=function(eventName,eventHandler){if(eventName&&eventHandler&&this._eventListeners[eventName])for(var listeners=this._eventListeners[eventName],i=0;i<listeners.length;i++)if(listeners[i].eventHandler===eventHandler){listeners[i].splice(i,1);break}},CanvasJSObject.prototype.removeAllEventListeners=function(){this._eventListeners=[]},CanvasJSObject.prototype.dispatchEvent=function(eventName,eventParameter,context){if(eventName&&this._eventListeners[eventName]){eventParameter=eventParameter||{};for(var listeners=this._eventListeners[eventName],i=0;i<listeners.length;i++)listeners[i].eventHandler.call(listeners[i].context,eventParameter)}"function"==typeof this[eventName]&&this[eventName].call(context||this.chart,eventParameter)},LayoutManager.prototype.registerSpace=function(position,size){"top"===position?this._topOccupied+=size.height:"bottom"===position?this._bottomOccupied+=size.height:"left"===position?this._leftOccupied+=size.width:"right"===position&&(this._rightOccupied+=size.width)},LayoutManager.prototype.unRegisterSpace=function(position,size){"top"===position?this._topOccupied-=size.height:"bottom"===position?this._bottomOccupied-=size.height:"left"===position?this._leftOccupied-=size.width:"right"===position&&(this._rightOccupied-=size.width)},LayoutManager.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},LayoutManager.prototype.reset=function(){this._topOccupied=this._padding,this._bottomOccupied=this._padding,this._leftOccupied=this._padding,this._rightOccupied=this._padding},extend(TextBlock,CanvasJSObject),TextBlock.prototype._initialize=function(){isNullOrUndefined(this.padding)||"object"!=typeof this.padding?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=0|Number(this.padding):(this.topPadding=isNullOrUndefined(this.padding.top)?0:0|Number(this.padding.top),this.rightPadding=isNullOrUndefined(this.padding.right)?0:0|Number(this.padding.right),this.bottomPadding=isNullOrUndefined(this.padding.bottom)?0:0|Number(this.padding.bottom),this.leftPadding=isNullOrUndefined(this.padding.left)?0:0|Number(this.padding.left))},TextBlock.prototype.render=function(preserveContext){if(0!==this.fontSize){preserveContext&&this.ctx.save();var font=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var offsetY=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+offsetY),"middle"===this.textBaseline&&(offsetY=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var textLeft=0,textTop=this.topPadding,line=null;this.ctx.roundRect||extendCtx(this.ctx),(this.borderThickness>0&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,offsetY,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor;for(var i=0;i<this._wrappedText.lines.length;i++)line=this._wrappedText.lines[i],"right"===this.horizontalAlign||"right"===this.textAlign?textLeft=this.width-line.width-this.rightPadding:"left"===this.horizontalAlign||"left"===this.textAlign?textLeft=this.leftPadding:"center"!==this.horizontalAlign&&"center"!==this.textAlign||(textLeft=(this.width-(this.leftPadding+this.rightPadding))/2-line.width/2+this.leftPadding),this.ctx.fillText(line.text,textLeft,textTop),textTop+=line.height;this.ctx.font=font,preserveContext&&this.ctx.restore()}},TextBlock.prototype.setText=function(text){this.text=text,this._isDirty=!0,this._wrappedText=null},TextBlock.prototype.measureText=function(){if(this._lineHeight=getFontHeightInPixels(this.fontFamily,this.fontSize,this.fontWeight),null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},TextBlock.prototype._getLineWithWidth=function(text,width,clipWord){if(clipWord=clipWord||!1,!(text=String(text)))return{text:"",width:0};var textWidth=0,min=0,max=text.length-1,mid=1/0;for(this.ctx.font=this._getFontString();min<=max;){mid=Math.floor((min+max)/2);var tempText=text.substr(0,mid+1);if((textWidth=this.ctx.measureText(tempText).width)<width)min=mid+1;else{if(!(textWidth>width))break;max=mid-1}}textWidth>width&&tempText.length>1&&(tempText=tempText.substr(0,tempText.length-1),textWidth=this.ctx.measureText(tempText).width);var isClipped=!0;if(tempText.length!==text.length&&" "!==text[tempText.length]||(isClipped=!1),isClipped){var resultWords=tempText.split(" ");resultWords.length>1&&resultWords.pop(),tempText=resultWords.join(" "),textWidth=this.ctx.measureText(tempText).width}return{text:tempText,width:textWidth}},TextBlock.prototype._wrapText=function wrapText(){var text=new String(trimString(String(this.text))),lines=[],font=this.ctx.font,height=0,width=0;if(this.ctx.font=this._getFontString(),0===this.frontSize)width=height=0;else for(;text.length>0;){var maxWidth=this.maxWidth-(this.leftPadding+this.rightPadding),maxHeight=this.maxHeight-(this.topPadding+this.bottomPadding);(line=this._getLineWithWidth(text,maxWidth,!1)).height=this._lineHeight,lines.push(line);var line,prevWidth=width;if(width=Math.max(width,line.width),height+=line.height,text=trimString(text.slice(line.text.length,text.length)),maxHeight&&height>maxHeight)height-=(line=lines.pop()).height,width=prevWidth}this._wrappedText={lines,width,height},this.width=width+(this.leftPadding+this.rightPadding),this.height=height+(this.topPadding+this.bottomPadding),this.ctx.font=font},TextBlock.prototype._getFontString=function(){return function getFontString(prefix,object,fallbackObject){var fontString="",fontStyleString=prefix?prefix+"FontStyle":"fontStyle",fontWeightString=prefix?prefix+"FontWeight":"fontWeight",fontSizeString=prefix?prefix+"FontSize":"fontSize",fontFamilyString=prefix?prefix+"FontFamily":"fontFamily";fontString+=object[fontStyleString]?object[fontStyleString]+" ":fallbackObject&&fallbackObject[fontStyleString]?fallbackObject[fontStyleString]+" ":"",fontString+=object[fontWeightString]?object[fontWeightString]+" ":fallbackObject&&fallbackObject[fontWeightString]?fallbackObject[fontWeightString]+" ":"",fontString+=object[fontSizeString]?object[fontSizeString]+"px ":fallbackObject&&fallbackObject[fontSizeString]?fallbackObject[fontSizeString]+"px ":"";var fontFamily=object[fontFamilyString]?object[fontFamilyString]+"":fallbackObject&&fallbackObject[fontFamilyString]?fallbackObject[fontFamilyString]+"":"";if(!isCanvasSupported&&fontFamily){var firstFontFamily=fontFamily.split(",")[0];"'"!==firstFontFamily[0]&&'"'!==firstFontFamily[0]&&(firstFontFamily="'"+firstFontFamily+"'"),fontString+=firstFontFamily}else fontString+=fontFamily;return fontString}("",this,null)},extend(Toolbar,CanvasJSObject),extend(Title,CanvasJSObject),Title.prototype.setLayout=function(){if(this.text){var textBlockHorizontalAlign,position,padding,container=this.dockInsidePlotArea?this.chart.plotArea:this.chart,freespace=container.layoutManager.getFreeSpace(),left=freespace.x1,top=freespace.y1,angle=0,maxHeight=0,rightOffset=this.chart._menuButton&&this.chart.exportEnabled&&"top"===this.verticalAlign?22:0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(null===this.maxWidth&&(this.maxWidth=freespace.width-4-rightOffset*("center"===this.horizontalAlign?2:1)),maxHeight=.5*freespace.height-this.margin-2,angle=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(null===this.maxWidth&&(this.maxWidth=freespace.height-4),maxHeight=.5*freespace.width-this.margin-2):"center"===this.horizontalAlign&&(null===this.maxWidth&&(this.maxWidth=freespace.width-4),maxHeight=.5*freespace.height-4)),isNullOrUndefined(this.padding)||"number"!=typeof this.padding?isNullOrUndefined(this.padding)||"object"!=typeof this.padding||(padding=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,padding+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0):padding=2*this.padding,this.wrap||(maxHeight=Math.min(maxHeight,1.5*this.fontSize+padding));var textBlock=new TextBlock(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),textBlockSize=textBlock.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(top=freespace.y1+2,position="top"):"bottom"===this.verticalAlign&&(top=freespace.y2-2-textBlockSize.height,position="bottom"),"left"===this.horizontalAlign?left=freespace.x1+2:"center"===this.horizontalAlign?left=freespace.x1+freespace.width/2-textBlockSize.width/2:"right"===this.horizontalAlign&&(left=freespace.x2-2-textBlockSize.width-rightOffset),textBlockHorizontalAlign=this.horizontalAlign,this.width=textBlockSize.width,this.height=textBlockSize.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(left=freespace.x1+2,top=freespace.y2-2-(this.maxWidth/2-textBlockSize.width/2),angle=-90,position="left",this.width=textBlockSize.height,this.height=textBlockSize.width):"right"===this.horizontalAlign?(left=freespace.x2-2,top=freespace.y1+2+(this.maxWidth/2-textBlockSize.width/2),angle=90,position="right",this.width=textBlockSize.height,this.height=textBlockSize.width):"center"===this.horizontalAlign&&(top=container.y1+(container.height/2-textBlockSize.height/2),left=container.x1+(container.width/2-textBlockSize.width/2),position="center",this.width=textBlockSize.width,this.height=textBlockSize.height),textBlockHorizontalAlign="center"),textBlock.x=left,textBlock.y=top,textBlock.angle=angle,textBlock.horizontalAlign=textBlockHorizontalAlign,this._textBlock=textBlock,container.layoutManager.registerSpace(position,{width:this.width+("left"===position||"right"===position?this.margin+2:0),height:this.height+("top"===position||"bottom"===position?this.margin+2:0)}),this.bounds={x1:left,y1:top,x2:left+this.width,y2:top+this.height},this.ctx.textBaseline="top"}},Title.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},extend(Subtitle,CanvasJSObject),Subtitle.prototype.setLayout=Title.prototype.setLayout,Subtitle.prototype.render=Title.prototype.render,CanvasPool.prototype.get=function(width,height){var canvas=null;return this.pool.length>0?setCanvasSize(canvas=this.pool.pop(),width,height):canvas=createCanvas(width,height),canvas},CanvasPool.prototype.release=function(canvas){this.pool.push(canvas)},extend(CultureInfo,CanvasJSObject);var CanvasJS={addTheme:function(name,theme){themes[name]=theme},addColorSet:function(name,colorSet){colorSets[name]=colorSet},addCultureInfo:function(name,cultureInfo){cultures[name]=cultureInfo},formatNumber:function(number,formatString,culture){if(formatString=formatString||"#,##0.##",cultures[culture=culture||"en"])return numberFormat(number,formatString,new CultureInfo(culture));throw"Unknown Culture Name"},formatDate:function(date,formatString,culture){if(formatString=formatString||"DD MMM YYYY",cultures[culture=culture||"en"])return dateFormat(date,formatString,new CultureInfo(culture));throw"Unknown Culture Name"}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=CanvasJS:"function"==typeof define&&define.amd?define([],(function(){return CanvasJS})):(window.CanvasJS&&window.console&&window.console.log("CanvasJS namespace already exists. If you are loading both chart and stockchart scripts, just load stockchart alone as it includes all chart features."),window.CanvasJS=window.CanvasJS?window.CanvasJS:CanvasJS);var CanvasJSChart=CanvasJS.Chart=function(){function compareDataPointX(dataPoint1,dataPoint2){return dataPoint1.x-dataPoint2.x}function Chart(containerId,options){if(options=options||{},isNullOrUndefined(arguments[2]))this.predefinedThemes=themes,this.index=null,this.parent=null,this.optionsName=null;else{var initParameters=arguments[2];this.parent=initParameters.parent,this.index=initParameters.index,this.predefinedThemes=initParameters.predefinedThemes,this.optionsName=initParameters.optionsName,this.stockChart=initParameters.stockChart,this.panel=containerId,this.isOptionsInArray=initParameters.isOptionsInArray}this.theme=isNullOrUndefined(options.theme)||isNullOrUndefined(this.predefinedThemes[options.theme])?"light1":options.theme,Chart.base.constructor.call(this,"Chart",this.optionsName,options,this.index,this.parent);var _this=this;if(this._containerId=containerId,this._objectsInitialized=!1,this.ctx=null,this.overlaidCanvasCtx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.animatedRender=!1,this.disableToolTip=!1,this.canvasPool=new CanvasPool,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this.container="string"==typeof this._containerId?document.getElementById(this._containerId):this._containerId,this.container){this.container.innerHTML="";var width=0,height=0;width=this.options.width?this.width:this.container.clientWidth>0?this.container.clientWidth:this.width,height=this.options.height?this.height:this.container.clientHeight>0?this.container.clientHeight:this.height,this.width=width,this.height=height,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this._selectedColorSet=void 0!==colorSets[this.colorSet]?colorSets[this.colorSet]:colorSets.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",this._canvasJSContainer.style.direction="ltr",isCanvasSupported||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=createCanvas(width,height),this._preRenderCanvas=createCanvas(width,height),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",extendCtx(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",extendCtx(this._preRenderCtx),isCanvasSupported?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=createCanvas(width,height),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=createCanvas(width,height),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",extendCtx(this.overlaidCanvasCtx)),this._eventManager=new EventManager(this),this.windowResizeHandler=addEvent(window,"resize",(function(){_this._updateSize()&&_this.render()}),this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.cssText="position: absolute; right: 1px; top: 1px;",this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},addEvent(this.overlaidCanvas,"click",(function(e){_this._mouseEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,"mousemove",(function(e){_this._mouseEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,"mouseup",(function(e){_this._mouseEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,"mousedown",(function(e){_this._mouseEventHandler(e),hide(_this._dropdownMenu)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,"mouseout",(function(e){_this._mouseEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",(function(e){_this._touchEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",(function(e){_this._touchEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",(function(e){_this._touchEventHandler(e)}),this.allDOMEventHandlers),addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",(function(e){_this._touchEventHandler(e)}),this.allDOMEventHandlers),this.toolTip=new ToolTip(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function getBezierPoints(points,defaultTension){for(var tension,bezierPoints=[],i=0;i<points.length;i++)if(0!=i){var i1,i2,pointIndex;i1=0===(pointIndex=i-1)?0:pointIndex-1,i2=pointIndex===points.length-1?pointIndex:pointIndex+1,tension=Math.abs((points[i2].x-points[i1].x)/(points[i2].x-points[pointIndex].x==0?.01:points[i2].x-points[pointIndex].x))*(defaultTension-1)/2+1;var drv1={x:(points[i2].x-points[i1].x)/tension,y:(points[i2].y-points[i1].y)/tension};if(points[pointIndex].x>points[i1].x&&drv1.x>0||points[pointIndex].x<points[i1].x&&drv1.x<0)var cp1={x:points[pointIndex].x+drv1.x/3,y:points[pointIndex].y+drv1.y/3};else cp1={x:points[pointIndex].x,y:points[pointIndex].y+drv1.y/9};bezierPoints[bezierPoints.length]=cp1,i1=0===(pointIndex=i)?0:pointIndex-1,i2=pointIndex===points.length-1?pointIndex:pointIndex+1,tension=Math.abs((points[i2].x-points[i1].x)/(points[pointIndex].x-points[i1].x==0?.01:points[pointIndex].x-points[i1].x))*(defaultTension-1)/2+1;var drv2={x:(points[i2].x-points[i1].x)/tension,y:(points[i2].y-points[i1].y)/tension};if(points[pointIndex].x>points[i1].x&&drv2.x>0||points[pointIndex].x<points[i1].x&&drv2.x<0)var cp2={x:points[pointIndex].x-drv2.x/3,y:points[pointIndex].y-drv2.y/3};else cp2={x:points[pointIndex].x,y:points[pointIndex].y-drv2.y/9};bezierPoints[bezierPoints.length]=cp2,bezierPoints[bezierPoints.length]=points[i]}else bezierPoints.push(points[0]);return bezierPoints}function drawErrorLines(ctx,x1,y1,x2,y2,color,whisker,stem,swapped,opacity){var trimLength=0;opacity?(whisker.color=color,stem.color=color):opacity=1;var length=swapped?Math.abs(y2-y1):Math.abs(x2-x1);trimLength=whisker.trimLength>0?Math.abs(length*whisker.trimLength/100):Math.abs(length-whisker.length),swapped?(y1+=trimLength/2,y2-=trimLength/2):(x1+=trimLength/2,x2-=trimLength/2);var whiskerOffset=Math.round(whisker.thickness)%2==1?.5:0,stemOffset=Math.round(stem.thickness)%2==1?.5:0;ctx.save(),ctx.globalAlpha=opacity,ctx.strokeStyle=stem.color||color,ctx.lineWidth=stem.thickness||2,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(stem.dashType,stem.thickness)),ctx.beginPath(),swapped&&stem.thickness>0?(ctx.moveTo(x2-whisker.thickness/2,Math.round((y1+y2)/2)-stemOffset),ctx.lineTo(x1+whisker.thickness/2,Math.round((y1+y2)/2)-stemOffset)):stem.thickness>0&&(ctx.moveTo(Math.round((x1+x2)/2)-stemOffset,y1+whisker.thickness/2),ctx.lineTo(Math.round((x1+x2)/2)-stemOffset,y2-whisker.thickness/2)),ctx.stroke(),ctx.strokeStyle=whisker.color||color,ctx.lineWidth=whisker.thickness||2,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(whisker.dashType,whisker.thickness)),ctx.beginPath(),swapped&&whisker.thickness>0?(ctx.moveTo(x2-whiskerOffset,y1),ctx.lineTo(x2-whiskerOffset,y2),ctx.moveTo(x1+whiskerOffset,y1),ctx.lineTo(x1+whiskerOffset,y2)):whisker.thickness>0&&(ctx.moveTo(x1,y1+whiskerOffset),ctx.lineTo(x2,y1+whiskerOffset),ctx.moveTo(x1,y2-whiskerOffset),ctx.lineTo(x2,y2-whiskerOffset)),ctx.stroke(),ctx.restore()}extend(Chart,CanvasJSObject),Chart.prototype.destroy=function(){var allDOMEventHandlers=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var i=0;i<allDOMEventHandlers.length;i++)removeEvent(allDOMEventHandlers[i][0],allDOMEventHandlers[i][1],allDOMEventHandlers[i][2],allDOMEventHandlers[i][3]);for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this._canvasJSContainer=null,this.container=null,this.canvas=null,this.overlaidCanvas=null,this.toolTip.container=null,this._preRenderCanvas=null,this._breaksCanvas=null,this._zoomButton=null,this._resetButton=null,this._menuButton=null,this._dropdownMenu=null,this._toolBar=null},Chart.prototype._updateOptions=function(){var _this=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet=void 0!==colorSets[this.colorSet]?colorSets[this.colorSet]:colorSets.colorSet1),this.updateOption("backgroundColor"),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this._cultureInfo=new CultureInfo(this.options.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&isCanvasSupported,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.options.zoomEnabled||this.panEnabled){if(!this._zoomButton){var preventMouseEvent=!1;hide(this._zoomButton=document.createElement("button")),setButtonState(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,addEvent(this._zoomButton,"touchstart",(function(e){preventMouseEvent=!0}),this.allDOMEventHandlers),addEvent(this._zoomButton,"click",(function(){_this.zoomEnabled?(_this.zoomEnabled=!1,_this.panEnabled=!0,setButtonState(_this,_this._zoomButton,"zoom")):(_this.zoomEnabled=!0,_this.panEnabled=!1,setButtonState(_this,_this._zoomButton,"pan")),_this.render()}),this.allDOMEventHandlers),addEvent(this._zoomButton,"mouseover",(function(){if(preventMouseEvent)preventMouseEvent=!1;else{var cssStyle={backgroundColor:_this.toolbar.backgroundColorOnHover,color:_this.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"};setCSSProperties(_this._zoomButton,cssStyle),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(_this._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"})}}),this.allDOMEventHandlers),addEvent(this._zoomButton,"mouseout",(function(){if(!preventMouseEvent){var cssStyle={backgroundColor:_this.toolbar.backgroundColor,color:_this.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"};setCSSProperties(_this._zoomButton,cssStyle),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(_this._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"})}}),this.allDOMEventHandlers)}if(!this._resetButton){preventMouseEvent=!1;hide(this._resetButton=document.createElement("button")),setButtonState(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor,this._toolBar.appendChild(this._resetButton),addEvent(this._resetButton,"touchstart",(function(e){preventMouseEvent=!0}),this.allDOMEventHandlers),addEvent(this._resetButton,"click",(function(){if(_this.toolTip.hide(),_this.toolTip.dispatchEvent("hidden",{chart:_this,toolTip:_this.toolTip},_this.toolTip),_this.zoomEnabled||_this.panEnabled?(_this.zoomEnabled=!0,_this.panEnabled=!1,setButtonState(_this,_this._zoomButton,"pan"),_this._defaultCursor="default",_this.overlaidCanvas.style.cursor=_this._defaultCursor):(_this.zoomEnabled=!1,_this.panEnabled=!1),_this.sessionVariables.axisX)for(var k=0;k<_this.sessionVariables.axisX.length;k++)_this.sessionVariables.axisX[k].newViewportMinimum=null,_this.sessionVariables.axisX[k].newViewportMaximum=null;if(_this.sessionVariables.axisX2)for(k=0;k<_this.sessionVariables.axisX2.length;k++)_this.sessionVariables.axisX2[k].newViewportMinimum=null,_this.sessionVariables.axisX2[k].newViewportMaximum=null;if(_this.sessionVariables.axisY)for(k=0;k<_this.sessionVariables.axisY.length;k++)_this.sessionVariables.axisY[k].newViewportMinimum=null,_this.sessionVariables.axisY[k].newViewportMaximum=null;if(_this.sessionVariables.axisY2)for(k=0;k<_this.sessionVariables.axisY2.length;k++)_this.sessionVariables.axisY2[k].newViewportMinimum=null,_this.sessionVariables.axisY2[k].newViewportMaximum=null;_this.resetOverlayedCanvas(),hide(_this._zoomButton,_this._resetButton),_this.stockChart&&(_this.stockChart._rangeEventParameter={stockChart:_this.stockChart,source:"chart",index:_this.stockChart.charts.indexOf(_this),minimum:null,maximum:null}),_this._dispatchRangeEvent("rangeChanging","reset"),_this.stockChart&&(_this.stockChart._rangeEventParameter.type="rangeChanging",_this.stockChart.dispatchEvent("rangeChanging",_this.stockChart._rangeEventParameter,_this.stockChart)),_this.render(),_this.syncCharts&&_this.syncCharts(null,null),_this._dispatchRangeEvent("rangeChanged","reset"),_this.stockChart&&(_this.stockChart._rangeEventParameter.type="rangeChanged",_this.stockChart.dispatchEvent("rangeChanged",_this.stockChart._rangeEventParameter,_this.stockChart))}),this.allDOMEventHandlers),addEvent(this._resetButton,"mouseover",(function(){if(!preventMouseEvent){var cssStyle={backgroundColor:_this.toolbar.backgroundColorOnHover,color:_this.toolbar.hoverFfontColorOnHoverontColor,transition:"0.4s",WebkitTransition:"0.4s"};setCSSProperties(_this._resetButton,cssStyle),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(_this._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"})}}),this.allDOMEventHandlers),addEvent(this._resetButton,"mouseout",(function(){if(!preventMouseEvent){var cssStyle={backgroundColor:_this.toolbar.backgroundColor,color:_this.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"};setCSSProperties(_this._resetButton,cssStyle),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(_this._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"})}}),this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=_this._defaultCursor}this.zoomEnabled||this.panEnabled||(this._zoomButton?(_this._zoomButton.getAttribute("state")===_this._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),show(_this._zoomButton,_this._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.zoomEnabled=!1,this.panEnabled=!1;for(var prop in function addExportMenu(chart){if(chart._menuButton)chart.exportEnabled?show(chart._menuButton):hide(chart._menuButton);else if(chart.exportEnabled&&isCanvasSupported){var preventMouseEvent=!1;chart._menuButton=document.createElement("button"),setButtonState(chart,chart._menuButton,"menu"),chart._toolBar.appendChild(chart._menuButton),addEvent(chart._menuButton,"touchstart",(function(e){preventMouseEvent=!0}),chart.allDOMEventHandlers),addEvent(chart._menuButton,"click",(function(){if("none"===chart._dropdownMenu.style.display){if(chart._dropDownCloseTime&&(new Date).getTime()-chart._dropDownCloseTime.getTime()<=500)return;chart._dropdownMenu.style.display="block",chart._menuButton.blur(),chart._dropdownMenu.focus()}}),chart.allDOMEventHandlers,!0),addEvent(chart._menuButton,"mouseover",(function(){preventMouseEvent||(setCSSProperties(chart._menuButton,{backgroundColor:chart.toolbar.backgroundColorOnHover,color:chart.toolbar.fontColorOnHover}),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(chart._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),chart.allDOMEventHandlers,!0),addEvent(chart._menuButton,"mouseout",(function(){preventMouseEvent||(setCSSProperties(chart._menuButton,{backgroundColor:chart.toolbar.backgroundColor,color:chart.toolbar.fontColor}),navigator.userAgent.search("MSIE")<=0&&setCSSProperties(chart._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),chart.allDOMEventHandlers,!0)}if(!chart._dropdownMenu&&chart.exportEnabled&&isCanvasSupported){preventMouseEvent=!1,chart._dropdownMenu=document.createElement("div"),chart._dropdownMenu.setAttribute("tabindex",-1);var exportOption,shadowColor=-1!==chart.theme.indexOf("dark")?"black":"#888888";chart._dropdownMenu.style.cssText="position: absolute; z-index: 1; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 0px;top: 25px;min-width: 120px;outline: 0;font-size: 14px; font-family: Arial, Helvetica, sans-serif;padding: 5px 0px 5px 0px;text-align: left;line-height: 10px;background-color:"+chart.toolbar.backgroundColor+";box-shadow: 2px 2px 10px "+shadowColor,chart._dropdownMenu.style.display="none",chart._toolBar.appendChild(chart._dropdownMenu),addEvent(chart._dropdownMenu,"blur",(function(){hide(chart._dropdownMenu),chart._dropDownCloseTime=new Date}),chart.allDOMEventHandlers,!0),(exportOption=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",exportOption.innerHTML=chart._cultureInfo.printText,exportOption.style.backgroundColor=chart.toolbar.backgroundColor,exportOption.style.color=chart.toolbar.fontColor,chart._dropdownMenu.appendChild(exportOption),addEvent(exportOption,"touchstart",(function(e){preventMouseEvent=!0}),chart.allDOMEventHandlers),addEvent(exportOption,"mouseover",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColorOnHover,this.style.color=chart.toolbar.fontColorOnHover)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"mouseout",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColor,this.style.color=chart.toolbar.fontColor)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"click",(function(){chart.print(),hide(chart._dropdownMenu)}),chart.allDOMEventHandlers,!0),(exportOption=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",exportOption.innerHTML=chart._cultureInfo.saveJPGText,exportOption.style.backgroundColor=chart.toolbar.backgroundColor,exportOption.style.color=chart.toolbar.fontColor,chart._dropdownMenu.appendChild(exportOption),addEvent(exportOption,"touchstart",(function(e){preventMouseEvent=!0}),chart.allDOMEventHandlers),addEvent(exportOption,"mouseover",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColorOnHover,this.style.color=chart.toolbar.fontColorOnHover)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"mouseout",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColor,this.style.color=chart.toolbar.fontColor)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"click",(function(){chart.exportChart({format:"jpeg",fileName:chart.exportFileName}),hide(chart._dropdownMenu)}),chart.allDOMEventHandlers,!0),(exportOption=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",exportOption.innerHTML=chart._cultureInfo.savePNGText,exportOption.style.backgroundColor=chart.toolbar.backgroundColor,exportOption.style.color=chart.toolbar.fontColor,chart._dropdownMenu.appendChild(exportOption),addEvent(exportOption,"touchstart",(function(e){preventMouseEvent=!0}),chart.allDOMEventHandlers),addEvent(exportOption,"mouseover",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColorOnHover,this.style.color=chart.toolbar.fontColorOnHover)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"mouseout",(function(){preventMouseEvent||(this.style.backgroundColor=chart.toolbar.backgroundColor,this.style.color=chart.toolbar.fontColor)}),chart.allDOMEventHandlers,!0),addEvent(exportOption,"click",(function(){chart.exportChart({format:"png",fileName:chart.exportFileName}),hide(chart._dropdownMenu)}),chart.allDOMEventHandlers,!0)}}(this),"none"!==this._toolBar.style.display&&this._zoomButton&&(this.panEnabled?setButtonState(_this,_this._zoomButton,"zoom"):setButtonState(_this,_this._zoomButton,"pan"),_this._resetButton.getAttribute("state")!==_this._cultureInfo.resetText&&setButtonState(_this,_this._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip),this.toolTip.options)this.toolTip.options.hasOwnProperty(prop)&&this.toolTip.updateOption(prop)},Chart.prototype._updateSize=function(){return updateCanvasSize.call(this,[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas])},Chart.prototype._initialize=function(){this.isNavigator=!isNullOrUndefined(this.parent)&&!isNullOrUndefined(this.parent._defaultsKey)&&"Navigator"===this.parent._defaultsKey,this.toolbar=new Toolbar(this,this.options.toolbar),this._animator?this._animator.cancelAllAnimations():this._animator=new Animator(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.pieDoughnutClickHandler=null,this.funnelPyramidClickHandler=null,this._updateOptions(),this.animatedRender=isCanvasSupported&&this.animationEnabled&&0===this.renderCount,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new LayoutManager(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[];var dataSeriesIndex=0,errorAxisPlacement=null;if(this.options.data){for(var series=0;series<this.options.data.length;series++)if(dataSeriesIndex++,!this.options.data[series].type||Chart._supportedChartTypes.indexOf(this.options.data[series].type)>=0){var dataSeries=new DataSeries(this,this.options.data[series],dataSeriesIndex-1,++this._eventManager.lastObjectId);"error"===dataSeries.type&&(dataSeries.linkedDataSeriesIndex=isNullOrUndefined(this.options.data[series].linkedDataSeriesIndex)?series-1:this.options.data[series].linkedDataSeriesIndex,(dataSeries.linkedDataSeriesIndex<0||dataSeries.linkedDataSeriesIndex>=this.options.data.length||"number"!=typeof dataSeries.linkedDataSeriesIndex||"error"===this.options.data[dataSeries.linkedDataSeriesIndex].type)&&(dataSeries.linkedDataSeriesIndex=null)),null===dataSeries.name&&(dataSeries.name="DataSeries "+dataSeriesIndex),null===dataSeries.color?this.options.data.length>1?(dataSeries._colorSet=[this._selectedColorSet[dataSeries.index%this._selectedColorSet.length]],dataSeries.color=this._selectedColorSet[dataSeries.index%this._selectedColorSet.length]):"line"===dataSeries.type||"stepLine"===dataSeries.type||"spline"===dataSeries.type||"area"===dataSeries.type||"stepArea"===dataSeries.type||"splineArea"===dataSeries.type||"stackedArea"===dataSeries.type||"stackedArea100"===dataSeries.type||"rangeArea"===dataSeries.type||"rangeSplineArea"===dataSeries.type||"candlestick"===dataSeries.type||"ohlc"===dataSeries.type||"waterfall"===dataSeries.type||"boxAndWhisker"===dataSeries.type?dataSeries._colorSet=[this._selectedColorSet[0]]:dataSeries._colorSet=this._selectedColorSet:dataSeries._colorSet=[dataSeries.color],null===dataSeries.markerSize&&(("line"===dataSeries.type||"stepLine"===dataSeries.type||"spline"===dataSeries.type||dataSeries.type.toLowerCase().indexOf("area")>=0)&&dataSeries.dataPoints&&dataSeries.dataPoints.length<this.width/16||"scatter"===dataSeries.type)&&(dataSeries.markerSize=8),"bubble"!==dataSeries.type&&"scatter"!==dataSeries.type||!dataSeries.dataPoints||(dataSeries.dataPoints.some?dataSeries.dataPoints.some((function(element){return element.x}))&&dataSeries.dataPoints.sort(compareDataPointX):dataSeries.dataPoints.sort(compareDataPointX)),this.data.push(dataSeries);var errorMessage,seriesAxisPlacement=dataSeries.axisPlacement;if(errorAxisPlacement=errorAxisPlacement||seriesAxisPlacement,"normal"===seriesAxisPlacement?"xySwapped"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===seriesAxisPlacement?"normal"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"===seriesAxisPlacement?"normal"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?errorMessage='You cannot combine "'+dataSeries.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none"):null===seriesAxisPlacement&&"none"===this.plotInfo.axisPlacement&&(errorMessage='You cannot combine "'+dataSeries.type+'" with pie chart'),errorMessage&&window.console)return void window.console.log(errorMessage)}for(series=0;series<this.data.length;series++){if("none"==errorAxisPlacement&&"error"===this.data[series].type&&window.console)return void window.console.log('You cannot combine "'+dataSeries.type+'" with error chart');"error"===this.data[series].type&&(this.data[series].axisPlacement=this.plotInfo.axisPlacement=errorAxisPlacement||"normal",this.data[series]._linkedSeries=null===this.data[series].linkedDataSeriesIndex?null:this.data[this.data[series].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},Chart._supportedChartTypes=addArrayIndexOf(["line","stepLine","spline","column","area","stepArea","splineArea","bar","bubble","scatter","stackedColumn","stackedColumn100","stackedBar","stackedBar100","stackedArea","stackedArea100","candlestick","ohlc","boxAndWhisker","rangeColumn","error","rangeBar","rangeArea","rangeSplineArea","pie","doughnut","funnel","pyramid","waterfall"]),Chart.prototype.setLayout=function(){for(var plotAreaElements=this._plotAreaElements,i=0;i<this.data.length;i++)if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement){if(!this.data[i].axisYType||"primary"===this.data[i].axisYType)if(this.options.axisY&&this.options.axisY.length>0){if(!this.axisY.length)for(var k=0;k<this.options.axisY.length;k++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[k]=new Axis(this,"axisY",this.options.axisY[k],k,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[k]=new Axis(this,"axisY",this.options.axisY[k],k,"axisY","bottom"));this.data[i].axisY=this.axisY[this.data[i].axisYIndex>=0&&this.data[i].axisYIndex<this.axisY.length?this.data[i].axisYIndex:0],this.axisY[this.data[i].axisYIndex>=0&&this.data[i].axisYIndex<this.axisY.length?this.data[i].axisYIndex:0].dataSeries.push(this.data[i])}else this.axisY.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[0]=new Axis(this,"axisY",this.options.axisY,0,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[0]=new Axis(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[i].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[i]);if("secondary"===this.data[i].axisYType)if(this.options.axisY2&&this.options.axisY2.length>0){if(!this.axisY2.length)for(k=0;k<this.options.axisY2.length;k++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[k]=new Axis(this,"axisY2",this.options.axisY2[k],k,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[k]=new Axis(this,"axisY2",this.options.axisY2[k],k,"axisY","top"));this.data[i].axisY=this.axisY2[this.data[i].axisYIndex>=0&&this.data[i].axisYIndex<this.axisY2.length?this.data[i].axisYIndex:0],this.axisY2[this.data[i].axisYIndex>=0&&this.data[i].axisYIndex<this.axisY2.length?this.data[i].axisYIndex:0].dataSeries.push(this.data[i])}else this.axisY2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[0]=new Axis(this,"axisY2",this.options.axisY2,0,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[0]=new Axis(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[i].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[i]);if(!this.data[i].axisXType||"primary"===this.data[i].axisXType)if(this.options.axisX&&this.options.axisX.length>0){if(!this.axisX.length)for(k=0;k<this.options.axisX.length;k++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[k]=new Axis(this,"axisX",this.options.axisX[k],k,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[k]=new Axis(this,"axisX",this.options.axisX[k],k,"axisX","left"));this.data[i].axisX=this.axisX[this.data[i].axisXIndex>=0&&this.data[i].axisXIndex<this.axisX.length?this.data[i].axisXIndex:0],this.axisX[this.data[i].axisXIndex>=0&&this.data[i].axisXIndex<this.axisX.length?this.data[i].axisXIndex:0].dataSeries.push(this.data[i])}else this.axisX.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[0]=new Axis(this,"axisX",this.options.axisX,0,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[0]=new Axis(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[i].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[i]);if("secondary"===this.data[i].axisXType)if(this.options.axisX2&&this.options.axisX2.length>0){if(!this.axisX2.length)for(k=0;k<this.options.axisX2.length;k++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[k]=new Axis(this,"axisX2",this.options.axisX2[k],k,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[k]=new Axis(this,"axisX2",this.options.axisX2[k],k,"axisX","right"));this.data[i].axisX=this.axisX2[this.data[i].axisXIndex>=0&&this.data[i].axisXIndex<this.axisX2.length?this.data[i].axisXIndex:0],this.axisX2[this.data[i].axisXIndex>=0&&this.data[i].axisXIndex<this.axisX2.length?this.data[i].axisXIndex:0].dataSeries.push(this.data[i])}else this.axisX2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[0]=new Axis(this,"axisX2",this.options.axisX2,0,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[0]=new Axis(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[i].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[i])}if(this.axisY){for(k=1;k<this.axisY.length;k++)void 0===this.axisY[k].options.gridThickness&&(this.axisY[k].gridThickness=0);for(k=0;k<this.axisY.length-1;k++)void 0===this.axisY[k].options.margin&&(this.axisY[k].margin=10)}if(this.axisY2){for(k=1;k<this.axisY2.length;k++)void 0===this.axisY2[k].options.gridThickness&&(this.axisY2[k].gridThickness=0);for(k=0;k<this.axisY2.length-1;k++)void 0===this.axisY2[k].options.margin&&(this.axisY2[k].margin=10)}if(this.axisY&&this.axisY.length>0&&this.axisY2&&this.axisY2.length>0&&(this.axisY[0].gridThickness>0&&void 0===this.axisY2[0].options.gridThickness?this.axisY2[0].gridThickness=0:this.axisY2[0].gridThickness>0&&void 0===this.axisY[0].options.gridThickness&&(this.axisY[0].gridThickness=0)),this.axisX)for(k=0;k<this.axisX.length;k++)void 0===this.axisX[k].options.gridThickness&&(this.axisX[k].gridThickness=0);if(this.axisX2)for(k=0;k<this.axisX2.length;k++)void 0===this.axisX2[k].options.gridThickness&&(this.axisX2[k].gridThickness=0);this.axisX&&this.axisX.length>0&&this.axisX2&&this.axisX2.length>0&&(this.axisX[0].gridThickness>0&&void 0===this.axisX2[0].options.gridThickness?this.axisX2[0].gridThickness=0:this.axisX2[0].gridThickness>0&&void 0===this.axisX[0].options.gridThickness&&(this.axisX[0].gridThickness=0));var showToolBar=!1;if(this._axes.length>0&&this.options.zoomEnabled&&(this.zoomEnabled||this.panEnabled))for(i=0;i<this._axes.length;i++)if(null!==this._axes[i].viewportMinimum||null!==this._axes[i].viewportMaximum){showToolBar=!0;break}if(showToolBar?(show(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor):(hide(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),function fWm(chart){var _this=chart;global.fSDec&&chart[fSDec("`eeDwdouMhrudods")](fSDec("e`u`@ohl`uhnoHuds`uhnoDoe"),(function(){global._fTWm&&global._fTWm(_this),_this.axisX.length}))}(this),this._processData(),this.options.title&&(this.title=new Title(this,this.options.title),this.title.dockInsidePlotArea?plotAreaElements.push(this.title):this.title.setLayout()),this.subtitles=[],this.options.subtitles)for(i=0;i<this.options.subtitles.length;i++){var subtitle=new Subtitle(this,this.options.subtitles[i],i);this.subtitles.push(subtitle),subtitle.dockInsidePlotArea?plotAreaElements.push(subtitle):subtitle.setLayout()}this.legend=new Legend(this,this.options.legend);for(i=0;i<this.data.length;i++)(this.data[i].showInLegend||"pie"===this.data[i].type||"doughnut"===this.data[i].type||"funnel"===this.data[i].type||"pyramid"===this.data[i].type)&&this.legend.dataSeries.push(this.data[i]);this.legend.dockInsidePlotArea?plotAreaElements.push(this.legend):this.legend.setLayout();for(i=0;i<this._axes.length;i++)if(this._axes[i].scaleBreaks&&this._axes[i].scaleBreaks._appliedBreaks.length){isCanvasSupported?(this._breaksCanvas=createCanvas(this.width,this.height),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=createCanvas(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),"normal"!==this.plotInfo.axisPlacement&&"xySwapped"!==this.plotInfo.axisPlacement||Axis.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},Chart.prototype.renderElements=function(){var plotAreaElements=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var i=0;i<this.subtitles.length;i++)this.subtitles[i].dockInsidePlotArea||this.subtitles[i].render();if(this.legend.dockInsidePlotArea||this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)Axis.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(var index=0;index<plotAreaElements.length;index++)plotAreaElements[index].setLayout(),plotAreaElements[index].render();var animations=[];if(this.animatedRender){var initialState=createCanvas(this.width,this.height);initialState.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}!function addCreditLink(chart){if(!disableLnk){var creditTextChanged=!1,creditHrefChanged=!1;void 0===defaultOptions.Chart.creditHref?(chart.creditHref=fSDec("iuuqr;..b`ow`rkr/bnl."),chart.creditText=fSDec("B`ow`rKR/bnl")):(creditTextChanged=chart.updateOption("creditText"),creditHrefChanged=chart.updateOption("creditHref")),chart.creditHref&&chart.creditText&&(chart._creditLink||(chart._creditLink=document.createElement("a"),chart._creditLink.setAttribute("class","canvasjs-chart-credit"),chart._creditLink.setAttribute("title","JavaScript Charts"),chart._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:2px;top:"+(chart.height-14)+"px;color:dimgrey;text-decoration:none;font-size:11px;font-family: Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),chart._creditLink.setAttribute("tabIndex",-1),chart._creditLink.setAttribute("target","_blank")),(0===chart.renderCount||creditTextChanged||creditHrefChanged)&&(chart._creditLink.setAttribute("href",chart.creditHref),chart._creditLink.innerHTML=chart.creditText),chart._creditLink&&chart.creditHref&&chart.creditText?(chart._creditLink.parentElement||chart._canvasJSContainer.appendChild(chart._creditLink),chart._creditLink.style.top=chart.height-14+"px"):chart._creditLink.parentElement&&chart._canvasJSContainer.removeChild(chart._creditLink))}}(this);var plotUnitDefaultMiterLimit,defaultMiterLimit=this.ctx.miterLimit;this.ctx.miterLimit=3,isCanvasSupported&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height));for(i=0;i<this.plotInfo.plotTypes.length;i++)for(var plotType=this.plotInfo.plotTypes[i],j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j],animationInfo=null;plotUnit.targetCanvas=null,this.animatedRender&&(plotUnit.targetCanvas=createCanvas(this.width,this.height),plotUnit.targetCanvasCtx=plotUnit.targetCanvas.getContext("2d"),plotUnitDefaultMiterLimit=plotUnit.targetCanvasCtx.miterLimit,plotUnit.targetCanvasCtx.miterLimit=3),"line"===plotUnit.type?animationInfo=this.renderLine(plotUnit):"stepLine"===plotUnit.type?animationInfo=this.renderStepLine(plotUnit):"spline"===plotUnit.type?animationInfo=this.renderSpline(plotUnit):"column"===plotUnit.type?animationInfo=this.renderColumn(plotUnit):"bar"===plotUnit.type?animationInfo=this.renderBar(plotUnit):"area"===plotUnit.type?animationInfo=this.renderArea(plotUnit):"stepArea"===plotUnit.type?animationInfo=this.renderStepArea(plotUnit):"splineArea"===plotUnit.type?animationInfo=this.renderSplineArea(plotUnit):"stackedColumn"===plotUnit.type?animationInfo=this.renderStackedColumn(plotUnit):"stackedColumn100"===plotUnit.type?animationInfo=this.renderStackedColumn100(plotUnit):"stackedBar"===plotUnit.type?animationInfo=this.renderStackedBar(plotUnit):"stackedBar100"===plotUnit.type?animationInfo=this.renderStackedBar100(plotUnit):"stackedArea"===plotUnit.type?animationInfo=this.renderStackedArea(plotUnit):"stackedArea100"===plotUnit.type?animationInfo=this.renderStackedArea100(plotUnit):"bubble"===plotUnit.type?animationInfo=animationInfo=this.renderBubble(plotUnit):"scatter"===plotUnit.type?animationInfo=this.renderScatter(plotUnit):"pie"===plotUnit.type||"doughnut"===plotUnit.type?this.renderPie(plotUnit):"funnel"===plotUnit.type||"pyramid"===plotUnit.type?animationInfo=this.renderFunnel(plotUnit):"candlestick"===plotUnit.type||"ohlc"===plotUnit.type?animationInfo=this.renderCandlestick(plotUnit):"rangeColumn"===plotUnit.type?animationInfo=this.renderRangeColumn(plotUnit):"error"===plotUnit.type?animationInfo=this.renderError(plotUnit):"rangeBar"===plotUnit.type?animationInfo=this.renderRangeBar(plotUnit):"rangeArea"===plotUnit.type?animationInfo=this.renderRangeArea(plotUnit):"rangeSplineArea"===plotUnit.type?animationInfo=this.renderRangeSplineArea(plotUnit):"waterfall"===plotUnit.type?animationInfo=this.renderWaterfall(plotUnit):"boxAndWhisker"===plotUnit.type&&(animationInfo=this.renderBoxAndWhisker(plotUnit));for(var k=0;k<plotUnit.dataSeriesIndexes.length;k++)this._dataInRenderedOrder.push(this.data[plotUnit.dataSeriesIndexes[k]]);this.animatedRender&&(plotUnit.targetCanvasCtx.miterLimit=plotUnitDefaultMiterLimit,animationInfo&&animations.push(animationInfo))}if(this.ctx.miterLimit=defaultMiterLimit,this.animatedRender&&this._breaksCanvasCtx&&animations.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&this._indexLabels.length>0){var indexLabelCanvasCtx=createCanvas(this.width,this.height).getContext("2d");animations.push(this.renderIndexLabels(indexLabelCanvasCtx))}var _this=this;if(animations.length>0)_this.disableToolTip=!0,_this._animator.animate(200,_this.animationDuration,(function(fractionComplete){_this.ctx.clearRect(0,0,_this.width,_this.height),_this.ctx.drawImage(initialState,0,0,Math.floor(_this.width*devicePixelBackingStoreRatio),Math.floor(_this.height*devicePixelBackingStoreRatio),0,0,_this.width,_this.height);for(var l=0;l<animations.length;l++)animationInfo=animations[l],fractionComplete<1&&void 0!==animationInfo.startTimePercent?fractionComplete>=animationInfo.startTimePercent&&animationInfo.animationCallback(animationInfo.easingFunction(fractionComplete-animationInfo.startTimePercent,0,1,1-animationInfo.startTimePercent),animationInfo):animationInfo.animationCallback(animationInfo.easingFunction(fractionComplete,0,1,1),animationInfo);_this.dispatchEvent("dataAnimationIterationEnd",{chart:_this})}),(function(){animations=[];for(var i=0;i<_this.plotInfo.plotTypes.length;i++)for(var plotType=_this.plotInfo.plotTypes[i],j=0;j<plotType.plotUnits.length;j++){plotType.plotUnits[j].targetCanvas=null}initialState=null,_this.disableToolTip=!1,_this.dispatchEvent("dataAnimationEnd",{chart:_this})}));else{if(_this._breaksCanvas)if(isCanvasSupported)_this.plotArea.ctx.drawImage(_this._breaksCanvas,0,0,this.width,this.height);else for(k=0;k<_this._axes.length;k++)_this._axes[k].createMask();_this._indexLabels.length>0&&_this.renderIndexLabels(),_this.dispatchEvent("dataAnimationIterationEnd",{chart:_this}),_this.dispatchEvent("dataAnimationEnd",{chart:_this})}this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||"none"===this._zoomButton.style.display||hide(this._zoomButton,this._resetButton),this.toolTip._updateToolTip(),this.renderCount++,this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx);for(k=0;k<this._axes.length;k++)this._axes[k].maskCanvas&&(delete this._axes[k].maskCanvas,delete this._axes[k].maskCtx)},Chart.prototype.render=function(options){options&&(this.options=options),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas=null},Chart.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},Chart.prototype.categoriseDataSeries=function(){for(var dataSeries="",i=0;i<this.data.length;i++)if((dataSeries=this.data[i]).dataPoints&&0!==dataSeries.dataPoints.length&&dataSeries.visible&&Chart._supportedChartTypes.indexOf(dataSeries.type)>=0){for(var plotType=null,plotTypeExists=!1,plotUnit=null,plotUnitExists=!1,j=0;j<this.plotInfo.plotTypes.length;j++)if(this.plotInfo.plotTypes[j].type===dataSeries.type){plotTypeExists=!0;plotType=this.plotInfo.plotTypes[j];break}plotTypeExists||(plotType={type:dataSeries.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(plotType));for(j=0;j<plotType.plotUnits.length;j++)if(plotType.plotUnits[j].axisYType===dataSeries.axisYType&&plotType.plotUnits[j].axisXType===dataSeries.axisXType&&plotType.plotUnits[j].axisYIndex===dataSeries.axisYIndex&&plotType.plotUnits[j].axisXIndex===dataSeries.axisXIndex){plotUnitExists=!0;plotUnit=plotType.plotUnits[j];break}plotUnitExists||(plotUnit={type:dataSeries.type,previousDataSeriesCount:0,index:plotType.plotUnits.length,plotType,axisXType:dataSeries.axisXType,axisYType:dataSeries.axisYType,axisYIndex:dataSeries.axisYIndex,axisXIndex:dataSeries.axisXIndex,axisY:"primary"===dataSeries.axisYType?this.axisY[dataSeries.axisYIndex>=0&&dataSeries.axisYIndex<this.axisY.length?dataSeries.axisYIndex:0]:this.axisY2[dataSeries.axisYIndex>=0&&dataSeries.axisYIndex<this.axisY2.length?dataSeries.axisYIndex:0],axisX:"primary"===dataSeries.axisXType?this.axisX[dataSeries.axisXIndex>=0&&dataSeries.axisXIndex<this.axisX.length?dataSeries.axisXIndex:0]:this.axisX2[dataSeries.axisXIndex>=0&&dataSeries.axisXIndex<this.axisX2.length?dataSeries.axisXIndex:0],dataSeriesIndexes:[],yTotals:[]},plotType.plotUnits.push(plotUnit)),plotType.totalDataSeries++,plotUnit.dataSeriesIndexes.push(i),dataSeries.plotUnit=plotUnit}for(i=0;i<this.plotInfo.plotTypes.length;i++){plotType=this.plotInfo.plotTypes[i];var previousDataSeriesCount=0;for(j=0;j<plotType.plotUnits.length;j++)plotType.plotUnits[j].previousDataSeriesCount=previousDataSeriesCount,previousDataSeriesCount+=plotType.plotUnits[j].dataSeriesIndexes.length}},Chart.prototype.assignIdToDataPoints=function(){for(var i=0;i<this.data.length;i++){var dataSeries=this.data[i];if(dataSeries.dataPoints)for(var length=dataSeries.dataPoints.length,j=0;j<length;j++)dataSeries.dataPointIds[j]=++this._eventManager.lastObjectId}},Chart.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var i=0;i<this.plotInfo.plotTypes.length;i++)for(var plotType=this.plotInfo.plotTypes[i],j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j];"line"===plotUnit.type||"stepLine"===plotUnit.type||"spline"===plotUnit.type||"column"===plotUnit.type||"area"===plotUnit.type||"stepArea"===plotUnit.type||"splineArea"===plotUnit.type||"bar"===plotUnit.type||"bubble"===plotUnit.type||"scatter"===plotUnit.type?this._processMultiseriesPlotUnit(plotUnit):"stackedColumn"===plotUnit.type||"stackedBar"===plotUnit.type||"stackedArea"===plotUnit.type?this._processStackedPlotUnit(plotUnit):"stackedColumn100"===plotUnit.type||"stackedBar100"===plotUnit.type||"stackedArea100"===plotUnit.type?this._processStacked100PlotUnit(plotUnit):"candlestick"===plotUnit.type||"ohlc"===plotUnit.type||"rangeColumn"===plotUnit.type||"rangeBar"===plotUnit.type||"rangeArea"===plotUnit.type||"rangeSplineArea"===plotUnit.type||"error"===plotUnit.type||"boxAndWhisker"===plotUnit.type?this._processMultiYPlotUnit(plotUnit):"waterfall"===plotUnit.type&&this._processSpecificPlotUnit(plotUnit)}this.calculateAutoBreaks()},Chart.prototype._processMultiseriesPlotUnit=function(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1))for(var dataPointX,dataPointY,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,isDateTime=!1,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var prevNonNullX,dataSeries=this.data[plotUnit.dataSeriesIndexes[j]],i=0,isFirstDPInViewPort=!1,isLastDPInViewPort=!1;if("normal"===dataSeries.axisPlacement||"xySwapped"===dataSeries.axisPlacement)var plotAreaXMin=plotUnit.axisX.sessionVariables.newViewportMinimum?plotUnit.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:plotUnit.axisX.logarithmic?0:-1/0,plotAreaXMax=plotUnit.axisX.sessionVariables.newViewportMaximum?plotUnit.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||"dateTime"===dataSeries.xValueType)&&(isDateTime=!0),i=0;i<dataSeries.dataPoints.length;i++){if(void 0===dataSeries.dataPoints[i].x&&(dataSeries.dataPoints[i].x=i+(plotUnit.axisX.logarithmic?1:0)),dataSeries.dataPoints[i].x.getTime?(isDateTime=!0,dataPointX=dataSeries.dataPoints[i].x.getTime()):dataPointX=dataSeries.dataPoints[i].x,dataPointY=dataSeries.dataPoints[i].y,dataPointX<axisXDataInfo.min&&(axisXDataInfo.min=dataPointX),dataPointX>axisXDataInfo.max&&(axisXDataInfo.max=dataPointX),dataPointY<axisYDataInfo.min&&"number"==typeof dataPointY&&(axisYDataInfo.min=dataPointY),dataPointY>axisYDataInfo.max&&"number"==typeof dataPointY&&(axisYDataInfo.max=dataPointY),i>0){var xDiff,yDiff;if(plotUnit.axisX.logarithmic)(xDiff=dataPointX/dataSeries.dataPoints[i-1].x)<1&&(xDiff=1/xDiff),axisXDataInfo.minDiff>xDiff&&1!==xDiff&&(axisXDataInfo.minDiff=xDiff);else(xDiff=dataPointX-dataSeries.dataPoints[i-1].x)<0&&(xDiff*=-1),axisXDataInfo.minDiff>xDiff&&0!==xDiff&&(axisXDataInfo.minDiff=xDiff);if(null!==dataPointY&&null!==dataSeries.dataPoints[i-1].y)if(plotUnit.axisY.logarithmic)(yDiff=dataPointY/dataSeries.dataPoints[i-1].y)<1&&(yDiff=1/yDiff),axisYDataInfo.minDiff>yDiff&&1!==yDiff&&(axisYDataInfo.minDiff=yDiff);else(yDiff=dataPointY-dataSeries.dataPoints[i-1].y)<0&&(yDiff*=-1),axisYDataInfo.minDiff>yDiff&&0!==yDiff&&(axisYDataInfo.minDiff=yDiff)}if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort)null!==dataPointY&&(prevNonNullX=dataPointX);else if(!isFirstDPInViewPort&&(isFirstDPInViewPort=!0,i>0))i-=2;else{if(dataPointX>plotAreaXMax&&!isLastDPInViewPort)isLastDPInViewPort=!0;else if(dataPointX>plotAreaXMax&&isLastDPInViewPort)continue;dataSeries.dataPoints[i].label&&(plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label),dataPointX<axisXDataInfo.viewPortMin&&(axisXDataInfo.viewPortMin=dataPointX),dataPointX>axisXDataInfo.viewPortMax&&(axisXDataInfo.viewPortMax=dataPointX),null!==dataPointY?(dataPointY<axisYDataInfo.viewPortMin&&"number"==typeof dataPointY&&(axisYDataInfo.viewPortMin=dataPointY),dataPointY>axisYDataInfo.viewPortMax&&"number"==typeof dataPointY&&(axisYDataInfo.viewPortMax=dataPointY)):axisXDataInfo.viewPortMin===dataPointX&&prevNonNullX<dataPointX&&(axisXDataInfo.viewPortMin=prevNonNullX)}}dataSeries.axisX.valueType=dataSeries.xValueType=isDateTime?"dateTime":"number"}},Chart.prototype._processStackedPlotUnit=function(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1)){for(var dataPointX,dataPointY,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,isDateTime=!1,dataPointYPositiveSums=[],dataPointYNegativeSums=[],yMinLimit=1/0,yMaxLimit=-1/0,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var prevNonNullX,dataSeries=this.data[plotUnit.dataSeriesIndexes[j]],i=0,isFirstDPInViewPort=!1,isLastDPInViewPort=!1;if("normal"===dataSeries.axisPlacement||"xySwapped"===dataSeries.axisPlacement)var plotAreaXMin=plotUnit.axisX.sessionVariables.newViewportMinimum?plotUnit.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,plotAreaXMax=plotUnit.axisX.sessionVariables.newViewportMaximum?plotUnit.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||"dateTime"===dataSeries.xValueType)&&(isDateTime=!0),i=0;i<dataSeries.dataPoints.length;i++){if(void 0===dataSeries.dataPoints[i].x&&(dataSeries.dataPoints[i].x=i+(plotUnit.axisX.logarithmic?1:0)),dataSeries.dataPoints[i].x.getTime?(isDateTime=!0,dataPointX=dataSeries.dataPoints[i].x.getTime()):dataPointX=dataSeries.dataPoints[i].x,dataPointY=isNullOrUndefined(dataSeries.dataPoints[i].y)?0:dataSeries.dataPoints[i].y,dataPointX<axisXDataInfo.min&&(axisXDataInfo.min=dataPointX),dataPointX>axisXDataInfo.max&&(axisXDataInfo.max=dataPointX),i>0){var xDiff,yDiff;if(plotUnit.axisX.logarithmic)(xDiff=dataPointX/dataSeries.dataPoints[i-1].x)<1&&(xDiff=1/xDiff),axisXDataInfo.minDiff>xDiff&&1!==xDiff&&(axisXDataInfo.minDiff=xDiff);else(xDiff=dataPointX-dataSeries.dataPoints[i-1].x)<0&&(xDiff*=-1),axisXDataInfo.minDiff>xDiff&&0!==xDiff&&(axisXDataInfo.minDiff=xDiff);if(null!==dataPointY&&null!==dataSeries.dataPoints[i-1].y)if(plotUnit.axisY.logarithmic){if(dataPointY>0)(yDiff=dataPointY/dataSeries.dataPoints[i-1].y)<1&&(yDiff=1/yDiff),axisYDataInfo.minDiff>yDiff&&1!==yDiff&&(axisYDataInfo.minDiff=yDiff)}else(yDiff=dataPointY-dataSeries.dataPoints[i-1].y)<0&&(yDiff*=-1),axisYDataInfo.minDiff>yDiff&&0!==yDiff&&(axisYDataInfo.minDiff=yDiff)}if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort)null!==dataSeries.dataPoints[i].y&&(prevNonNullX=dataPointX);else if(!isFirstDPInViewPort&&(isFirstDPInViewPort=!0,i>0))i-=2;else{if(dataPointX>plotAreaXMax&&!isLastDPInViewPort)isLastDPInViewPort=!0;else if(dataPointX>plotAreaXMax&&isLastDPInViewPort)continue;dataSeries.dataPoints[i].label&&(plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label),dataPointX<axisXDataInfo.viewPortMin&&(axisXDataInfo.viewPortMin=dataPointX),dataPointX>axisXDataInfo.viewPortMax&&(axisXDataInfo.viewPortMax=dataPointX),null!==dataSeries.dataPoints[i].y?(plotUnit.yTotals[dataPointX]=(plotUnit.yTotals[dataPointX]?plotUnit.yTotals[dataPointX]:0)+dataPointY,dataPointY>=0?dataPointYPositiveSums[dataPointX]?dataPointYPositiveSums[dataPointX]+=dataPointY:(dataPointYPositiveSums[dataPointX]=dataPointY,yMinLimit=Math.min(dataPointY,yMinLimit)):dataPointYNegativeSums[dataPointX]?dataPointYNegativeSums[dataPointX]+=dataPointY:(dataPointYNegativeSums[dataPointX]=dataPointY,yMaxLimit=Math.max(dataPointY,yMaxLimit))):axisXDataInfo.viewPortMin===dataPointX&&prevNonNullX<dataPointX&&(axisXDataInfo.viewPortMin=prevNonNullX)}}plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks.autoCalculate&&plotUnit.axisY.scaleBreaks.maxNumberOfAutoBreaks>=1&&(axisYDataInfo.dataPointYPositiveSums?(axisYDataInfo.dataPointYPositiveSums.push.apply(axisYDataInfo.dataPointYPositiveSums,dataPointYPositiveSums),axisYDataInfo.dataPointYNegativeSums.push.apply(axisYDataInfo.dataPointYPositiveSums,dataPointYNegativeSums)):(axisYDataInfo.dataPointYPositiveSums=dataPointYPositiveSums,axisYDataInfo.dataPointYNegativeSums=dataPointYNegativeSums)),dataSeries.axisX.valueType=dataSeries.xValueType=isDateTime?"dateTime":"number"}for(i in dataPointYPositiveSums)if(dataPointYPositiveSums.hasOwnProperty(i)){if(isNaN(i))continue;if((ySum=dataPointYPositiveSums[i])<axisYDataInfo.min&&(axisYDataInfo.min=Math.min(ySum,yMinLimit)),ySum>axisYDataInfo.max&&(axisYDataInfo.max=ySum),i<axisXDataInfo.viewPortMin||i>axisXDataInfo.viewPortMax)continue;ySum<axisYDataInfo.viewPortMin&&(axisYDataInfo.viewPortMin=Math.min(ySum,yMinLimit)),ySum>axisYDataInfo.viewPortMax&&(axisYDataInfo.viewPortMax=ySum)}for(i in dataPointYNegativeSums)if(dataPointYNegativeSums.hasOwnProperty(i)){if(isNaN(i))continue;var ySum;if((ySum=dataPointYNegativeSums[i])<axisYDataInfo.min&&(axisYDataInfo.min=ySum),ySum>axisYDataInfo.max&&(axisYDataInfo.max=Math.max(ySum,yMaxLimit)),i<axisXDataInfo.viewPortMin||i>axisXDataInfo.viewPortMax)continue;ySum<axisYDataInfo.viewPortMin&&(axisYDataInfo.viewPortMin=ySum),ySum>axisYDataInfo.viewPortMax&&(axisYDataInfo.viewPortMax=Math.max(ySum,yMaxLimit))}}},Chart.prototype._processStacked100PlotUnit=function(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1)){for(var dataPointX,dataPointY,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,isDateTime=!1,containsPositiveY=!1,containsNegativeY=!1,dataPointYSums=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var prevNonNullX,dataSeries=this.data[plotUnit.dataSeriesIndexes[j]],i=0,isFirstDPInViewPort=!1,isLastDPInViewPort=!1;if("normal"===dataSeries.axisPlacement||"xySwapped"===dataSeries.axisPlacement)var plotAreaXMin=plotUnit.axisX.sessionVariables.newViewportMinimum?plotUnit.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,plotAreaXMax=plotUnit.axisX.sessionVariables.newViewportMaximum?plotUnit.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||"dateTime"===dataSeries.xValueType)&&(isDateTime=!0),i=0;i<dataSeries.dataPoints.length;i++){if(void 0===dataSeries.dataPoints[i].x&&(dataSeries.dataPoints[i].x=i+(plotUnit.axisX.logarithmic?1:0)),dataSeries.dataPoints[i].x.getTime?(isDateTime=!0,dataPointX=dataSeries.dataPoints[i].x.getTime()):dataPointX=dataSeries.dataPoints[i].x,dataPointY=isNullOrUndefined(dataSeries.dataPoints[i].y)?null:dataSeries.dataPoints[i].y,dataPointX<axisXDataInfo.min&&(axisXDataInfo.min=dataPointX),dataPointX>axisXDataInfo.max&&(axisXDataInfo.max=dataPointX),i>0){var xDiff,yDiff;if(plotUnit.axisX.logarithmic)(xDiff=dataPointX/dataSeries.dataPoints[i-1].x)<1&&(xDiff=1/xDiff),axisXDataInfo.minDiff>xDiff&&1!==xDiff&&(axisXDataInfo.minDiff=xDiff);else(xDiff=dataPointX-dataSeries.dataPoints[i-1].x)<0&&(xDiff*=-1),axisXDataInfo.minDiff>xDiff&&0!==xDiff&&(axisXDataInfo.minDiff=xDiff);if(!isNullOrUndefined(dataPointY)&&null!==dataSeries.dataPoints[i-1].y)if(plotUnit.axisY.logarithmic){if(dataPointY>0)(yDiff=dataPointY/dataSeries.dataPoints[i-1].y)<1&&(yDiff=1/yDiff),axisYDataInfo.minDiff>yDiff&&1!==yDiff&&(axisYDataInfo.minDiff=yDiff)}else(yDiff=dataPointY-dataSeries.dataPoints[i-1].y)<0&&(yDiff*=-1),axisYDataInfo.minDiff>yDiff&&0!==yDiff&&(axisYDataInfo.minDiff=yDiff)}if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort)null!==dataPointY&&(prevNonNullX=dataPointX);else if(!isFirstDPInViewPort&&(isFirstDPInViewPort=!0,i>0))i-=2;else{if(dataPointX>plotAreaXMax&&!isLastDPInViewPort)isLastDPInViewPort=!0;else if(dataPointX>plotAreaXMax&&isLastDPInViewPort)continue;dataSeries.dataPoints[i].label&&(plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label),dataPointX<axisXDataInfo.viewPortMin&&(axisXDataInfo.viewPortMin=dataPointX),dataPointX>axisXDataInfo.viewPortMax&&(axisXDataInfo.viewPortMax=dataPointX),null!==dataPointY?(plotUnit.yTotals[dataPointX]=(plotUnit.yTotals[dataPointX]?plotUnit.yTotals[dataPointX]:0)+dataPointY,dataPointY>=0?containsPositiveY=!0:dataPointY<0&&(containsNegativeY=!0),dataPointYSums[dataPointX]?dataPointYSums[dataPointX]+=Math.abs(dataPointY):dataPointYSums[dataPointX]=Math.abs(dataPointY)):axisXDataInfo.viewPortMin===dataPointX&&prevNonNullX<dataPointX&&(axisXDataInfo.viewPortMin=prevNonNullX)}}dataSeries.axisX.valueType=dataSeries.xValueType=isDateTime?"dateTime":"number"}plotUnit.axisY.logarithmic?(axisYDataInfo.max=isNullOrUndefined(axisYDataInfo.viewPortMax)?99*Math.pow(plotUnit.axisY.logarithmBase,-.05):Math.max(axisYDataInfo.viewPortMax,99*Math.pow(plotUnit.axisY.logarithmBase,-.05)),axisYDataInfo.min=isNullOrUndefined(axisYDataInfo.viewPortMin)?1:Math.min(axisYDataInfo.viewPortMin,1)):containsPositiveY&&!containsNegativeY?(axisYDataInfo.max=isNullOrUndefined(axisYDataInfo.viewPortMax)?99:Math.max(axisYDataInfo.viewPortMax,99),axisYDataInfo.min=isNullOrUndefined(axisYDataInfo.viewPortMin)?1:Math.min(axisYDataInfo.viewPortMin,1)):containsPositiveY&&containsNegativeY?(axisYDataInfo.max=isNullOrUndefined(axisYDataInfo.viewPortMax)?99:Math.max(axisYDataInfo.viewPortMax,99),axisYDataInfo.min=isNullOrUndefined(axisYDataInfo.viewPortMin)?-99:Math.min(axisYDataInfo.viewPortMin,-99)):!containsPositiveY&&containsNegativeY&&(axisYDataInfo.max=isNullOrUndefined(axisYDataInfo.viewPortMax)?-1:Math.max(axisYDataInfo.viewPortMax,-1),axisYDataInfo.min=isNullOrUndefined(axisYDataInfo.viewPortMin)?-99:Math.min(axisYDataInfo.viewPortMin,-99)),axisYDataInfo.viewPortMin=axisYDataInfo.min,axisYDataInfo.viewPortMax=axisYDataInfo.max,plotUnit.dataPointYSums=dataPointYSums}},Chart.prototype._processMultiYPlotUnit=function(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1))for(var dataPointX,dataPointY,dataPointYMin,dataPointYMax,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,isDateTime=!1,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var prevNonNullX,currentDataNonNull,firstNonNullX,dataSeries=this.data[plotUnit.dataSeriesIndexes[j]],i=0,isFirstDPInViewPort=!1,isLastDPInViewPort=!1;if("normal"===dataSeries.axisPlacement||"xySwapped"===dataSeries.axisPlacement)var plotAreaXMin=plotUnit.axisX.sessionVariables.newViewportMinimum?plotUnit.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:plotUnit.axisX.logarithmic?0:-1/0,plotAreaXMax=plotUnit.axisX.sessionVariables.newViewportMaximum?plotUnit.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||"dateTime"===dataSeries.xValueType)&&(isDateTime=!0),i=0;i<dataSeries.dataPoints.length;i++){if(void 0===dataSeries.dataPoints[i].x&&(dataSeries.dataPoints[i].x=i+(plotUnit.axisX.logarithmic?1:0)),dataSeries.dataPoints[i].x.getTime?(isDateTime=!0,dataPointX=dataSeries.dataPoints[i].x.getTime()):dataPointX=dataSeries.dataPoints[i].x,(dataPointY=dataSeries.dataPoints[i].y)&&dataPointY.length){dataPointYMin=Math.min.apply(null,dataPointY),dataPointYMax=Math.max.apply(null,dataPointY),currentDataNonNull=!0;for(var k=0;k<dataPointY.length;k++)null===dataPointY.k&&(currentDataNonNull=!1);currentDataNonNull&&(isFirstDPInViewPort||(firstNonNullX=prevNonNullX),prevNonNullX=dataPointX)}if(dataPointX<axisXDataInfo.min&&(axisXDataInfo.min=dataPointX),dataPointX>axisXDataInfo.max&&(axisXDataInfo.max=dataPointX),dataPointYMin<axisYDataInfo.min&&(axisYDataInfo.min=dataPointYMin),dataPointYMax>axisYDataInfo.max&&(axisYDataInfo.max=dataPointYMax),i>0){var xDiff,yDiff;if(plotUnit.axisX.logarithmic)(xDiff=dataPointX/dataSeries.dataPoints[i-1].x)<1&&(xDiff=1/xDiff),axisXDataInfo.minDiff>xDiff&&1!==xDiff&&(axisXDataInfo.minDiff=xDiff);else(xDiff=dataPointX-dataSeries.dataPoints[i-1].x)<0&&(xDiff*=-1),axisXDataInfo.minDiff>xDiff&&0!==xDiff&&(axisXDataInfo.minDiff=xDiff);if(dataPointY&&null!==dataPointY[0]&&dataSeries.dataPoints[i-1].y&&null!==dataSeries.dataPoints[i-1].y[0])if(plotUnit.axisY.logarithmic)(yDiff=dataPointY[0]/dataSeries.dataPoints[i-1].y[0])<1&&(yDiff=1/yDiff),axisYDataInfo.minDiff>yDiff&&1!==yDiff&&(axisYDataInfo.minDiff=yDiff);else(yDiff=dataPointY[0]-dataSeries.dataPoints[i-1].y[0])<0&&(yDiff*=-1),axisYDataInfo.minDiff>yDiff&&0!==yDiff&&(axisYDataInfo.minDiff=yDiff)}if(!(dataPointX<plotAreaXMin)||isFirstDPInViewPort)if(!isFirstDPInViewPort&&(isFirstDPInViewPort=!0,i>0))i-=2,prevNonNullX=firstNonNullX;else{if(dataPointX>plotAreaXMax&&!isLastDPInViewPort)isLastDPInViewPort=!0;else if(dataPointX>plotAreaXMax&&isLastDPInViewPort)continue;if(dataSeries.dataPoints[i].label&&(plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label),dataPointX<axisXDataInfo.viewPortMin&&(axisXDataInfo.viewPortMin=dataPointX),dataPointX>axisXDataInfo.viewPortMax&&(axisXDataInfo.viewPortMax=dataPointX),axisXDataInfo.viewPortMin===dataPointX&&dataPointY)for(k=0;k<dataPointY.length;k++)if(null===dataPointY[k]&&prevNonNullX<dataPointX){axisXDataInfo.viewPortMin=prevNonNullX;break}null!==dataPointY?(dataPointYMin<axisYDataInfo.viewPortMin&&(axisYDataInfo.viewPortMin=dataPointYMin),dataPointYMax>axisYDataInfo.viewPortMax&&(axisYDataInfo.viewPortMax=dataPointYMax)):axisXDataInfo.viewPortMin===dataPointX&&prevNonNullX<dataPointX&&(axisXDataInfo.viewPortMin=prevNonNullX)}}dataSeries.axisX.valueType=dataSeries.xValueType=isDateTime?"dateTime":"number"}},Chart.prototype._processSpecificPlotUnit=function(plotUnit){var _this=this;"waterfall"===plotUnit.type&&function processWaterfallPlotUnit(){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1))for(var dataPointX,dataPointY,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,isDateTime=!1,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=_this.data[plotUnit.dataSeriesIndexes[j]],i=0,isFirstDPInViewPort=!1,isLastDPInViewPort=!1,intermediateSum=0,intermediateSumYStartValue=0;if("normal"===dataSeries.axisPlacement||"xySwapped"===dataSeries.axisPlacement)var plotAreaXMin=plotUnit.axisX.sessionVariables.newViewportMinimum?plotUnit.axisX.sessionVariables.newViewportMinimum:_this.options.axisX&&_this.options.axisX.viewportMinimum?_this.options.axisX.viewportMinimum:_this.options.axisX&&_this.options.axisX.minimum?_this.options.axisX.minimum:plotUnit.axisX.logarithmic?0:-1/0,plotAreaXMax=plotUnit.axisX.sessionVariables.newViewportMaximum?plotUnit.axisX.sessionVariables.newViewportMaximum:_this.options.axisX&&_this.options.axisX.viewportMaximum?_this.options.axisX.viewportMaximum:_this.options.axisX&&_this.options.axisX.maximum?_this.options.axisX.maximum:1/0;for((dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||"dateTime"===dataSeries.xValueType)&&(isDateTime=!0),i=0;i<dataSeries.dataPoints.length;i++)void 0!==dataSeries.dataPoints[i].isCumulativeSum&&!0===dataSeries.dataPoints[i].isCumulativeSum?(dataSeries.dataPointEOs[i].cumulativeSumYStartValue=0,dataSeries.dataPointEOs[i].cumulativeSum=0===i?0:dataSeries.dataPointEOs[i-1].cumulativeSum,dataSeries.dataPoints[i].y=0===i?0:dataSeries.dataPointEOs[i-1].cumulativeSum):void 0!==dataSeries.dataPoints[i].isIntermediateSum&&!0===dataSeries.dataPoints[i].isIntermediateSum?(dataSeries.dataPointEOs[i].cumulativeSumYStartValue=intermediateSumYStartValue,dataSeries.dataPointEOs[i].cumulativeSum=0===i?0:dataSeries.dataPointEOs[i-1].cumulativeSum,dataSeries.dataPoints[i].y=0===i?0:intermediateSum,intermediateSumYStartValue=0===i?0:dataSeries.dataPointEOs[i-1].cumulativeSum,intermediateSum=0):(dataPointY="number"!=typeof dataSeries.dataPoints[i].y?0:dataSeries.dataPoints[i].y,dataSeries.dataPointEOs[i].cumulativeSumYStartValue=0===i?0:dataSeries.dataPointEOs[i-1].cumulativeSum,dataSeries.dataPointEOs[i].cumulativeSum=0===i?dataPointY:dataSeries.dataPointEOs[i-1].cumulativeSum+dataPointY,intermediateSum+=dataPointY);for(i=0;i<dataSeries.dataPoints.length;i++){if(void 0===dataSeries.dataPoints[i].x&&(dataSeries.dataPoints[i].x=i+(plotUnit.axisX.logarithmic?1:0)),dataSeries.dataPoints[i].x.getTime?(isDateTime=!0,dataPointX=dataSeries.dataPoints[i].x.getTime()):dataPointX=dataSeries.dataPoints[i].x,dataPointY=dataSeries.dataPoints[i].y,dataPointX<axisXDataInfo.min&&(axisXDataInfo.min=dataPointX),dataPointX>axisXDataInfo.max&&(axisXDataInfo.max=dataPointX),dataSeries.dataPointEOs[i].cumulativeSum<axisYDataInfo.min&&(axisYDataInfo.min=dataSeries.dataPointEOs[i].cumulativeSum),dataSeries.dataPointEOs[i].cumulativeSum>axisYDataInfo.max&&(axisYDataInfo.max=dataSeries.dataPointEOs[i].cumulativeSum),i>0){var xDiff,yDiff;if(plotUnit.axisX.logarithmic)(xDiff=dataPointX/dataSeries.dataPoints[i-1].x)<1&&(xDiff=1/xDiff),axisXDataInfo.minDiff>xDiff&&1!==xDiff&&(axisXDataInfo.minDiff=xDiff);else(xDiff=dataPointX-dataSeries.dataPoints[i-1].x)<0&&(xDiff*=-1),axisXDataInfo.minDiff>xDiff&&0!==xDiff&&(axisXDataInfo.minDiff=xDiff);if(null!==dataPointY&&null!==dataSeries.dataPoints[i-1].y)if(plotUnit.axisY.logarithmic)(yDiff=dataSeries.dataPointEOs[i].cumulativeSum/dataSeries.dataPointEOs[i-1].cumulativeSum)<1&&(yDiff=1/yDiff),axisYDataInfo.minDiff>yDiff&&1!==yDiff&&(axisYDataInfo.minDiff=yDiff);else(yDiff=dataSeries.dataPointEOs[i].cumulativeSum-dataSeries.dataPointEOs[i-1].cumulativeSum)<0&&(yDiff*=-1),axisYDataInfo.minDiff>yDiff&&0!==yDiff&&(axisYDataInfo.minDiff=yDiff)}if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort)null!==dataPointY&&dataPointX;else if(!isFirstDPInViewPort&&(isFirstDPInViewPort=!0,i>0))i-=2;else{if(dataPointX>plotAreaXMax&&!isLastDPInViewPort)isLastDPInViewPort=!0;else if(dataPointX>plotAreaXMax&&isLastDPInViewPort)continue;dataSeries.dataPoints[i].label&&(plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label),dataPointX<axisXDataInfo.viewPortMin&&(axisXDataInfo.viewPortMin=dataPointX),dataPointX>axisXDataInfo.viewPortMax&&(axisXDataInfo.viewPortMax=dataPointX),i>0&&(dataSeries.dataPointEOs[i-1].cumulativeSum<axisYDataInfo.viewPortMin&&(axisYDataInfo.viewPortMin=dataSeries.dataPointEOs[i-1].cumulativeSum),dataSeries.dataPointEOs[i-1].cumulativeSum>axisYDataInfo.viewPortMax&&(axisYDataInfo.viewPortMax=dataSeries.dataPointEOs[i-1].cumulativeSum)),dataSeries.dataPointEOs[i].cumulativeSum<axisYDataInfo.viewPortMin&&(axisYDataInfo.viewPortMin=dataSeries.dataPointEOs[i].cumulativeSum),dataSeries.dataPointEOs[i].cumulativeSum>axisYDataInfo.viewPortMax&&(axisYDataInfo.viewPortMax=dataSeries.dataPointEOs[i].cumulativeSum)}}dataSeries.axisX.valueType=dataSeries.xValueType=isDateTime?"dateTime":"number"}}()},Chart.prototype.calculateAutoBreaks=function(){for(var niceRange,chart=this,isAutoBreaksPresent=!1,i=0;i<this._axes.length;i++)if(this._axes[i].scaleBreaks&&this._axes[i].scaleBreaks.autoCalculate&&this._axes[i].scaleBreaks.maxNumberOfAutoBreaks>=1){isAutoBreaksPresent=!0,this._axes[i].dataInfo._dataRanges=[];for(var j=0;j<100/Math.max(parseFloat(this._axes[i].scaleBreaks.collapsibleThreshold)||10,10);j++)this._axes[i].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(isAutoBreaksPresent){for(i=0;i<this.plotInfo.plotTypes.length;i++){var plotType=this.plotInfo.plotTypes[i];for(j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j];"line"===plotUnit.type||"stepLine"===plotUnit.type||"spline"===plotUnit.type||"column"===plotUnit.type||"area"===plotUnit.type||"stepArea"===plotUnit.type||"splineArea"===plotUnit.type||"bar"===plotUnit.type||"bubble"===plotUnit.type||"scatter"===plotUnit.type||"candlestick"===plotUnit.type||"ohlc"===plotUnit.type||"rangeColumn"===plotUnit.type||"rangeBar"===plotUnit.type||"rangeArea"===plotUnit.type||"rangeSplineArea"===plotUnit.type||"waterfall"===plotUnit.type||"error"===plotUnit.type||"boxAndWhisker"===plotUnit.type?calculateAutoBreaksNonStackedPlotUnit(plotUnit):plotUnit.type.indexOf("stacked")>=0&&calculateXAxisAutoBreaksStackedPlotUnit(plotUnit)}}for(i=0;i<this._axes.length;i++)if(this._axes[i].dataInfo._dataRanges){var end,start,diff,plotAreaYMin=this._axes[i].dataInfo.min,yDivisor=(this._axes[i].dataInfo.max+1-plotAreaYMin)*Math.max(parseFloat(this._axes[i].scaleBreaks.collapsibleThreshold)||10,10)/100,dataRanges=this._axes[i].dataInfo._dataRanges,possibleBreaks=[];if(this._axes[i].dataInfo.dataPointYPositiveSums){var dataPointYPositiveSums=this._axes[i].dataInfo.dataPointYPositiveSums,yRanges=dataRanges;for(j in dataPointYPositiveSums)if(dataPointYPositiveSums.hasOwnProperty(j)){if(isNaN(j))continue;if(isNullOrUndefined(ySum=dataPointYPositiveSums[j]))continue;ySum<yRanges[index=Math.floor((ySum-plotAreaYMin)/yDivisor)].min&&(yRanges[index].min=ySum),ySum>yRanges[index].max&&(yRanges[index].max=ySum)}delete this._axes[i].dataInfo.dataPointYPositiveSums}if(this._axes[i].dataInfo.dataPointYNegativeSums){var dataPointYNegativeSums=this._axes[i].dataInfo.dataPointYNegativeSums;yRanges=dataRanges;for(j in dataPointYNegativeSums)if(dataPointYNegativeSums.hasOwnProperty(j)){if(isNaN(j))continue;var ySum,index;if(isNullOrUndefined(ySum=-1*dataPointYNegativeSums[j]))continue;ySum<yRanges[index=Math.floor((ySum-plotAreaYMin)/yDivisor)].min&&(yRanges[index].min=ySum),ySum>yRanges[index].max&&(yRanges[index].max=ySum)}delete this._axes[i].dataInfo.dataPointYNegativeSums}for(j=0;j<dataRanges.length-1;j++)if(start=dataRanges[j].max,isFinite(start))for(;j<dataRanges.length-1;){if(end=dataRanges[j+1].min,isFinite(end)){(diff=end-start)>yDivisor&&possibleBreaks.push({diff,start,end});break}j++}if(this._axes[i].scaleBreaks.customBreaks)for(j=0;j<this._axes[i].scaleBreaks.customBreaks.length;j++)for(var k=0;k<possibleBreaks.length;k++)(this._axes[i].scaleBreaks.customBreaks[j].startValue<=possibleBreaks[k].start&&possibleBreaks[k].start<=this._axes[i].scaleBreaks.customBreaks[j].endValue||this._axes[i].scaleBreaks.customBreaks[j].startValue<=possibleBreaks[k].start&&possibleBreaks[k].start<=this._axes[i].scaleBreaks.customBreaks[j].endValue||possibleBreaks[k].start<=this._axes[i].scaleBreaks.customBreaks[j].startValue&&this._axes[i].scaleBreaks.customBreaks[j].startValue<=possibleBreaks[k].end||possibleBreaks[k].start<=this._axes[i].scaleBreaks.customBreaks[j].endValue&&this._axes[i].scaleBreaks.customBreaks[j].endValue<=possibleBreaks[k].end)&&(possibleBreaks.splice(k,1),k--);possibleBreaks.sort((function(possibleBreak1,possibleBreak2){return possibleBreak2.diff-possibleBreak1.diff}));for(j=0;j<Math.min(possibleBreaks.length,this._axes[i].scaleBreaks.maxNumberOfAutoBreaks);j++)niceRange=calculateAutoBreakWithPadding(possibleBreaks[j].start,possibleBreaks[j].end,this._axes[i].logarithmic?this._axes[i].dataInfo.max/this._axes[i].dataInfo.min:this._axes[i].dataInfo.max-this._axes[i].dataInfo.min,this._axes[i].logarithmic),this._axes[i].scaleBreaks.autoBreaks.push(new Break(this,"autoBreaks",niceRange,j,++this._eventManager.lastObjectId,this._axes[i].scaleBreaks)),this._axes[i].scaleBreaks._appliedBreaks.push(this._axes[i].scaleBreaks.autoBreaks[this._axes[i].scaleBreaks.autoBreaks.length-1]);this._axes[i].scaleBreaks._appliedBreaks.sort((function(break1,break2){return break1.startValue-break2.startValue}))}}function calculateAutoBreakWithPadding(startValue,endValue,dataRangeDiff,isLogarithmic){var padding;return isLogarithmic?((padding=Math.pow(Math.min(dataRangeDiff*startValue/endValue,endValue/startValue),.2))<=1&&(padding=Math.pow(startValue<1?1/startValue:Math.min(endValue/startValue,startValue),.25)),{startValue:startValue*padding,endValue:endValue/padding}):((padding=.2*Math.min(dataRangeDiff-endValue+startValue,endValue-startValue))<=0&&(padding=.25*Math.min(endValue-startValue,Math.abs(startValue))),{startValue:startValue+padding,endValue:endValue-padding})}function calculateAutoBreaksNonStackedPlotUnit(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1)){var axisXAutoBreakEnabled=plotUnit.axisX.scaleBreaks&&plotUnit.axisX.scaleBreaks.autoCalculate&&plotUnit.axisX.scaleBreaks.maxNumberOfAutoBreaks>=1,axisYAutoBreakEnabled=plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks.autoCalculate&&plotUnit.axisY.scaleBreaks.maxNumberOfAutoBreaks>=1;if(axisXAutoBreakEnabled||axisYAutoBreakEnabled)for(var dataPointX,dataPointY,index,axisYDataInfo=plotUnit.axisY.dataInfo,axisXDataInfo=plotUnit.axisX.dataInfo,plotAreaXMin=axisXDataInfo.min,plotAreaXMax=axisXDataInfo.max,plotAreaYMin=axisYDataInfo.min,plotAreaYMax=axisYDataInfo.max,xRanges=axisXDataInfo._dataRanges,yRanges=axisYDataInfo._dataRanges,i=0,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=chart.data[plotUnit.dataSeriesIndexes[j]];if(!(dataSeries.dataPoints.length<4))for(i=0;i<dataSeries.dataPoints.length;i++){if(axisXAutoBreakEnabled){var xDivisor=(plotAreaXMax+1-plotAreaXMin)*Math.max(parseFloat(plotUnit.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100;(dataPointX=dataSeries.dataPoints[i].x.getTime?dataSeries.dataPoints[i].x.getTime():dataSeries.dataPoints[i].x)<xRanges[index=Math.floor((dataPointX-plotAreaXMin)/xDivisor)].min&&(xRanges[index].min=dataPointX),dataPointX>xRanges[index].max&&(xRanges[index].max=dataPointX)}if(axisYAutoBreakEnabled){var yDivisor=(plotAreaYMax+1-plotAreaYMin)*Math.max(parseFloat(plotUnit.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((dataPointY="waterfall"===plotUnit.type?dataSeries.dataPointEOs[i].cumulativeSum:dataSeries.dataPoints[i].y)&&dataPointY.length)for(var k=0;k<dataPointY.length;k++)index=Math.floor((dataPointY[k]-plotAreaYMin)/yDivisor),dataPointY[k]<yRanges[index].min&&(yRanges[index].min=dataPointY[k]),dataPointY[k]>yRanges[index].max&&(yRanges[index].max=dataPointY[k]);else isNullOrUndefined(dataPointY)||(dataPointY<yRanges[index=Math.floor((dataPointY-plotAreaYMin)/yDivisor)].min&&(yRanges[index].min=dataPointY),dataPointY>yRanges[index].max&&(yRanges[index].max=dataPointY))}}}}}function calculateXAxisAutoBreaksStackedPlotUnit(plotUnit){if(plotUnit.dataSeriesIndexes&&!(plotUnit.dataSeriesIndexes.length<1)&&(plotUnit.axisX.scaleBreaks&&plotUnit.axisX.scaleBreaks.autoCalculate&&plotUnit.axisX.scaleBreaks.maxNumberOfAutoBreaks>=1))for(var dataPointX,index,axisXDataInfo=plotUnit.axisX.dataInfo,plotAreaXMin=axisXDataInfo.min,plotAreaXMax=axisXDataInfo.max,xRanges=axisXDataInfo._dataRanges,i=0,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=chart.data[plotUnit.dataSeriesIndexes[j]];if(!(dataSeries.dataPoints.length<4))for(i=0;i<dataSeries.dataPoints.length;i++){var xDivisor=(plotAreaXMax+1-plotAreaXMin)*Math.max(parseFloat(plotUnit.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100;(dataPointX=dataSeries.dataPoints[i].x.getTime?dataSeries.dataPoints[i].x.getTime():dataSeries.dataPoints[i].x)<xRanges[index=Math.floor((dataPointX-plotAreaXMin)/xDivisor)].min&&(xRanges[index].min=dataPointX),dataPointX>xRanges[index].max&&(xRanges[index].max=dataPointX)}}}},Chart.prototype.renderCrosshairs=function(axis){for(var i=0;i<this.axisX.length;i++)this.axisX[i]!=axis&&this.axisX[i].crosshair&&this.axisX[i].crosshair.enabled&&!this.axisX[i].crosshair._hidden&&this.axisX[i].showCrosshair(this.axisX[i].crosshair._updatedValue);for(i=0;i<this.axisX2.length;i++)this.axisX2[i]!=axis&&this.axisX2[i].crosshair&&this.axisX2[i].crosshair.enabled&&!this.axisX2[i].crosshair._hidden&&this.axisX2[i].showCrosshair(this.axisX2[i].crosshair._updatedValue);for(i=0;i<this.axisY.length;i++)this.axisY[i]!=axis&&this.axisY[i].crosshair&&this.axisY[i].crosshair.enabled&&!this.axisY[i].crosshair._hidden&&this.axisY[i].showCrosshair(this.axisY[i].crosshair._updatedValue);for(i=0;i<this.axisY2.length;i++)this.axisY2[i]!=axis&&this.axisY2[i].crosshair&&this.axisY2[i].crosshair.enabled&&!this.axisY2[i].crosshair._hidden&&this.axisY2[i].showCrosshair(this.axisY2[i].crosshair._updatedValue)},Chart.prototype.getDataPointAtXY=function(mouseX,mouseY,getClosest){getClosest=getClosest||!1;for(var results=[],i=this._dataInRenderedOrder.length-1;i>=0;i--){var result;(result=this._dataInRenderedOrder[i].getDataPointAtXY(mouseX,mouseY,getClosest))&&results.push(result)}for(var closestResult=null,onlyLineAreaTypes=!1,m=0;m<results.length;m++)if("line"===results[m].dataSeries.type||"stepLine"===results[m].dataSeries.type||"area"===results[m].dataSeries.type||"stepArea"===results[m].dataSeries.type){var markerSize=getProperty("markerSize",results[m].dataPoint,results[m].dataSeries)||8;if(results[m].distance<=markerSize/2){onlyLineAreaTypes=!0;break}}for(m=0;m<results.length;m++)onlyLineAreaTypes&&"line"!==results[m].dataSeries.type&&"stepLine"!==results[m].dataSeries.type&&"area"!==results[m].dataSeries.type&&"stepArea"!==results[m].dataSeries.type||(closestResult?results[m].distance<=closestResult.distance&&(closestResult=results[m]):closestResult=results[m]);return closestResult},Chart.prototype.getObjectAtXY=function(mouseX,mouseY,getClosest){getClosest=getClosest||!1;var id=null,dataPointInfo=this.getDataPointAtXY(mouseX,mouseY,getClosest);if(dataPointInfo)id=dataPointInfo.dataSeries.dataPointIds[dataPointInfo.dataPointIndex];else if(isCanvasSupported)id=getObjectId(mouseX,mouseY,this._eventManager.ghostCtx);else for(var i=0;i<this.legend.items.length;i++){var item=this.legend.items[i];mouseX>=item.x1&&mouseX<=item.x2&&mouseY>=item.y1&&mouseY<=item.y2&&(id=item.id)}return id},Chart.prototype.getAutoFontSize=getAutoFontSize,Chart.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},Chart.prototype.clearCanvas=clearCanvas,Chart.prototype.attachEvent=function(param){this._events.push(param)},Chart.prototype._touchEventHandler=function(ev){if(ev.changedTouches&&this.interactivityEnabled){var mouseEvents=[],touches=ev.changedTouches,first=touches?touches[0]:ev,touchCurrentCoordinates=null;switch(ev.type){case"touchstart":case"MSPointerDown":mouseEvents=["mousemove","mousedown"],this._lastTouchData=getMouseCoordinates(first),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":mouseEvents=["mousemove"];break;case"touchend":case"MSPointerUp":var dt=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0;mouseEvents="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType||dt<300?["mouseup","click"]:["mouseup"];break;default:return}if(!(touches&&touches.length>1)){(touchCurrentCoordinates=getMouseCoordinates(first)).time=new Date;try{var dy=touchCurrentCoordinates.y-this._lastTouchData.y;touchCurrentCoordinates.x,this._lastTouchData.x,dt=touchCurrentCoordinates.time-this._lastTouchData.time;(Math.abs(dy)>1&&this._lastTouchData.scroll||Math.abs(dy)>5&&dt<250)&&(this._lastTouchData.scroll=!0)}catch(e){}if(this._lastTouchEventType=ev.type,this._lastTouchData.scroll&&this.zoomEnabled)return this.isDrag&&this.resetOverlayedCanvas(),void(this.isDrag=!1);for(var i=0;i<mouseEvents.length;i++){var type=mouseEvents[i],simulatedEvent=document.createEvent("MouseEvent");simulatedEvent.initMouseEvent(type,!0,!0,window,1,first.screenX,first.screenY,first.clientX,first.clientY,!1,!1,!1,!1,0,null),first.target.dispatchEvent(simulatedEvent),(!isNullOrUndefined(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&dt>250||"click"===type)&&(ev.preventManipulation&&ev.preventManipulation(),ev.preventDefault&&ev.cancelable&&ev.preventDefault())}}}},Chart.prototype._dispatchRangeEvent=function(eventName,triggerSource){var eventParameter={};eventParameter.chart=this,eventParameter.type=eventName,eventParameter.trigger=triggerSource;var axes=[];this.axisX&&this.axisX.length>0&&axes.push("axisX"),this.axisX2&&this.axisX2.length>0&&axes.push("axisX2"),this.axisY&&this.axisY.length>0&&axes.push("axisY"),this.axisY2&&this.axisY2.length>0&&axes.push("axisY2");for(var i=0;i<axes.length;i++)if(isNullOrUndefined(eventParameter[axes[i]])&&(eventParameter[axes[i]]=[]),"axisY"===axes[i])for(var k=0;k<this.axisY.length;k++)eventParameter[axes[i]].push({viewportMinimum:this[axes[i]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[axes[i]][k].sessionVariables.newViewportMaximum});else if("axisY2"===axes[i])for(k=0;k<this.axisY2.length;k++)eventParameter[axes[i]].push({viewportMinimum:this[axes[i]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[axes[i]][k].sessionVariables.newViewportMaximum});else if("axisX"===axes[i])for(k=0;k<this.axisX.length;k++)eventParameter[axes[i]].push({viewportMinimum:this[axes[i]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[axes[i]][k].sessionVariables.newViewportMaximum});else if("axisX2"===axes[i])for(k=0;k<this.axisX2.length;k++)eventParameter[axes[i]].push({viewportMinimum:this[axes[i]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[axes[i]][k].sessionVariables.newViewportMaximum});this.dispatchEvent(eventName,eventParameter,this)},Chart.prototype._mouseEventHandler=function(ev){void 0===ev.target&&ev.srcElement&&(ev.target=ev.srcElement);var eventParam,rightclick,bounds,xy=getMouseCoordinates(ev),type=ev.type;if(!ev)window.event;if(ev.which?rightclick=3==ev.which:ev.button&&(rightclick=2==ev.button),function releaseCapturedEvent(){Chart.capturedEventParam&&(eventParam=Chart.capturedEventParam,bounds=eventParam.bounds,"mouseup"===type&&(Chart.capturedEventParam=null,eventParam.chart.overlaidCanvas.releaseCapture?eventParam.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",eventParam.chart._mouseEventHandler,!1)),eventParam.hasOwnProperty(type)&&("mouseup"!==type||eventParam.chart.overlaidCanvas.releaseCapture?ev.target!==eventParam.chart.overlaidCanvas&&isCanvasSupported||eventParam[type].call(eventParam.context,xy.x,xy.y):ev.target!==eventParam.chart.overlaidCanvas&&(eventParam.chart.isDrag=!1)))}(),this.interactivityEnabled)if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else if(ev.preventManipulation&&ev.preventManipulation(),ev.preventDefault&&ev.preventDefault(),!rightclick){if(!Chart.capturedEventParam&&this._events){for(var i=0;i<this._events.length;i++)if(this._events[i].hasOwnProperty(type)){if(eventParam=this._events[i],bounds=eventParam.bounds,xy.x>=bounds.x1&&xy.x<=bounds.x2&&xy.y>=bounds.y1&&xy.y<=bounds.y2){eventParam[type].call(eventParam.context,xy.x,xy.y),"mousedown"===type&&!0===eventParam.capture?(Chart.capturedEventParam=eventParam,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===type&&(eventParam.chart.overlaidCanvas.releaseCapture?eventParam.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}eventParam=null}eventParam&&eventParam.cursor?ev.target.style.cursor=eventParam.cursor:ev.target.style.cursor=this._defaultCursor}var plotArea=this.plotArea;if(xy.x<plotArea.x1||xy.x>plotArea.x2||xy.y<plotArea.y1||xy.y>plotArea.y2)if(this.toolTip&&this.toolTip.enabled){this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip);for(i=0;i<this.axisX.length;i++)this.axisX[i].crosshair&&this.axisX[i].crosshair.enabled&&this.axisX[i].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[i].options},this.axisX[i].crosshair);for(i=0;i<this.axisX2.length;i++)this.axisX2[i].crosshair&&this.axisX2[i].crosshair.enabled&&this.axisX2[i].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[i].options},this.axisX2[i].crosshair);for(i=0;i<this.axisY.length;i++)this.axisY[i].crosshair&&this.axisY[i].crosshair.enabled&&this.axisY[i].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[i].options},this.axisY[i].crosshair);for(i=0;i<this.axisY2.length;i++)this.axisY2[i].crosshair&&this.axisY2[i].crosshair.enabled&&this.axisY2[i].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[i].options},this.axisY2[i].crosshair)}else this.resetOverlayedCanvas();this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(ev)}},Chart.prototype._plotAreaMouseDown=function(x,y){this.isDrag=!0,this.dragStartPoint={x,y}},Chart.prototype._plotAreaMouseUp=function(x,y){this.plotArea;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var dragDeltaPY=y-this.dragStartPoint.y,dragDeltaPX=x-this.dragStartPoint.x,zoomPX=this.zoomType.indexOf("x")>=0,zoomPY=this.zoomType.indexOf("y")>=0,reRender=!1;if(this.resetOverlayedCanvas(),"xySwapped"===this.plotInfo.axisPlacement){var temp=zoomPY;zoomPY=zoomPX,zoomPX=temp}if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(var overflow=0,i=0;i<this._axes.length;i++){var axis=this._axes[i];axis.logarithmic?axis.viewportMinimum<axis.minimum?(overflow=axis.minimum/axis.viewportMinimum,axis.sessionVariables.newViewportMinimum=axis.viewportMinimum*overflow,axis.sessionVariables.newViewportMaximum=axis.viewportMaximum*overflow,reRender=!0):axis.viewportMaximum>axis.maximum&&(overflow=axis.viewportMaximum/axis.maximum,axis.sessionVariables.newViewportMinimum=axis.viewportMinimum/overflow,axis.sessionVariables.newViewportMaximum=axis.viewportMaximum/overflow,reRender=!0):axis.viewportMinimum<axis.minimum?(overflow=axis.minimum-axis.viewportMinimum,axis.sessionVariables.newViewportMinimum=axis.viewportMinimum+overflow,axis.sessionVariables.newViewportMaximum=axis.viewportMaximum+overflow,reRender=!0):axis.viewportMaximum>axis.maximum&&(overflow=axis.viewportMaximum-axis.maximum,axis.sessionVariables.newViewportMinimum=axis.viewportMinimum-overflow,axis.sessionVariables.newViewportMaximum=axis.viewportMaximum-overflow,reRender=!0)}else if((!zoomPX||Math.abs(dragDeltaPX)>2)&&(!zoomPY||Math.abs(dragDeltaPY)>2)&&this.zoomEnabled){if(!this.dragStartPoint)return;var selectedRegion={x1:zoomPX?this.dragStartPoint.x:this.plotArea.x1,y1:zoomPY?this.dragStartPoint.y:this.plotArea.y1,x2:zoomPX?x:this.plotArea.x2,y2:zoomPY?y:this.plotArea.y2};Math.abs(selectedRegion.x1-selectedRegion.x2)>2&&Math.abs(selectedRegion.y1-selectedRegion.y2)>2&&this._zoomPanToSelectedRegion(selectedRegion.x1,selectedRegion.y1,selectedRegion.x2,selectedRegion.y2)&&(reRender=!0)}reRender&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.stockChart&&this.stockChart.navigator&&this.stockChart.navigator.enabled&&(this.stockChart._rangeEventParameter||(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:this.stockChart.sessionVariables._axisXMin,maximum:this.stockChart.sessionVariables._axisXMax}),this.stockChart._rangeEventParameter.type="rangeChanging",this.stockChart.dispatchEvent("rangeChanging",this.stockChart._rangeEventParameter,this.stockChart)),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),this.stockChart&&this.stockChart.navigator&&this.stockChart.navigator.enabled&&(this.stockChart._rangeEventParameter.type="rangeChanged",this.stockChart.dispatchEvent("rangeChanged",this.stockChart._rangeEventParameter,this.stockChart)),reRender&&this.zoomEnabled&&"none"===this._zoomButton.style.display&&(show(this._zoomButton,this._resetButton),setButtonState(this,this._zoomButton,"pan"),setButtonState(this,this._resetButton,"reset")))}}if(this.isDrag=!1,"none"!==this.plotInfo.axisPlacement){if(this.resetOverlayedCanvas(),this.axisX&&this.axisX.length>0)for(var k=0;k<this.axisX.length;k++)this.axisX[k].crosshair&&this.axisX[k].crosshair.enabled&&this.axisX[k].renderCrosshair(x,y);if(this.axisX2&&this.axisX2.length>0)for(k=0;k<this.axisX2.length;k++)this.axisX2[k].crosshair&&this.axisX2[k].crosshair.enabled&&this.axisX2[k].renderCrosshair(x,y);if(this.axisY&&this.axisY.length>0)for(k=0;k<this.axisY.length;k++)this.axisY[k].crosshair&&this.axisY[k].crosshair.enabled&&this.axisY[k].renderCrosshair(x,y);if(this.axisY2&&this.axisY2.length>0)for(k=0;k<this.axisY2.length;k++)this.axisY2[k].crosshair&&this.axisY2[k].crosshair.enabled&&this.axisY2[k].renderCrosshair(x,y)}},Chart.prototype._plotAreaMouseMove=function(x,y){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var dragDeltaPX,dragDeltaPY,alpha=null,selectedRegion=null,zoomPX=this.zoomType.indexOf("x")>=0,zoomPY=this.zoomType.indexOf("y")>=0,_this=this;if("xySwapped"===this.plotInfo.axisPlacement){var temp=zoomPY;zoomPY=zoomPX,zoomPX=temp}if(dragDeltaPX=this.dragStartPoint.x-x,dragDeltaPY=this.dragStartPoint.y-y,Math.abs(dragDeltaPX)>2&&Math.abs(dragDeltaPX)<8&&(this.panEnabled||this.zoomEnabled)?(this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip)):this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(x,y),(!zoomPX||Math.abs(dragDeltaPX)>2||!zoomPY||Math.abs(dragDeltaPY)>2)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled)selectedRegion={x1:zoomPX?this.plotArea.x1+dragDeltaPX:this.plotArea.x1,y1:zoomPY?this.plotArea.y1+dragDeltaPY:this.plotArea.y1,x2:zoomPX?this.plotArea.x2+dragDeltaPX:this.plotArea.x2,y2:zoomPY?this.plotArea.y2+dragDeltaPY:this.plotArea.y2},clearTimeout(_this._panTimerId),_this._panTimerId=setTimeout((x1=selectedRegion.x1,y1=selectedRegion.y1,x2=selectedRegion.x2,y2=selectedRegion.y2,function(){_this._zoomPanToSelectedRegion(x1,y1,x2,y2,!0)&&(_this._dispatchRangeEvent("rangeChanging","pan"),_this.stockChart&&_this.stockChart.navigator&&_this.stockChart.navigator.enabled&&(_this.stockChart._rangeEventParameter.type="rangeChanging",_this.stockChart.dispatchEvent("rangeChanging",_this.stockChart._rangeEventParameter,_this.stockChart)),_this.render(),_this._dispatchRangeEvent("rangeChanged","pan"),_this.stockChart&&_this.stockChart.navigator&&_this.stockChart.navigator.enabled&&(_this.stockChart._rangeEventParameter.type="rangeChanged",_this.stockChart.dispatchEvent("rangeChanged",_this.stockChart._rangeEventParameter,_this.stockChart)),_this.dragStartPoint.x=x,_this.dragStartPoint.y=y)}),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),alpha=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var rect={x1:zoomPX?this.dragStartPoint.x:this.plotArea.x1,y1:zoomPY?this.dragStartPoint.y:this.plotArea.y1,x2:zoomPX?x-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,y2:zoomPY?y-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1};this.validateRegion(rect.x1,rect.y1,zoomPX?x:this.plotArea.x2-this.plotArea.x1,zoomPY?y:this.plotArea.y2-this.plotArea.y1,"xy"!==this.zoomType).isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(rect.x1,rect.y1,rect.x2,rect.y2),this.overlaidCanvasCtx.globalAlpha=alpha}}else if(this.toolTip.mouseMoveHandler(x,y),"none"!==this.plotInfo.axisPlacement){if(this.axisX&&this.axisX.length>0)for(var k=0;k<this.axisX.length;k++)this.axisX[k].crosshair&&this.axisX[k].crosshair.enabled&&this.axisX[k].renderCrosshair(x,y);if(this.axisX2&&this.axisX2.length>0)for(k=0;k<this.axisX2.length;k++)this.axisX2[k].crosshair&&this.axisX2[k].crosshair.enabled&&this.axisX2[k].renderCrosshair(x,y);if(this.axisY&&this.axisY.length>0)for(k=0;k<this.axisY.length;k++)this.axisY[k].crosshair&&this.axisY[k].crosshair.enabled&&this.axisY[k].renderCrosshair(x,y);if(this.axisY2&&this.axisY2.length>0)for(k=0;k<this.axisY2.length;k++)this.axisY2[k].crosshair&&this.axisY2[k].crosshair.enabled&&this.axisY2[k].renderCrosshair(x,y)}var x1,y1,x2,y2},Chart.prototype._zoomPanToSelectedRegion=function(px1,py1,px2,py2,keepAxisIndependent){var validateRegion=this.validateRegion(px1,py1,px2,py2,keepAxisIndependent),axesWithValidRange=validateRegion.axesWithValidRange,axesRanges=validateRegion.axesRanges;if(validateRegion.isValid)for(var i=0;i<axesWithValidRange.length;i++){var axis=axesWithValidRange[i],param=axesRanges[i];axis.setViewPortRange(param.val1,param.val2),this.syncCharts&&"y"!=this.zoomType&&this.syncCharts(param.val1,param.val2),this.stockChart&&(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:param.val1,maximum:param.val2})}return validateRegion.isValid},Chart.prototype.validateRegion=function(px1,py1,px2,py2,keepAxisIndependent){keepAxisIndependent=keepAxisIndependent||!1;for(var isWithinBreaks,zoomPX=this.zoomType.indexOf("x")>=0,zoomPY=this.zoomType.indexOf("y")>=0,isValid=!1,axesWithValidRange=[],axes=[],axesRanges=[],k=0;k<this._axes.length;k++)("axisX"===this._axes[k].type&&zoomPX||"axisY"===this._axes[k].type&&zoomPY)&&axes.push(this._axes[k]);for(var i=0;i<axes.length;i++){var axis=axes[i];isWithinBreaks=!1;var val1=axis.convertPixelToValue({x:px1,y:py1}),val2=axis.convertPixelToValue({x:px2,y:py2});if(val1>val2){var temp=val2;val2=val1,val1=temp}if(axis.scaleBreaks)for(var j=0;!isWithinBreaks&&j<axis.scaleBreaks._appliedBreaks.length;j++)isWithinBreaks=axis.scaleBreaks._appliedBreaks[j].startValue<=val1&&axis.scaleBreaks._appliedBreaks[j].endValue>=val2;if(isFinite(axis.dataInfo.minDiff)){var valueDiff=axis.getApparentDifference(val1,val2,null,!0);if(isWithinBreaks||!(this.panEnabled&&axis.scaleBreaks&&axis.scaleBreaks._appliedBreaks.length)&&(axis.logarithmic&&valueDiff<Math.pow(axis.dataInfo.minDiff,3)||!axis.logarithmic&&valueDiff<3*Math.abs(axis.dataInfo.minDiff))||val1<axis.minimum||val2>axis.maximum){if(!keepAxisIndependent){isValid=!1;break}}else axesWithValidRange.push(axis),axesRanges.push({val1,val2}),isValid=!0}}return{isValid,axesWithValidRange,axesRanges}},Chart.prototype.preparePlotArea=function(){var plotArea=this.plotArea;if(!isCanvasSupported&&(plotArea.x1>0||plotArea.y1>0)&&plotArea.ctx.translate(plotArea.x1,plotArea.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var lineCoordinates=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&this.axisY.length>0&&this.axisY[0]){var yAxis=this.axisY[0];plotArea.x1=lineCoordinates.x1<lineCoordinates.x2?lineCoordinates.x1:yAxis.lineCoordinates.x1,plotArea.y1=lineCoordinates.y1<yAxis.lineCoordinates.y1?lineCoordinates.y1:yAxis.lineCoordinates.y1,plotArea.x2=lineCoordinates.x2>yAxis.lineCoordinates.x2?lineCoordinates.x2:yAxis.lineCoordinates.x2,plotArea.y2=lineCoordinates.y2>lineCoordinates.y1?lineCoordinates.y2:yAxis.lineCoordinates.y2,plotArea.width=plotArea.x2-plotArea.x1,plotArea.height=plotArea.y2-plotArea.y1}if(this.axisY2&&this.axisY2.length>0&&this.axisY2[0]){yAxis=this.axisY2[0];plotArea.x1=lineCoordinates.x1<lineCoordinates.x2?lineCoordinates.x1:yAxis.lineCoordinates.x1,plotArea.y1=lineCoordinates.y1<yAxis.lineCoordinates.y1?lineCoordinates.y1:yAxis.lineCoordinates.y1,plotArea.x2=lineCoordinates.x2>yAxis.lineCoordinates.x2?lineCoordinates.x2:yAxis.lineCoordinates.x2,plotArea.y2=lineCoordinates.y2>lineCoordinates.y1?lineCoordinates.y2:yAxis.lineCoordinates.y2,plotArea.width=plotArea.x2-plotArea.x1,plotArea.height=plotArea.y2-plotArea.y1}}else{var freeSpace=this.layoutManager.getFreeSpace();plotArea.x1=freeSpace.x1,plotArea.x2=freeSpace.x2,plotArea.y1=freeSpace.y1,plotArea.y2=freeSpace.y2,plotArea.width=freeSpace.width,plotArea.height=freeSpace.height}isCanvasSupported||(plotArea.canvas.width=plotArea.width,plotArea.canvas.height=plotArea.height,plotArea.canvas.style.left=plotArea.x1+"px",plotArea.canvas.style.top=plotArea.y1+"px",(plotArea.x1>0||plotArea.y1>0)&&plotArea.ctx.translate(-plotArea.x1,-plotArea.y1)),plotArea.layoutManager=new LayoutManager(plotArea.x1,plotArea.y1,plotArea.x2,plotArea.y2,2)},Chart.prototype.renderIndexLabels=function(targetCtx){for(var ctx=targetCtx||this.plotArea.ctx,plotArea=this.plotArea,mid=0,yMinLimit=0,yMaxLimit=0,xMinLimit=0,xMaxLimit=0,marginX=0,marginY=0,offset=0,visibleWidth=0,visibleHeight=0,i=0;i<this._indexLabels.length;i++){var x,y,chartTypeLower=(indexLabel=this._indexLabels[i]).chartType.toLowerCase(),fontColor=getProperty("indexLabelFontColor",indexLabel.dataPoint,indexLabel.dataSeries),fontSize=getProperty("indexLabelFontSize",indexLabel.dataPoint,indexLabel.dataSeries),fontFamily=getProperty("indexLabelFontFamily",indexLabel.dataPoint,indexLabel.dataSeries),fontStyle=getProperty("indexLabelFontStyle",indexLabel.dataPoint,indexLabel.dataSeries),fontWeight=getProperty("indexLabelFontWeight",indexLabel.dataPoint,indexLabel.dataSeries),backgroundColor=getProperty("indexLabelBackgroundColor",indexLabel.dataPoint,indexLabel.dataSeries),maxWidth=getProperty("indexLabelMaxWidth",indexLabel.dataPoint,indexLabel.dataSeries),indexLabelWrap=getProperty("indexLabelWrap",indexLabel.dataPoint,indexLabel.dataSeries),indexLabelLineDashType=getProperty("indexLabelLineDashType",indexLabel.dataPoint,indexLabel.dataSeries),indexLabelLineColor=getProperty("indexLabelLineColor",indexLabel.dataPoint,indexLabel.dataSeries),indexLabelLineThickness=isNullOrUndefined(indexLabel.dataPoint.indexLabelLineThickness)?isNullOrUndefined(indexLabel.dataSeries.options.indexLabelLineThickness)?0:indexLabel.dataSeries.options.indexLabelLineThickness:indexLabel.dataPoint.indexLabelLineThickness;offset=indexLabelLineThickness>0?Math.min(10,("normal"===this.plotInfo.axisPlacement?this.plotArea.height:this.plotArea.width)|0):0;var percentAndTotal={percent:null,total:null},formatterParameter=null;(indexLabel.dataSeries.type.indexOf("stacked")>=0||"pie"===indexLabel.dataSeries.type||"doughnut"===indexLabel.dataSeries.type)&&(percentAndTotal=this.getPercentAndTotal(indexLabel.dataSeries,indexLabel.dataPoint)),(indexLabel.dataSeries.indexLabelFormatter||indexLabel.dataPoint.indexLabelFormatter)&&(formatterParameter={chart:this,dataSeries:indexLabel.dataSeries,dataPoint:indexLabel.dataPoint,index:indexLabel.indexKeyword,total:percentAndTotal.total,percent:percentAndTotal.percent});var indexLabelText=indexLabel.dataPoint.indexLabelFormatter?indexLabel.dataPoint.indexLabelFormatter(formatterParameter):indexLabel.dataPoint.indexLabel?this.replaceKeywordsWithValue(indexLabel.dataPoint.indexLabel,indexLabel.dataPoint,indexLabel.dataSeries,null,indexLabel.indexKeyword):indexLabel.dataSeries.indexLabelFormatter?indexLabel.dataSeries.indexLabelFormatter(formatterParameter):indexLabel.dataSeries.indexLabel?this.replaceKeywordsWithValue(indexLabel.dataSeries.indexLabel,indexLabel.dataPoint,indexLabel.dataSeries,null,indexLabel.indexKeyword):null;if(null!==indexLabelText&&""!==indexLabelText){var placement=getProperty("indexLabelPlacement",indexLabel.dataPoint,indexLabel.dataSeries),orientation=getProperty("indexLabelOrientation",indexLabel.dataPoint,indexLabel.dataSeries),direction=indexLabel.direction,axisX=indexLabel.dataSeries.axisX,axisY=indexLabel.dataSeries.axisY,isInside=!1,textBlock=new TextBlock(ctx,{x:0,y:0,maxWidth:maxWidth||.5*this.width,maxHeight:indexLabelWrap?5*fontSize:1.5*fontSize,angle:"horizontal"===orientation?0:-90,text:indexLabelText,padding:0,backgroundColor,horizontalAlign:"left",fontSize,fontFamily,fontWeight,fontColor,fontStyle,textBaseline:"middle"});textBlock.measureText();if(indexLabel.dataSeries.indexLabelMaxWidth=textBlock.maxWidth,"stackedarea100"===chartTypeLower){if(indexLabel.point.x<plotArea.x1||indexLabel.point.x>plotArea.x2||indexLabel.point.y<plotArea.y1-1||indexLabel.point.y>plotArea.y2+1)continue}else if("rangearea"===chartTypeLower||"rangesplinearea"===chartTypeLower){if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum||Math.max.apply(null,indexLabel.dataPoint.y)<axisY.viewportMinimum||Math.min.apply(null,indexLabel.dataPoint.y)>axisY.viewportMaximum)continue}else if(chartTypeLower.indexOf("line")>=0||chartTypeLower.indexOf("area")>=0||chartTypeLower.indexOf("bubble")>=0||chartTypeLower.indexOf("scatter")>=0){if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum||indexLabel.dataPoint.y<axisY.viewportMinimum||indexLabel.dataPoint.y>axisY.viewportMaximum)continue}else if(chartTypeLower.indexOf("column")>=0||"waterfall"===chartTypeLower||"error"===chartTypeLower&&!indexLabel.axisSwapped){if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum||indexLabel.bounds.y1>plotArea.y2||indexLabel.bounds.y2<plotArea.y1)continue}else if(chartTypeLower.indexOf("bar")>=0||"error"===chartTypeLower){if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum||indexLabel.bounds.x1>plotArea.x2||indexLabel.bounds.x2<plotArea.x1)continue}else if("candlestick"===chartTypeLower||"ohlc"===chartTypeLower){if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum||Math.max.apply(null,indexLabel.dataPoint.y)<axisY.viewportMinimum||Math.min.apply(null,indexLabel.dataPoint.y)>axisY.viewportMaximum)continue}else if(indexLabel.dataPoint.x<axisX.viewportMinimum||indexLabel.dataPoint.x>axisX.viewportMaximum)continue;if(marginY=2,marginX=2,"horizontal"===orientation?(visibleWidth=textBlock.width,visibleHeight=textBlock.height):(visibleHeight=textBlock.width,visibleWidth=textBlock.height),"normal"===this.plotInfo.axisPlacement)chartTypeLower.indexOf("line")>=0||chartTypeLower.indexOf("area")>=0?(placement="auto",marginY=4):chartTypeLower.indexOf("stacked")>=0?"auto"===placement&&(placement="inside"):"bubble"!==chartTypeLower&&"scatter"!==chartTypeLower||(placement="inside"),x=indexLabel.point.x-visibleWidth/2,"inside"!==placement?(yMinLimit=plotArea.y1,yMaxLimit=plotArea.y2,direction>0?(y=indexLabel.point.y-visibleHeight/2-marginY-offset)<yMinLimit&&(isInside=(y="auto"===placement?Math.max(indexLabel.point.y,yMinLimit)+marginY+offset:yMinLimit+marginY+offset)+visibleHeight>indexLabel.point.y):(y=indexLabel.point.y+visibleHeight/2+marginY+offset)>yMaxLimit-visibleHeight-marginY-offset&&(isInside=(y="auto"===placement?Math.min(indexLabel.point.y,yMaxLimit)-visibleHeight-marginY-offset:yMaxLimit-visibleHeight-marginY-offset)<indexLabel.point.y)):(yMinLimit=Math.max(indexLabel.bounds.y1,plotArea.y1),yMaxLimit=Math.min(indexLabel.bounds.y2,plotArea.y2),mid=chartTypeLower.indexOf("range")>=0||"error"===chartTypeLower?direction>0?Math.max(indexLabel.bounds.y1,plotArea.y1)+visibleHeight/2+marginY:Math.min(indexLabel.bounds.y2,plotArea.y2)-visibleHeight/2-marginY:(Math.max(indexLabel.bounds.y1,plotArea.y1)+Math.min(indexLabel.bounds.y2,plotArea.y2))/2,direction>0?(y=Math.max(indexLabel.point.y,mid))<yMinLimit&&("bubble"===chartTypeLower||"scatter"===chartTypeLower)&&(y=Math.max(indexLabel.point.y-visibleHeight-marginY,plotArea.y1+marginY)):(y=Math.min(indexLabel.point.y,mid))>yMaxLimit-visibleHeight-marginY&&("bubble"===chartTypeLower||"scatter"===chartTypeLower)&&(y=Math.min(indexLabel.point.y+marginY,plotArea.y2-visibleHeight-marginY)),y=Math.min(y,yMaxLimit));else if(chartTypeLower.indexOf("line")>=0||chartTypeLower.indexOf("area")>=0||chartTypeLower.indexOf("scatter")>=0?(placement="auto",marginX=4):chartTypeLower.indexOf("stacked")>=0?"auto"===placement&&(placement="inside"):"bubble"===chartTypeLower&&(placement="inside"),y=indexLabel.point.y,"inside"!==placement)xMinLimit=plotArea.x1,xMaxLimit=plotArea.x2,direction<0?(x=indexLabel.point.x-visibleWidth-marginX-offset)<xMinLimit&&(isInside=(x="auto"===placement?Math.max(indexLabel.point.x,xMinLimit)+marginX+offset:xMinLimit+marginX+offset)+visibleWidth>indexLabel.point.x):(x=indexLabel.point.x+marginX+offset)>xMaxLimit-visibleWidth-marginX-offset&&(isInside=(x="auto"===placement?Math.min(indexLabel.point.x,xMaxLimit)-visibleWidth-marginX-offset:xMaxLimit-visibleWidth-marginX-offset)<indexLabel.point.x);else{if(xMinLimit=Math.max(indexLabel.bounds.x1,plotArea.x1),xMaxLimit=Math.min(indexLabel.bounds.x2,plotArea.x2),chartTypeLower.indexOf("range")>=0||"error"===chartTypeLower)mid=direction<0?Math.max(indexLabel.bounds.x1,plotArea.x1)+visibleWidth/2+marginX:Math.min(indexLabel.bounds.x2,plotArea.x2)-visibleWidth/2-marginX;else mid=(Math.max(indexLabel.bounds.x1,plotArea.x1)+Math.min(indexLabel.bounds.x2,plotArea.x2))/2;x=direction<0?Math.max(indexLabel.point.x,mid)-visibleWidth/2:Math.min(indexLabel.point.x,mid)-visibleWidth/2,x=Math.max(x,xMinLimit)}"vertical"===orientation&&(y+=visibleHeight),textBlock.x=x,textBlock.y=y,textBlock.render(!0),indexLabelLineThickness&&"inside"!==placement&&(chartTypeLower.indexOf("bar")<0&&("error"!==chartTypeLower||!indexLabel.axisSwapped)&&indexLabel.point.x>plotArea.x1&&indexLabel.point.x<plotArea.x2||!isInside)&&(chartTypeLower.indexOf("column")<0&&("error"!==chartTypeLower||indexLabel.axisSwapped)&&indexLabel.point.y>plotArea.y1&&indexLabel.point.y<plotArea.y2||!isInside)&&(ctx.lineWidth=indexLabelLineThickness,ctx.strokeStyle=indexLabelLineColor||"gray",ctx.setLineDash&&ctx.setLineDash(getLineDashArray(indexLabelLineDashType,indexLabelLineThickness)),ctx.beginPath(),ctx.moveTo(indexLabel.point.x,indexLabel.point.y),chartTypeLower.indexOf("bar")>=0||"error"===chartTypeLower&&indexLabel.axisSwapped?ctx.lineTo(x+(indexLabel.direction>0?0:visibleWidth),y+("horizontal"===orientation?visibleHeight:-visibleHeight)/2):chartTypeLower.indexOf("column")>=0||"error"===chartTypeLower&&!indexLabel.axisSwapped?ctx.lineTo(x+visibleWidth/2,y+((indexLabel.direction>0?visibleHeight:-visibleHeight)+("horizontal"===orientation?visibleHeight:-visibleHeight))/2):ctx.lineTo(x+visibleWidth/2,y+((y<indexLabel.point.y?visibleHeight:-visibleHeight)+("horizontal"===orientation?visibleHeight:-visibleHeight))/2),ctx.stroke())}}var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0,startTimePercent:.7};for(i=0;i<this._indexLabels.length;i++){var indexLabel;backgroundColor=getProperty("indexLabelBackgroundColor",(indexLabel=this._indexLabels[i]).dataPoint,indexLabel.dataSeries);indexLabel.dataSeries.indexLabelBackgroundColor=isNullOrUndefined(backgroundColor)?isCanvasSupported?"transparent":null:backgroundColor}return animationInfo},Chart.prototype.renderLine=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip();for(var previousNotNullDataPoint,markers=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints,currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor,ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet,color=dataSeries.lineColor=dataSeries.options.lineColor?dataSeries.options.lineColor:colorSet[0],currentStrokeStyle=color;ctx.strokeStyle=color;var x,y,dataPointX,isFirstDataPointInPlotArea=!0,i=0;if(ctx.beginPath(),dataPoints.length>0){var prevDataNull=!1;for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y)):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y))),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%500==0&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.stroke(),ghostCtx.beginPath(),ghostCtx.moveTo(x,y)))),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||color)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y),currentStrokeStyle=dataPoints[i].lineColor||color,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType)))),dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else i>0&&!(dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea)&&(ctx.stroke(),isCanvasSupported&&ghostCtx.stroke()),prevDataNull=!0;ctx.stroke(),isCanvasSupported&&ghostCtx.stroke()}}return RenderHelper.drawMarkers(markers),isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.beginPath()),ctx.restore(),ctx.beginPath(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}},Chart.prototype.renderStepLine=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip();for(var previousNotNullDataPoint,markers=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints,currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor,ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet,color=dataSeries.lineColor=dataSeries.options.lineColor?dataSeries.options.lineColor:colorSet[0],currentStrokeStyle=color;ctx.strokeStyle=color;var x,y,dataPointX,isFirstDataPointInPlotArea=!0,i=0;if(ctx.beginPath(),dataPoints.length>0){var prevDataNull=!1;for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoints[i].y){var prevY=y;x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,prevY),ctx.lineTo(x,y),isCanvasSupported&&(ghostCtx.lineTo(x,prevY),ghostCtx.lineTo(x,y))):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y))),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,prevY),isCanvasSupported&&ghostCtx.lineTo(x,prevY),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%500==0&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.stroke(),ghostCtx.beginPath(),ghostCtx.moveTo(x,y)))),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||color)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y),currentStrokeStyle=dataPoints[i].lineColor||color,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType)))),dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else i>0&&!(dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea)&&(ctx.stroke(),isCanvasSupported&&ghostCtx.stroke()),prevDataNull=!0;ctx.stroke(),isCanvasSupported&&ghostCtx.stroke()}}return RenderHelper.drawMarkers(markers),isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.beginPath()),ctx.restore(),ctx.beginPath(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}},Chart.prototype.renderSpline=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip();for(var markers=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints,currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor,ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet,color=dataSeries.lineColor=dataSeries.options.lineColor?dataSeries.options.lineColor:colorSet[0],currentStrokeStyle=color;ctx.strokeStyle=color;var x,y,dataPointX,i=0,pixels=[];if(ctx.beginPath(),dataPoints.length>0){var prevDataNull=!1;for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},pixels[pixels.length]={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||color)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(currentStrokeStyle=dataPoints[i].lineColor||color,pixels[pixels.length-1].newStrokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,pixels[pixels.length-1].newLineDashArray=getLineDashArray(currentLineDashType,dataSeries.lineThickness)):(currentLineDashType=dataSeries.lineDashType,pixels[pixels.length-1].newLineDashArray=lineDashType))),dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color}),!1,prevDataNull=!1}else i>0&&!prevDataNull&&(dataSeries.connectNullData?ctx.setLineDash&&pixels.length>0&&(dataSeries.options.nullDataLineDashType||!dataPoints[i-1].lineDashType)&&(pixels[pixels.length-1].newLineDashArray=nullDataLineDashType,currentLineDashType=dataSeries.nullDataLineDashType):(renderBezier(pixels),pixels=[])),prevDataNull=!0}renderBezier(pixels)}return RenderHelper.drawMarkers(markers),isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.beginPath()),ctx.restore(),ctx.beginPath(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function renderBezier(pixels){var bp=getBezierPoints(pixels,2);if(bp.length>0){ctx.beginPath(),isCanvasSupported&&ghostCtx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y),bp[0].newStrokeStyle&&(ctx.strokeStyle=bp[0].newStrokeStyle),bp[0].newLineDashArray&&ctx.setLineDash(bp[0].newLineDashArray),isCanvasSupported&&ghostCtx.moveTo(bp[0].x,bp[0].y);for(var i=0;i<bp.length-3;i+=3)ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),isCanvasSupported&&ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),(i>0&&i%3e3==0||bp[i+3].newStrokeStyle||bp[i+3].newLineDashArray)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(bp[i+3].x,bp[i+3].y),bp[i+3].newStrokeStyle&&(ctx.strokeStyle=bp[i+3].newStrokeStyle),bp[i+3].newLineDashArray&&ctx.setLineDash(bp[i+3].newLineDashArray),isCanvasSupported&&(ghostCtx.stroke(),ghostCtx.beginPath(),ghostCtx.moveTo(bp[i+3].x,bp[i+3].y)));ctx.stroke(),isCanvasSupported&&ghostCtx.stroke()}}},Chart.prototype.renderColumn=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/plotUnit.plotType.totalDataSeries*.9)|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.totalDataSeries*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var y1,y2,x1=plotUnit.axisX.reversed?x+plotUnit.plotType.totalDataSeries*barWidth/2-(plotUnit.previousDataSeriesCount+j)*barWidth|0:x-plotUnit.plotType.totalDataSeries*barWidth/2+(plotUnit.previousDataSeriesCount+j)*barWidth|0,x2=plotUnit.axisX.reversed?x1-barWidth|0:x1+barWidth|0;if(dataPoints[i].y>=0){if((y1=y)>(y2=yZeroToPixel)){var temp=y1;y1=y2,y2=temp}}else if((y1=yZeroToPixel)>(y2=y)){temp=y1;y1=y2,y2=temp}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&dataPoints[i].y>=0,dataPoints[i].y<0&&bevelEnabled,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:dataPoints[i],dataSeries,point:{x:x1+(x2-x1)/2,y:dataPoints[i].y<0===plotUnit.axisY.reversed?y1:y2},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.y1?plotUnit.axisY.bounds.y1:yZeroToPixel>plotUnit.axisY.bounds.y2?plotUnit.axisY.bounds.y2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderStackedColumn=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,offsetPositiveY=[],offsetNegativeY=[],stackedY=[],negativeStackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.plotUnits.length*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(ctx.strokeStyle="#4572A7 ",i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){var y1,y2,x1=(x=plotUnit.axisX.convertValueToPixel(dataPointX))-plotUnit.plotType.plotUnits.length*barWidth/2+plotUnit.index*barWidth|0,x2=x1+barWidth|0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y>0)stackedY[dataPointX]=dataPoints[i].y+(stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]>0&&(y1=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX]),y2=void 0!==offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:yZeroToPixel,offsetPositiveY[dataPointX]=y1);else if(plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y<=0)negativeStackedY[dataPointX]=dataPoints[i].y+(negativeStackedY[dataPointX]?negativeStackedY[dataPointX]:0),y2=plotUnit.axisY.convertValueToPixel(negativeStackedY[dataPointX]),y1=void 0!==offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:yZeroToPixel,offsetNegativeY[dataPointX]=y2;else{var offset;if(y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y),dataPoints[i].y>=0)y1=y-(offset=void 0!==offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0),y2=yZeroToPixel-offset,offsetPositiveY[dataPointX]=offset+(y2-y1);else y2=y+(offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0),y1=yZeroToPixel+offset,offsetNegativeY[dataPointX]=offset+(y2-y1)}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&dataPoints[i].y>=0,dataPoints[i].y<0&&bevelEnabled,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:dataPoints[i],dataSeries,point:{x,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.y1?plotUnit.axisY.bounds.y1:yZeroToPixel>plotUnit.axisY.bounds.y2?plotUnit.axisY.bounds.y2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderStackedColumn100=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,offsetPositiveY=[],offsetNegativeY=[],stackedY=[],negativeStackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.plotUnits.length*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){var yPercent;x=plotUnit.axisX.convertValueToPixel(dataPointX),yPercent=0!==plotUnit.dataPointYSums[dataPointX]?dataPoints[i].y/plotUnit.dataPointYSums[dataPointX]*100:0;var y1,y2,x1=x-plotUnit.plotType.plotUnits.length*barWidth/2+plotUnit.index*barWidth|0,x2=x1+barWidth|0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y>0){if(stackedY[dataPointX]=yPercent+(void 0!==stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]<=0)continue;y1=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX]),y2=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:yZeroToPixel,offsetPositiveY[dataPointX]=y1}else if(plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y<=0)negativeStackedY[dataPointX]=yPercent+(void 0!==negativeStackedY[dataPointX]?negativeStackedY[dataPointX]:0),y2=plotUnit.axisY.convertValueToPixel(negativeStackedY[dataPointX]),y1=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:yZeroToPixel,offsetNegativeY[dataPointX]=y2;else{var offset;if(y=plotUnit.axisY.convertValueToPixel(yPercent),dataPoints[i].y>=0)y1=y-(offset=void 0!==offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0),y2=yZeroToPixel-offset,plotUnit.dataSeriesIndexes.length-1===j&&Math.abs(plotArea.y1-y1)<=1&&(y1=plotArea.y1),offsetPositiveY[dataPointX]=offset+(y2-y1);else y2=y+(offset=void 0!==offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0),y1=yZeroToPixel+offset,plotUnit.dataSeriesIndexes.length-1===j&&Math.abs(plotArea.y2-y2)<=1&&(y2=plotArea.y2),offsetNegativeY[dataPointX]=offset+(y2-y1)}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&dataPoints[i].y>=0,dataPoints[i].y<0&&bevelEnabled,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:dataPoints[i],dataSeries,point:{x,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.y1?plotUnit.axisY.bounds.y1:yZeroToPixel>plotUnit.axisY.bounds.y2?plotUnit.axisY.bounds.y2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderBar=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/plotUnit.plotType.totalDataSeries*.9)|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.height*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.totalDataSeries*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(ctx.strokeStyle="#4572A7 ",i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){y=plotUnit.axisX.convertValueToPixel(dataPointX),x=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var x1,x2,y1=plotUnit.axisX.reversed?y+plotUnit.plotType.totalDataSeries*barWidth/2-(plotUnit.previousDataSeriesCount+j)*barWidth|0:y-plotUnit.plotType.totalDataSeries*barWidth/2+(plotUnit.previousDataSeriesCount+j)*barWidth|0,y2=plotUnit.axisX.reversed?y1-barWidth|0:y1+barWidth|0;dataPoints[i].y>=0?(x1=yZeroToPixel,x2=x):(x1=x,x2=yZeroToPixel),color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,!1,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:dataPoints[i],dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y:y1+(y2-y1)/2},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1:Math.min(x1,x2),y1,x2:Math.max(x1,x2),y2},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.x1?plotUnit.axisY.bounds.x1:yZeroToPixel>plotUnit.axisY.bounds.x2?plotUnit.axisY.bounds.x2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderStackedBar=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,offsetPositiveY=[],offsetNegativeY=[],stackedY=[],negativeStackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.height*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.plotUnits.length*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(ctx.strokeStyle="#4572A7 ",i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){var x1,x2,y1=(y=plotUnit.axisX.convertValueToPixel(dataPointX))-plotUnit.plotType.plotUnits.length*barWidth/2+plotUnit.index*barWidth|0,y2=y1+barWidth|0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y>0)stackedY[dataPointX]=dataPoints[i].y+(stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]>0&&(x1=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:yZeroToPixel,offsetPositiveY[dataPointX]=x2=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX]));else if(plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y<=0)negativeStackedY[dataPointX]=dataPoints[i].y+(negativeStackedY[dataPointX]?negativeStackedY[dataPointX]:0),x2=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:yZeroToPixel,offsetNegativeY[dataPointX]=x1=plotUnit.axisY.convertValueToPixel(negativeStackedY[dataPointX]);else{var offset;if(x=plotUnit.axisY.convertValueToPixel(dataPoints[i].y),dataPoints[i].y>=0)x1=yZeroToPixel+(offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0),x2=x+offset,offsetPositiveY[dataPointX]=offset+(x2-x1);else x1=x-(offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0),x2=yZeroToPixel-offset,offsetNegativeY[dataPointX]=offset+(x2-x1)}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,!1,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:dataPoints[i],dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1:Math.min(x1,x2),y1,x2:Math.max(x1,x2),y2},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.x1?plotUnit.axisY.bounds.x1:yZeroToPixel>plotUnit.axisY.bounds.x2?plotUnit.axisY.bounds.x2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderStackedBar100=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,color=null,plotArea=this.plotArea,offsetPositiveY=[],offsetNegativeY=[],stackedY=[],negativeStackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.height*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.plotUnits.length*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(ctx.strokeStyle="#4572A7 ",i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){var yPercent;y=plotUnit.axisX.convertValueToPixel(dataPointX),yPercent=0!==plotUnit.dataPointYSums[dataPointX]?dataPoints[i].y/plotUnit.dataPointYSums[dataPointX]*100:0;var x1,x2,y1=y-plotUnit.plotType.plotUnits.length*barWidth/2+plotUnit.index*barWidth|0,y2=y1+barWidth|0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y>0){if(stackedY[dataPointX]=yPercent+(stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]<=0)continue;x1=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:yZeroToPixel,offsetPositiveY[dataPointX]=x2=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX])}else if(plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0&&dataPoints[i].y<=0)negativeStackedY[dataPointX]=yPercent+(negativeStackedY[dataPointX]?negativeStackedY[dataPointX]:0),x2=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:yZeroToPixel,offsetNegativeY[dataPointX]=x1=plotUnit.axisY.convertValueToPixel(negativeStackedY[dataPointX]);else{var offset;if(x=plotUnit.axisY.convertValueToPixel(yPercent),dataPoints[i].y>=0)x1=yZeroToPixel+(offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0),x2=x+offset,plotUnit.dataSeriesIndexes.length-1===j&&Math.abs(plotArea.x2-x2)<=1&&(x2=plotArea.x2),offsetPositiveY[dataPointX]=offset+(x2-x1);else x1=x-(offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0),x2=yZeroToPixel-offset,plotUnit.dataSeriesIndexes.length-1===j&&Math.abs(plotArea.x1-x1)<=1&&(x1=plotArea.x1),offsetNegativeY[dataPointX]=offset+(x2-x1)}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,!1,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:dataPoints[i],dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1:Math.min(x1,x2),y1,x2:Math.max(x1,x2),y2},color})}}}isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore();var animationBase=yZeroToPixel<plotUnit.axisY.bounds.x1?plotUnit.axisY.bounds.x1:yZeroToPixel>plotUnit.axisY.bounds.x2?plotUnit.axisY.bounds.x2:yZeroToPixel;return{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase}}},Chart.prototype.renderArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var previousNotNullDataPoint,currentDataPoint,ghostCtx=this._eventManager.ghostCtx,axisYProps=(plotUnit.axisX.lineCoordinates,plotUnit.axisY.lineCoordinates),markers=[],plotArea=this.plotArea;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor,markers=[];var x,y,dataPointX,baseY,isFirstDataPointInPlotArea=!0,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),startPoint=null;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length],lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}for(var prevDataNull=!0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y),isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(currentDataPoint={x,y},x=previousNotNullDataPoint.x,y=previousNotNullDataPoint.y,closeArea(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),x=currentDataPoint.x,y=currentDataPoint.y,startPoint=previousNotNullDataPoint,currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y)):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y)),startPoint={x,y}),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%250==0&&closeArea()),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(closeArea(),currentStrokeStyle=dataPoints[i].lineColor||lineColor,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType))));var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},0!==dataPoints[i].markerSize&&(dataPoints[i].markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea||closeArea(),prevDataNull=!0;closeArea(),RenderHelper.drawMarkers(markers)}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function closeArea(){startPoint&&(dataSeries.lineThickness>0&&ctx.stroke(),plotUnit.axisY.logarithmic||plotUnit.axisY.viewportMinimum<=0&&plotUnit.axisY.viewportMaximum>=0?baseY=yZeroToPixel:plotUnit.axisY.viewportMaximum<0?baseY=axisYProps.y1:plotUnit.axisY.viewportMinimum>0&&(baseY=yZeroToPixel),ctx.lineTo(x,baseY),ctx.lineTo(startPoint.x,baseY),ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,isCanvasSupported&&(ghostCtx.lineTo(x,baseY),ghostCtx.lineTo(startPoint.x,baseY),ghostCtx.closePath(),ghostCtx.fill()),ctx.beginPath(),ctx.moveTo(x,y),ghostCtx.beginPath(),ghostCtx.moveTo(x,y),startPoint={x,y})}},Chart.prototype.renderSplineArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx,axisYProps=(plotUnit.axisX.lineCoordinates,plotUnit.axisY.lineCoordinates),markers=[],plotArea=this.plotArea;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor,markers=[];var x,y,dataPointX,baseY,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),startPoint=null,pixels=[];if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length],lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}for(var prevDataNull=!1;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},pixels[pixels.length]={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(currentStrokeStyle=dataPoints[i].lineColor||lineColor,pixels[pixels.length-1].newStrokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,pixels[pixels.length-1].newLineDashArray=getLineDashArray(currentLineDashType,dataSeries.lineThickness)):(currentLineDashType=dataSeries.lineDashType,pixels[pixels.length-1].newLineDashArray=lineDashType))),0!==dataPoints[i].markerSize&&(dataPoints[i].markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color}),!1,prevDataNull=!1}else i>0&&!prevDataNull&&(dataSeries.connectNullData?ctx.setLineDash&&pixels.length>0&&(dataSeries.options.nullDataLineDashType||!dataPoints[i-1].lineDashType)&&(pixels[pixels.length-1].newLineDashArray=nullDataLineDashType,currentLineDashType=dataSeries.nullDataLineDashType):(renderBezierArea(),pixels=[])),prevDataNull=!0;renderBezierArea(),RenderHelper.drawMarkers(markers)}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function renderBezierArea(){var bp=getBezierPoints(pixels,2);if(bp.length>0){if(dataSeries.lineThickness>0){ctx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y),bp[0].newStrokeStyle&&(ctx.strokeStyle=bp[0].newStrokeStyle),bp[0].newLineDashArray&&ctx.setLineDash(bp[0].newLineDashArray);for(var i=0;i<bp.length-3;i+=3)ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),isCanvasSupported&&ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),(bp[i+3].newStrokeStyle||bp[i+3].newLineDashArray)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(bp[i+3].x,bp[i+3].y),bp[i+3].newStrokeStyle&&(ctx.strokeStyle=bp[i+3].newStrokeStyle),bp[i+3].newLineDashArray&&ctx.setLineDash(bp[i+3].newLineDashArray));ctx.stroke()}ctx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(bp[0].x,bp[0].y));for(i=0;i<bp.length-3;i+=3)ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),isCanvasSupported&&ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);plotUnit.axisY.logarithmic||plotUnit.axisY.viewportMinimum<=0&&plotUnit.axisY.viewportMaximum>=0?baseY=yZeroToPixel:plotUnit.axisY.viewportMaximum<0?baseY=axisYProps.y1:plotUnit.axisY.viewportMinimum>0&&(baseY=yZeroToPixel),startPoint={x:bp[0].x,y:bp[0].y},ctx.lineTo(bp[bp.length-1].x,baseY),ctx.lineTo(startPoint.x,baseY),ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,isCanvasSupported&&(ghostCtx.lineTo(bp[bp.length-1].x,baseY),ghostCtx.lineTo(startPoint.x,baseY),ghostCtx.closePath(),ghostCtx.fill())}}},Chart.prototype.renderStepArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var previousNotNullDataPoint,currentDataPoint,ghostCtx=this._eventManager.ghostCtx,axisYProps=(plotUnit.axisX.lineCoordinates,plotUnit.axisY.lineCoordinates),markers=[],plotArea=this.plotArea;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor,markers=[];var x,y,dataPointX,baseY,isFirstDataPointInPlotArea=!0,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),startPoint=null,prevDataNull=!1;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length],lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}for(;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull))){var prevY=y;if("number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y),isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(currentDataPoint={x,y},x=previousNotNullDataPoint.x,y=previousNotNullDataPoint.y,closeArea(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),x=currentDataPoint.x,y=currentDataPoint.y,startPoint=previousNotNullDataPoint,currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,prevY),ctx.lineTo(x,y),isCanvasSupported&&(ghostCtx.lineTo(x,prevY),ghostCtx.lineTo(x,y))):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y)),startPoint={x,y}),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,prevY),isCanvasSupported&&ghostCtx.lineTo(x,prevY),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%250==0&&closeArea()),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(closeArea(),currentStrokeStyle=dataPoints[i].lineColor||lineColor,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType))));var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y},0!==dataPoints[i].markerSize&&(dataPoints[i].markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea||closeArea(),prevDataNull=!0}closeArea(),RenderHelper.drawMarkers(markers)}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function closeArea(){startPoint&&(dataSeries.lineThickness>0&&ctx.stroke(),plotUnit.axisY.logarithmic||plotUnit.axisY.viewportMinimum<=0&&plotUnit.axisY.viewportMaximum>=0?baseY=yZeroToPixel:plotUnit.axisY.viewportMaximum<0?baseY=axisYProps.y1:plotUnit.axisY.viewportMinimum>0&&(baseY=yZeroToPixel),ctx.lineTo(x,baseY),ctx.lineTo(startPoint.x,baseY),ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,isCanvasSupported&&(ghostCtx.lineTo(x,baseY),ghostCtx.lineTo(startPoint.x,baseY),ghostCtx.closePath(),ghostCtx.fill()),ctx.beginPath(),ctx.moveTo(x,y),ghostCtx.beginPath(),ghostCtx.moveTo(x,y),startPoint={x,y})}},Chart.prototype.renderStackedArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var dataPointX,previousNotNullDataPoint,temp1,temp2,color=null,markerColor=null,markers=[],plotArea=this.plotArea,offsetY=[],currentBaseValues=[],allXValues=[],stackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),ghostCtx=(plotUnit.axisX.dataInfo.minDiff,this._eventManager.ghostCtx);isCanvasSupported&&ghostCtx.beginPath(),ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var xValuePresent=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var xValue,dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints;for(dataSeries.dataPointIndexes=[],i=0;i<dataPoints.length;i++)xValue=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x,dataSeries.dataPointIndexes[xValue]=i,xValuePresent[xValue]||(allXValues.push(xValue),xValuePresent[xValue]=!0);allXValues.sort(compareNumbers)}for(j=0;j<plotUnit.dataSeriesIndexes.length;j++){dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints;var dataSeries,isFirstDataPointInPlotArea=!0;currentBaseValues=[];var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);if(ghostCtx.fillStyle=hexColor,allXValues.length>0){color=dataSeries._colorSet[0];var lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}var prevDataNull=!0;for(i=0;i<allXValues.length;i++){dataPointX=allXValues[i];var dataPoint=null;if(dataPoint=dataSeries.dataPointIndexes[dataPointX]>=0?dataPoints[dataSeries.dataPointIndexes[dataPointX]]:{x:dataPointX,y:null},!(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoint.y){var x=plotUnit.axisX.convertValueToPixel(dataPointX),offset=offsetY[dataPointX]?offsetY[dataPointX]:0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0){if(stackedY[dataPointX]=dataPoint.y+(stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]<=0&&plotUnit.axisY.logarithmic)continue;var y=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX])}else{y=plotUnit.axisY.convertValueToPixel(dataPoint.y);y-=offset}if(currentBaseValues.push({x,y:yZeroToPixel-offset}),offsetY[dataPointX]=yZeroToPixel-y,isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(temp1=currentBaseValues.pop(),temp2=currentBaseValues[currentBaseValues.length-1],closeArea(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),currentBaseValues.push(temp2),currentBaseValues.push(temp1),currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y)):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y))),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%250==0&&(closeArea(),ctx.moveTo(x,y),isCanvasSupported&&ghostCtx.moveTo(x,y),currentBaseValues.push({x,y:yZeroToPixel-offset}))),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(closeArea(),ctx.beginPath(),ctx.moveTo(x,y),currentBaseValues.push({x,y:yZeroToPixel-offset}),currentStrokeStyle=dataPoints[i].lineColor||lineColor,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType)))),dataSeries.dataPointIndexes[dataPointX]>=0){var id=dataSeries.dataPointIds[dataSeries.dataPointIndexes[dataPointX]];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:dataSeries.dataPointIndexes[dataPointX],x1:x,y1:y}}if(dataSeries.dataPointIndexes[dataPointX]>=0&&0!==dataPoint.markerSize&&(dataPoint.markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(dataSeries.dataPointIndexes[dataPointX],x,y,ctx);markerProps.color,markers.push(markerProps),markerColor=intToHexColorString(id),isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoint.indexLabel||dataSeries.indexLabel||dataPoint.indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint,dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea||closeArea(),prevDataNull=!0}closeArea(),ctx.moveTo(x,y),isCanvasSupported&&ghostCtx.moveTo(x,y)}delete dataSeries.dataPointIndexes}return RenderHelper.drawMarkers(markers),isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function closeArea(){if(!(currentBaseValues.length<1)){for(dataSeries.lineThickness>0&&ctx.stroke();currentBaseValues.length>0;){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y),isCanvasSupported&&ghostCtx.lineTo(point.x,point.y)}ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,ctx.beginPath(),isCanvasSupported&&(ghostCtx.closePath(),ghostCtx.fill(),ghostCtx.beginPath()),currentBaseValues=[]}}},Chart.prototype.renderStackedArea100=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var dataPointX,previousNotNullDataPoint,temp1,temp2,color=null,markerColor=null,plotArea=this.plotArea,markers=[],offsetY=[],currentBaseValues=[],allXValues=[],stackedY=[],i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),ghostCtx=this._eventManager.ghostCtx;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var xValuePresent=[],j=0;j<plotUnit.dataSeriesIndexes.length;j++){var xValue,dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints;for(dataSeries.dataPointIndexes=[],i=0;i<dataPoints.length;i++)xValue=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x,dataSeries.dataPointIndexes[xValue]=i,xValuePresent[xValue]||(allXValues.push(xValue),xValuePresent[xValue]=!0);allXValues.sort(compareNumbers)}for(j=0;j<plotUnit.dataSeriesIndexes.length;j++){dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints;var dataSeries,isFirstDataPointInPlotArea=!0,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);if(ghostCtx.fillStyle=hexColor,currentBaseValues=[],allXValues.length>0){color=dataSeries._colorSet[i%dataSeries._colorSet.length];var lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}var prevDataNull=!0;for(i=0;i<allXValues.length;i++){dataPointX=allXValues[i];var dataPoint=null;if(dataPoint=dataSeries.dataPointIndexes[dataPointX]>=0?dataPoints[dataSeries.dataPointIndexes[dataPointX]]:{x:dataPointX,y:null},!(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if("number"==typeof dataPoint.y){var yPercent;yPercent=0!==plotUnit.dataPointYSums[dataPointX]?dataPoint.y/plotUnit.dataPointYSums[dataPointX]*100:0;var x=plotUnit.axisX.convertValueToPixel(dataPointX),offset=offsetY[dataPointX]?offsetY[dataPointX]:0;if(plotUnit.axisY.logarithmic||plotUnit.axisY.scaleBreaks&&plotUnit.axisY.scaleBreaks._appliedBreaks.length>0){if(stackedY[dataPointX]=yPercent+(stackedY[dataPointX]?stackedY[dataPointX]:0),stackedY[dataPointX]<=0&&plotUnit.axisY.logarithmic)continue;var y=plotUnit.axisY.convertValueToPixel(stackedY[dataPointX])}else{y=plotUnit.axisY.convertValueToPixel(yPercent);y-=offset}if(currentBaseValues.push({x,y:yZeroToPixel-offset}),offsetY[dataPointX]=yZeroToPixel-y,isFirstDataPointInPlotArea||prevDataNull?(!isFirstDataPointInPlotArea&&dataSeries.connectNullData?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(temp1=currentBaseValues.pop(),temp2=currentBaseValues[currentBaseValues.length-1],closeArea(),ctx.moveTo(previousNotNullDataPoint.x,previousNotNullDataPoint.y),currentBaseValues.push(temp2),currentBaseValues.push(temp1),currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y)):(ctx.beginPath(),ctx.moveTo(x,y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y))),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,y),isCanvasSupported&&ghostCtx.lineTo(x,y),i%250==0&&(closeArea(),ctx.moveTo(x,y),isCanvasSupported&&ghostCtx.moveTo(x,y),currentBaseValues.push({x,y:yZeroToPixel-offset}))),previousNotNullDataPoint={x,y},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(closeArea(),ctx.beginPath(),ctx.moveTo(x,y),currentBaseValues.push({x,y:yZeroToPixel-offset}),currentStrokeStyle=dataPoints[i].lineColor||lineColor,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,ctx.setLineDash(getLineDashArray(currentLineDashType,dataSeries.lineThickness))):(currentLineDashType=dataSeries.lineDashType,ctx.setLineDash(lineDashType)))),dataSeries.dataPointIndexes[dataPointX]>=0){var id=dataSeries.dataPointIds[dataSeries.dataPointIndexes[dataPointX]];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:dataSeries.dataPointIndexes[dataPointX],x1:x,y1:y}}if(dataSeries.dataPointIndexes[dataPointX]>=0&&0!==dataPoint.markerSize&&(dataPoint.markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markerProps.color,markers.push(markerProps),markerColor=intToHexColorString(id),isCanvasSupported&&markers.push({x,y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoint.indexLabel||dataSeries.indexLabel||dataPoint.indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint,dataSeries,point:{x,y},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,color})}else dataSeries.connectNullData||prevDataNull||isFirstDataPointInPlotArea||closeArea(),prevDataNull=!0}closeArea(),ctx.moveTo(x,y),isCanvasSupported&&ghostCtx.moveTo(x,y)}delete dataSeries.dataPointIndexes}return RenderHelper.drawMarkers(markers),isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function closeArea(){for(dataSeries.lineThickness>0&&ctx.stroke();currentBaseValues.length>0;){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y),isCanvasSupported&&ghostCtx.lineTo(point.x,point.y)}ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,ctx.beginPath(),isCanvasSupported&&(ghostCtx.closePath(),ghostCtx.fill(),ghostCtx.beginPath()),currentBaseValues=[]}},Chart.prototype.renderBubble=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,plotArea=this.plotArea,i=0;ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var maxZ=-1/0,minZ=1/0,j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints,z=0;for(i=0;i<dataPoints.length;i++)(dataPointX=dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax||void 0!==dataPoints[i].z&&((z=dataPoints[i].z)>maxZ&&(maxZ=z),z<minZ&&(minZ=z))}var minArea=5*Math.PI*5,maxArea=Math.max(Math.pow(.25*Math.min(plotArea.height,plotArea.width)/2,2)*Math.PI,minArea);for(j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries;dataSeriesIndex=plotUnit.dataSeriesIndexes[j];if((dataPoints=(dataSeries=this.data[dataSeriesIndex]).dataPoints).length>0){ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);z=dataPoints[i].z;var area=maxZ===minZ?maxArea/2:minArea+(maxArea-minArea)/(maxZ-minZ)*(z-minZ),markerSize=2*Math.max(Math.sqrt(area/Math.PI)|0,1),markerProps=dataSeries.getMarkerProperties(i,ctx);markerProps.size=markerSize,ctx.globalAlpha=dataSeries.fillOpacity,RenderHelper.drawMarker(x,y,ctx,markerProps.type,markerProps.size,markerProps.color,markerProps.borderColor,markerProps.borderThickness),ctx.globalAlpha=1;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y,size:markerSize};var markerColor=intToHexColorString(id);isCanvasSupported&&RenderHelper.drawMarker(x,y,this._eventManager.ghostCtx,markerProps.type,markerProps.size,markerColor,markerColor,markerProps.borderThickness),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:1,bounds:{x1:x-markerProps.size/2,y1:y-markerProps.size/2,x2:x+markerProps.size/2,y2:y+markerProps.size/2},color:null})}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderScatter=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,dataPointX,plotArea=this.plotArea,i=0;ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){ctx.strokeStyle="#4572A7 ";Math.pow(.3*Math.min(plotArea.height,plotArea.width)/2,2),Math.PI;var prevDataPointX=0,prevDataPointY=0;for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&"number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y=plotUnit.axisY.convertValueToPixel(dataPoints[i].y);var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);if(ctx.globalAlpha=dataSeries.fillOpacity,RenderHelper.drawMarker(markerProps.x,markerProps.y,markerProps.ctx,markerProps.type,markerProps.size,markerProps.color,markerProps.borderColor,markerProps.borderThickness),ctx.globalAlpha=1,!(Math.sqrt((prevDataPointX-x)*(prevDataPointX-x)+(prevDataPointY-y)*(prevDataPointY-y))<Math.min(markerProps.size,5)&&dataPoints.length>Math.min(this.plotArea.width,this.plotArea.height))){var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};var markerColor=intToHexColorString(id);isCanvasSupported&&RenderHelper.drawMarker(markerProps.x,markerProps.y,this._eventManager.ghostCtx,markerProps.type,markerProps.size,markerColor,markerColor,markerProps.borderThickness),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:dataPoints[i],dataSeries,point:{x,y},direction:1,bounds:{x1:x-markerProps.size/2,y1:y-markerProps.size/2,x2:x+markerProps.size/2,y2:y+markerProps.size/2},color:null}),prevDataPointX=x,prevDataPointY=y}}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderCandlestick=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx,ghostCtx=this._eventManager.ghostCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y1,y2,y3,y4,dataPointX,color=null,fallingColor=null,plotArea=this.plotArea,i=0,minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))*.7|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&!isNullOrUndefined(dataPoints[i].y)&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]&&"number"==typeof dataPoints[i].y[2]&&"number"==typeof dataPoints[i].y[3]){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),y2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]),y3=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[2]),y4=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[3]);var x1=x-barWidth/2|0,x2=x1+barWidth|0;fallingColor=dataSeries.options.fallingColor?dataSeries.fallingColor:dataSeries._colorSet[0],color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[0];var borderThickness=Math.round(Math.max(1,.15*barWidth)),offset=borderThickness%2==0?0:.5,id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2,x3:x,y3,x4:x,y4,borderThickness,color},ctx.strokeStyle=color,ctx.beginPath(),ctx.lineWidth=borderThickness,ghostCtx.lineWidth=Math.max(borderThickness,4),"candlestick"===dataSeries.type?(ctx.moveTo(x-offset,y2),ctx.lineTo(x-offset,Math.min(y1,y4)),ctx.stroke(),ctx.moveTo(x-offset,Math.max(y1,y4)),ctx.lineTo(x-offset,y3),ctx.stroke(),drawRect(ctx,x1,Math.min(y1,y4),x2,Math.max(y1,y4),dataPoints[i].y[0]<=dataPoints[i].y[3]?dataSeries.risingColor:fallingColor,borderThickness,color,bevelEnabled,bevelEnabled,!1,!1,dataSeries.fillOpacity),isCanvasSupported&&(color=intToHexColorString(id),ghostCtx.strokeStyle=color,ghostCtx.moveTo(x-offset,y2),ghostCtx.lineTo(x-offset,Math.min(y1,y4)),ghostCtx.stroke(),ghostCtx.moveTo(x-offset,Math.max(y1,y4)),ghostCtx.lineTo(x-offset,y3),ghostCtx.stroke(),drawRect(ghostCtx,x1,Math.min(y1,y4),x2,Math.max(y1,y4),color,0,null,!1,!1,!1,!1))):"ohlc"===dataSeries.type&&(ctx.moveTo(x-offset,y2),ctx.lineTo(x-offset,y3),ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y1),ctx.lineTo(x1,y1),ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y4),ctx.lineTo(x2,y4),ctx.stroke(),isCanvasSupported&&(color=intToHexColorString(id),ghostCtx.strokeStyle=color,ghostCtx.moveTo(x-offset,y2),ghostCtx.lineTo(x-offset,y3),ghostCtx.stroke(),ghostCtx.beginPath(),ghostCtx.moveTo(x,y1),ghostCtx.lineTo(x1,y1),ghostCtx.stroke(),ghostCtx.beginPath(),ghostCtx.moveTo(x,y4),ghostCtx.lineTo(x2,y4),ghostCtx.stroke())),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:dataSeries.type,dataPoint:dataPoints[i],dataSeries,point:{x:x1+(x2-x1)/2,y:plotUnit.axisY.reversed?y3:y2},direction:1,bounds:{x1,y1:Math.min(y2,y3),x2,y2:Math.max(y2,y3)},color})}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderBoxAndWhisker=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx,ghostCtx=this._eventManager.ghostCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y1,y2,y3,y4,y5,dataPointX,color=null,plotArea=this.plotArea,i=0,minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))*.7|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());var reversed;reversed=!!plotUnit.axisY.reversed;for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&!isNullOrUndefined(dataPoints[i].y)&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]&&"number"==typeof dataPoints[i].y[2]&&"number"==typeof dataPoints[i].y[3]&&"number"==typeof dataPoints[i].y[4]&&5===dataPoints[i].y.length){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),y2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]),y3=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[2]),y4=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[3]),y5=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[4]);var x1=x-barWidth/2|0,x2=x+barWidth/2|0;color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[0];var borderThickness=Math.round(Math.max(1,.15*barWidth)),offset=borderThickness%2==0?0:.5,whiskerColor=dataPoints[i].whiskerColor?dataPoints[i].whiskerColor:dataPoints[i].color?dataSeries.whiskerColor?dataSeries.whiskerColor:dataPoints[i].color:dataSeries.whiskerColor?dataSeries.whiskerColor:color,whiskerThickness="number"==typeof dataPoints[i].whiskerThickness?dataPoints[i].whiskerThickness:"number"==typeof dataSeries.options.whiskerThickness?dataSeries.whiskerThickness:borderThickness,whiskerDashType=dataPoints[i].whiskerDashType?dataPoints[i].whiskerDashType:dataSeries.whiskerDashType,whiskerLength=isNullOrUndefined(dataPoints[i].whiskerLength)?isNullOrUndefined(dataSeries.options.whiskerLength)?barWidth:dataSeries.whiskerLength:dataPoints[i].whiskerLength;whiskerLength="number"==typeof whiskerLength?whiskerLength<=0?0:whiskerLength>=barWidth?barWidth:whiskerLength:"string"==typeof whiskerLength?parseInt(whiskerLength)*barWidth/100>barWidth?barWidth:parseInt(whiskerLength)*barWidth/100:barWidth;var whiskerOffset=Math.round(whiskerThickness)%2==1?.5:0,stemColor=dataPoints[i].stemColor?dataPoints[i].stemColor:dataPoints[i].color?dataSeries.stemColor?dataSeries.stemColor:dataPoints[i].color:dataSeries.stemColor?dataSeries.stemColor:color,stemThickness="number"==typeof dataPoints[i].stemThickness?dataPoints[i].stemThickness:"number"==typeof dataSeries.options.stemThickness?dataSeries.stemThickness:borderThickness,stemOffset=Math.round(stemThickness)%2==1?.5:0,stemDashType=dataPoints[i].stemDashType?dataPoints[i].stemDashType:dataSeries.stemDashType,lineColor=dataPoints[i].lineColor?dataPoints[i].lineColor:dataPoints[i].color?dataSeries.lineColor?dataSeries.lineColor:dataPoints[i].color:dataSeries.lineColor?dataSeries.lineColor:color,lineThickness="number"==typeof dataPoints[i].lineThickness?dataPoints[i].lineThickness:"number"==typeof dataSeries.options.lineThickness?dataSeries.lineThickness:borderThickness,lineDashType=dataPoints[i].lineDashType?dataPoints[i].lineDashType:dataSeries.lineDashType,lineOffset=Math.round(lineThickness)%2==1?.5:0,upperBoxColor=dataSeries.upperBoxColor,lowerBoxColor=dataSeries.lowerBoxColor,fillOpacity=isNullOrUndefined(dataSeries.options.fillOpacity)?1:dataSeries.fillOpacity,id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2,x3:x,y3,x4:x,y4,y5,borderThickness,color,stemThickness,stemColor,whiskerThickness,whiskerLength,whiskerColor,lineThickness,lineColor},ctx.save(),stemThickness>0&&(ctx.beginPath(),ctx.strokeStyle=stemColor,ctx.lineWidth=stemThickness,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(stemDashType,stemThickness)),ctx.moveTo(x-stemOffset,y2),ctx.lineTo(x-stemOffset,y1),ctx.stroke(),ctx.moveTo(x-stemOffset,y4),ctx.lineTo(x-stemOffset,y3),ctx.stroke()),ctx.restore(),ghostCtx.lineWidth=Math.max(borderThickness,4),ctx.beginPath(),drawRect(ctx,x1,Math.min(y5,y2),x2,Math.max(y2,y5),lowerBoxColor,0,color,!!reversed&&bevelEnabled,!reversed&&bevelEnabled,!1,!1,fillOpacity),ctx.beginPath(),drawRect(ctx,x1,Math.min(y3,y5),x2,Math.max(y5,y3),upperBoxColor,0,color,!reversed&&bevelEnabled,!!reversed&&bevelEnabled,!1,!1,fillOpacity),ctx.beginPath(),ctx.lineWidth=borderThickness,ctx.strokeStyle=color,ctx.rect(x1-offset,Math.min(y2,y3)-offset,x2-x1+2*offset,Math.max(y2,y3)-Math.min(y2,y3)+2*offset),ctx.stroke(),ctx.save(),lineThickness>0&&(ctx.beginPath(),ctx.globalAlpha=1,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(lineDashType,lineThickness)),ctx.strokeStyle=lineColor,ctx.lineWidth=lineThickness,ctx.moveTo(x1,y5-lineOffset),ctx.lineTo(x2,y5-lineOffset),ctx.stroke()),ctx.restore(),ctx.save(),whiskerThickness>0&&(ctx.beginPath(),ctx.setLineDash&&ctx.setLineDash(getLineDashArray(whiskerDashType,whiskerThickness)),ctx.strokeStyle=whiskerColor,ctx.lineWidth=whiskerThickness,ctx.moveTo(x-whiskerLength/2|0,y4-whiskerOffset),ctx.lineTo(x+whiskerLength/2|0,y4-whiskerOffset),ctx.stroke(),ctx.moveTo(x-whiskerLength/2|0,y1+whiskerOffset),ctx.lineTo(x+whiskerLength/2|0,y1+whiskerOffset),ctx.stroke()),ctx.restore(),isCanvasSupported&&(color=intToHexColorString(id),ghostCtx.strokeStyle=color,ghostCtx.lineWidth=stemThickness,stemThickness>0&&(ghostCtx.moveTo(x-offset-stemOffset,y2),ghostCtx.lineTo(x-offset-stemOffset,Math.max(y1,y4)),ghostCtx.stroke(),ghostCtx.moveTo(x-offset-stemOffset,Math.min(y1,y4)),ghostCtx.lineTo(x-offset-stemOffset,y3),ghostCtx.stroke()),drawRect(ghostCtx,x1,Math.max(y2,y3),x2,Math.min(y2,y3),color,0,null,!1,!1,!1,!1),whiskerThickness>0&&(ghostCtx.beginPath(),ghostCtx.lineWidth=whiskerThickness,ghostCtx.moveTo(x+whiskerLength/2,y4-whiskerOffset),ghostCtx.lineTo(x-whiskerLength/2,y4-whiskerOffset),ghostCtx.stroke(),ghostCtx.moveTo(x+whiskerLength/2,y1+whiskerOffset),ghostCtx.lineTo(x-whiskerLength/2,y1+whiskerOffset),ghostCtx.stroke())),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:dataSeries.type,dataPoint:dataPoints[i],dataSeries,point:{x:x1+(x2-x1)/2,y:plotUnit.axisY.reversed?y1:y4},direction:1,bounds:{x1,y1:Math.min(y1,y4),x2,y2:Math.max(y1,y4)},color})}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderRangeColumn=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y1,y2,dataPointX,color=null,plotArea=this.plotArea,i=0,minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.totalDataSeries*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&!isNullOrUndefined(dataPoints[i].y)&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),y2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]);var x1=plotUnit.axisX.reversed?x+plotUnit.plotType.totalDataSeries*barWidth/2-(plotUnit.previousDataSeriesCount+j)*barWidth|0:x-plotUnit.plotType.totalDataSeries*barWidth/2+(plotUnit.previousDataSeriesCount+j)*barWidth|0,x2=plotUnit.axisX.reversed?x1-barWidth|0:x1+barWidth|0;if(color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],y1>y2){var temp=y1;y1=y2,y2=temp}var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2};drawRect(ctx,x1,y1,x2,y2,color,0,color,bevelEnabled,bevelEnabled,!1,!1,dataSeries.fillOpacity),color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:dataPoints[i],dataSeries,indexKeyword:0,point:{x:x1+(x2-x1)/2,y:dataPoints[i].y[1]>=dataPoints[i].y[0]?y2:y1},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?-1:1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:dataPoints[i],dataSeries,indexKeyword:1,point:{x:x1+(x2-x1)/2,y:dataPoints[i].y[1]>=dataPoints[i].y[0]?y1:y2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?1:-1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color}))}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderError=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx,isXYSwapped=!!plotUnit.axisY._position&&("left"!==plotUnit.axisY._position&&"right"!==plotUnit.axisY._position);if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y,x1,x2,y1,y2,dataPointX,color=null,isRangeChart=!1,plotArea=this.plotArea,i=0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range)),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var totalBarTypeSeries=0,k=0;k<this.data.length;k++)if(this.data[k].type.match(/(bar|column)/gi)&&this.data[k].visible){if(this.data[k].type.match(/(stacked)/gi)&&totalBarTypeSeries)continue;totalBarTypeSeries++}for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,isSeriesLinkedToBar=!isNullOrUndefined(dataSeries._linkedSeries)&&!(!dataSeries._linkedSeries.type.match(/(bar|column)/gi)||!dataSeries._linkedSeries.visible),numberOfPreviousBars=0;if(isSeriesLinkedToBar){var linkedIndex=dataSeries._linkedSeries.id;for(k=0;k<linkedIndex;k++)if(this.data[k].type.match(/(bar|column)/gi)&&this.data[k].visible){if(this.data[k].type.match(/(stacked)/gi)&&numberOfPreviousBars)continue;this.data[k].type.match(/(range)/gi)&&(isRangeChart=!0),numberOfPreviousBars++}}var minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:isXYSwapped?Math.min(.15*this.height,this.plotArea.height/(isSeriesLinkedToBar?totalBarTypeSeries:1)*.9)|0:.3*this.width;isRangeChart&&(maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:isXYSwapped?Math.min(.15*this.height,this.plotArea.height/(isSeriesLinkedToBar?totalBarTypeSeries:1)*.9)|0:.03*this.width);var barWidth=this.options.dataPointWidth?this.dataPointWidth:(isXYSwapped?plotArea.height:plotArea.width)*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/(isSeriesLinkedToBar?totalBarTypeSeries:1)*.9|0;if(this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),dataPoints.length>0){var colorSet=dataSeries._colorSet;for(i=0;i<dataPoints.length;i++){color=dataSeries.lineColor=dataSeries.options.color?dataSeries.options.color:colorSet[0];var whiskerProperties={color:dataPoints[i].whiskerColor?dataPoints[i].whiskerColor:dataPoints[i].color?dataSeries.whiskerColor?dataSeries.whiskerColor:dataPoints[i].color:dataSeries.whiskerColor?dataSeries.whiskerColor:color,thickness:isNullOrUndefined(dataPoints[i].whiskerThickness)?dataSeries.whiskerThickness:dataPoints[i].whiskerThickness,dashType:dataPoints[i].whiskerDashType?dataPoints[i].whiskerDashType:dataSeries.whiskerDashType,length:isNullOrUndefined(dataPoints[i].whiskerLength)?isNullOrUndefined(dataSeries.options.whiskerLength)?barWidth:dataSeries.options.whiskerLength:dataPoints[i].whiskerLength,trimLength:isNullOrUndefined(dataPoints[i].whiskerLength)&&isNullOrUndefined(dataSeries.options.whiskerLength)?50:0};whiskerProperties.length="number"==typeof whiskerProperties.length?whiskerProperties.length<=0?0:whiskerProperties.length>=barWidth?barWidth:whiskerProperties.length:"string"==typeof whiskerProperties.length?parseInt(whiskerProperties.length)*barWidth/100>barWidth?barWidth:parseInt(whiskerProperties.length)*barWidth/100>barWidth:barWidth,whiskerProperties.thickness="number"==typeof whiskerProperties.thickness?whiskerProperties.thickness<0?0:Math.round(whiskerProperties.thickness):2;var stemProperties={color:dataPoints[i].stemColor?dataPoints[i].stemColor:dataPoints[i].color?dataSeries.stemColor?dataSeries.stemColor:dataPoints[i].color:dataSeries.stemColor?dataSeries.stemColor:color,thickness:dataPoints[i].stemThickness?dataPoints[i].stemThickness:dataSeries.stemThickness,dashType:dataPoints[i].stemDashType?dataPoints[i].stemDashType:dataSeries.stemDashType};if(stemProperties.thickness="number"==typeof stemProperties.thickness?stemProperties.thickness<0?0:Math.round(stemProperties.thickness):2,!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&!isNullOrUndefined(dataPoints[i].y)&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]){var temp=plotUnit.axisX.convertValueToPixel(dataPointX);isXYSwapped?y=temp:x=temp,temp=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),isXYSwapped?x1=temp:y1=temp,temp=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]),isXYSwapped?x2=temp:y2=temp,isXYSwapped?(y1=plotUnit.axisX.reversed?y+(isSeriesLinkedToBar?totalBarTypeSeries:1)*barWidth/2-(isSeriesLinkedToBar?numberOfPreviousBars-1:0)*barWidth|0:y-(isSeriesLinkedToBar?totalBarTypeSeries:1)*barWidth/2+(isSeriesLinkedToBar?numberOfPreviousBars-1:0)*barWidth|0,y2=plotUnit.axisX.reversed?y1-barWidth|0:y1+barWidth|0):(x1=plotUnit.axisX.reversed?x+(isSeriesLinkedToBar?totalBarTypeSeries:1)*barWidth/2-(isSeriesLinkedToBar?numberOfPreviousBars-1:0)*barWidth|0:x-(isSeriesLinkedToBar?totalBarTypeSeries:1)*barWidth/2+(isSeriesLinkedToBar?numberOfPreviousBars-1:0)*barWidth|0,x2=plotUnit.axisX.reversed?x1-barWidth|0:x1+barWidth|0),!isXYSwapped&&y1>y2&&(temp=y1,y1=y2,y2=temp),isXYSwapped&&x1>x2&&(temp=x1,x1=x2,x2=temp);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:Math.min(x1,x2),y1:Math.min(y1,y2),x2:Math.max(x2,x1),y2:Math.max(y2,y1),isXYSwapped,stemProperties,whiskerProperties},drawErrorLines(ctx,Math.min(x1,x2),Math.min(y1,y2),Math.max(x2,x1),Math.max(y2,y1),color,whiskerProperties,stemProperties,isXYSwapped),isCanvasSupported&&drawErrorLines(this._eventManager.ghostCtx,x1,y1,x2,y2,color,whiskerProperties,stemProperties,isXYSwapped),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:dataPoints[i],dataSeries,indexKeyword:0,point:{x:isXYSwapped?dataPoints[i].y[1]>=dataPoints[i].y[0]?x1:x2:x1+(x2-x1)/2,y:isXYSwapped?y1+(y2-y1)/2:dataPoints[i].y[1]>=dataPoints[i].y[0]?y2:y1},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?-1:1,bounds:{x1:isXYSwapped?Math.min(x1,x2):x1,y1:isXYSwapped?y1:Math.min(y1,y2),x2:isXYSwapped?Math.max(x1,x2):x2,y2:isXYSwapped?y2:Math.max(y1,y2)},color,axisSwapped:isXYSwapped}),this._indexLabels.push({chartType:"error",dataPoint:dataPoints[i],dataSeries,indexKeyword:1,point:{x:isXYSwapped?dataPoints[i].y[1]>=dataPoints[i].y[0]?x2:x1:x1+(x2-x1)/2,y:isXYSwapped?y1+(y2-y1)/2:dataPoints[i].y[1]>=dataPoints[i].y[0]?y1:y2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?1:-1,bounds:{x1:isXYSwapped?Math.min(x1,x2):x1,y1:isXYSwapped?y1:Math.min(y1,y2),x2:isXYSwapped?Math.max(x1,x2):x2,y2:isXYSwapped?y2:Math.max(y1,y2)},color,axisSwapped:isXYSwapped}))}}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderRangeBar=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x1,x2,y,dataPointX,color=null,plotArea=this.plotArea,i=0,minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/plotUnit.plotType.totalDataSeries*.9)|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.height*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.totalDataSeries*.9|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled);for(ctx.strokeStyle="#4572A7 ",i=0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)&&!isNullOrUndefined(dataPoints[i].y)&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]){x1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),x2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]),y=plotUnit.axisX.convertValueToPixel(dataPointX);var y1=plotUnit.axisX.reversed?y+plotUnit.plotType.totalDataSeries*barWidth/2-(plotUnit.previousDataSeriesCount+j)*barWidth|0:y-plotUnit.plotType.totalDataSeries*barWidth/2+(plotUnit.previousDataSeriesCount+j)*barWidth|0,y2=plotUnit.axisX.reversed?y1-barWidth|0:y1+barWidth|0;if(x1>x2){var temp=x1;x1=x2,x2=temp}color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length],drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,!1,!1,!1,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2},color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:dataPoints[i],dataSeries,indexKeyword:0,point:{x:dataPoints[i].y[1]>=dataPoints[i].y[0]?x1:x2,y:y1+(y2-y1)/2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?-1:1,bounds:{x1:Math.min(x1,x2),y1,x2:Math.max(x1,x2),y2},color}),this._indexLabels.push({chartType:"rangeBar",dataPoint:dataPoints[i],dataSeries,indexKeyword:1,point:{x:dataPoints[i].y[1]>=dataPoints[i].y[0]?x2:x1,y:y1+(y2-y1)/2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?1:-1,bounds:{x1:Math.min(x1,x2),y1,x2:Math.max(x1,x2),y2},color}))}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}},Chart.prototype.renderRangeArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx,markers=(plotUnit.axisX.lineCoordinates,plotUnit.axisY.lineCoordinates,[]),plotArea=this.plotArea;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var closingPath=[],dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor,markers=[];var x,y1,y2,dataPointX,isFirstDataPointInPlotArea=!0,i=0,startPoint=null;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length],lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.strokeStyle=lineColor,ctx.lineWidth=dataSeries.lineThickness;var currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness),lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness);ctx.setLineDash(lineDashType)}for(var prevDataNull=!0;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if(null!==dataPoints[i].y&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),y2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]),isFirstDataPointInPlotArea||prevDataNull?(dataSeries.connectNullData&&!isFirstDataPointInPlotArea?(ctx.setLineDash&&(dataSeries.options.nullDataLineDashType||currentLineDashType===dataSeries.lineDashType&&dataSeries.lineDashType!==dataSeries.nullDataLineDashType)&&(closingPath[closingPath.length-1].newLineDashArray=lineDashType,currentLineDashType=dataSeries.nullDataLineDashType,ctx.setLineDash(nullDataLineDashType)),ctx.lineTo(x,y1),isCanvasSupported&&ghostCtx.lineTo(x,y1),closingPath.push({x,y1,y2})):(ctx.beginPath(),ctx.moveTo(x,y1),startPoint={x,y:y1},(closingPath=[]).push({x,y1,y2}),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(x,y1))),isFirstDataPointInPlotArea=!1,prevDataNull=!1):(ctx.lineTo(x,y1),closingPath.push({x,y1,y2}),isCanvasSupported&&ghostCtx.lineTo(x,y1),i%250==0&&closeArea());var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1,y2},i<dataPoints.length-1&&(currentStrokeStyle===(dataPoints[i].lineColor||lineColor)&&currentLineDashType===(dataPoints[i].lineDashType||dataSeries.lineDashType)||(closeArea(),currentStrokeStyle=dataPoints[i].lineColor||lineColor,closingPath[closingPath.length-1].newStrokeStyle=currentStrokeStyle,ctx.strokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,closingPath[closingPath.length-1].newLineDashArray=getLineDashArray(currentLineDashType,dataSeries.lineThickness),ctx.setLineDash(closingPath[closingPath.length-1].newLineDashArray)):(currentLineDashType=dataSeries.lineDashType,closingPath[closingPath.length-1].newLineDashArray=lineDashType,ctx.setLineDash(lineDashType))))),0!==dataPoints[i].markerSize&&(dataPoints[i].markerSize>0||dataSeries.markerSize>0)){var markerProps=dataSeries.getMarkerProperties(i,x,y2,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y:y2,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness}),(markerProps=dataSeries.getMarkerProperties(i,x,y1,ctx)).color,markers.push(markerProps);markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y:y1,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:dataPoints[i],dataSeries,indexKeyword:0,point:{x,y:y1},direction:dataPoints[i].y[0]>dataPoints[i].y[1]===plotUnit.axisY.reversed?-1:1,color}),this._indexLabels.push({chartType:"rangeArea",dataPoint:dataPoints[i],dataSeries,indexKeyword:1,point:{x,y:y2},direction:dataPoints[i].y[0]>dataPoints[i].y[1]===plotUnit.axisY.reversed?1:-1,color}))}else prevDataNull||isFirstDataPointInPlotArea||closeArea(),prevDataNull=!0;closeArea(),RenderHelper.drawMarkers(markers)}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function closeArea(){if(startPoint){for(var point=null,i=closingPath.length-1;i>=0;i--)point=closingPath[i],ctx.lineTo(point.x,point.y2),ghostCtx.lineTo(point.x,point.y2);if(ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),ctx.globalAlpha=1,ghostCtx.fill(),dataSeries.lineThickness>0){ctx.beginPath(),ctx.moveTo(point.x,point.y2);for(i=0;i<closingPath.length;i++)point=closingPath[i],ctx.lineTo(point.x,point.y2);ctx.moveTo(closingPath[0].x,closingPath[0].y1);for(i=0;i<closingPath.length;i++)point=closingPath[i],ctx.lineTo(point.x,point.y1);ctx.stroke()}ctx.beginPath(),ctx.moveTo(x,y1),ghostCtx.beginPath(),ghostCtx.moveTo(x,y1),startPoint={x,y:y1},(closingPath=[]).push({x,y1,y2})}}},Chart.prototype.renderRangeSplineArea=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var ghostCtx=this._eventManager.ghostCtx,markers=(plotUnit.axisX.lineCoordinates,plotUnit.axisY.lineCoordinates,[]),plotArea=this.plotArea;ctx.save(),isCanvasSupported&&ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor,markers=[];var x,y1,y2,dataPointX,i=0,pixelsY1=[],pixelsY2=[];if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length],lineColor=dataSeries.lineColor=dataSeries.options.lineColor||color,currentStrokeStyle=lineColor;ctx.fillStyle=color,ctx.lineWidth=dataSeries.lineThickness;var lineDashType,currentLineDashType="solid";if(ctx.setLineDash){var nullDataLineDashType=getLineDashArray(dataSeries.nullDataLineDashType,dataSeries.lineThickness);lineDashType=getLineDashArray(currentLineDashType=dataSeries.lineDashType,dataSeries.lineThickness)}for(var prevDataNull=!1;i<dataPoints.length;i++)if(!((dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x)<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax&&(!dataSeries.connectNullData||!prevDataNull)))if(null!==dataPoints[i].y&&dataPoints[i].y.length&&"number"==typeof dataPoints[i].y[0]&&"number"==typeof dataPoints[i].y[1]){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[0]),y2=plotUnit.axisY.convertValueToPixel(dataPoints[i].y[1]);var id=dataSeries.dataPointIds[i];if(this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1:x,y1,y2},pixelsY1[pixelsY1.length]={x,y:y1},pixelsY2[pixelsY2.length]={x,y:y2},i<dataPoints.length-1&&(currentStrokeStyle!==(dataPoints[i].lineColor||lineColor)||currentLineDashType!==(dataPoints[i].lineDashType||dataSeries.lineDashType))&&(currentStrokeStyle=dataPoints[i].lineColor||lineColor,pixelsY1[pixelsY1.length-1].newStrokeStyle=currentStrokeStyle,ctx.setLineDash&&(dataPoints[i].lineDashType?(currentLineDashType=dataPoints[i].lineDashType,pixelsY1[pixelsY1.length-1].newLineDashArray=getLineDashArray(currentLineDashType,dataSeries.lineThickness)):(currentLineDashType=dataSeries.lineDashType,pixelsY1[pixelsY1.length-1].newLineDashArray=lineDashType))),0!==dataPoints[i].markerSize&&(dataPoints[i].markerSize>0||dataSeries.markerSize>0)){(markerProps=dataSeries.getMarkerProperties(i,x,y1,ctx)).color,markers.push(markerProps);var markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y:y1,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});var markerProps=dataSeries.getMarkerProperties(i,x,y2,ctx);markers.push(markerProps);markerColor=intToHexColorString(id);isCanvasSupported&&markers.push({x,y:y2,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness})}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:dataPoints[i],dataSeries,indexKeyword:0,point:{x,y:y1},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?-1:1,color}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:dataPoints[i],dataSeries,indexKeyword:1,point:{x,y:y2},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?1:-1,color})),!1,prevDataNull=!1}else i>0&&!prevDataNull&&(dataSeries.connectNullData?ctx.setLineDash&&pixelsY1.length>0&&(dataSeries.options.nullDataLineDashType||!dataPoints[i-1].lineDashType)&&(pixelsY1[pixelsY1.length-1].newLineDashArray=nullDataLineDashType,currentLineDashType=dataSeries.nullDataLineDashType):(renderBezierArea(lineDashType,lineColor),pixelsY1=[],pixelsY2=[])),prevDataNull=!0;renderBezierArea(lineDashType,lineColor),RenderHelper.drawMarkers(markers)}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0}}function renderBezierArea(lineDashType,lineColor){if((bp=getBezierPoints(pixelsY1,2)).length>0){if(dataSeries.lineThickness>0){ctx.strokeStyle=lineColor,ctx.setLineDash&&ctx.setLineDash(lineDashType),ctx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y);for(var i=0;i<bp.length-3;i+=3)(bp[i].newStrokeStyle||bp[i].newLineDashArray)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(bp[i].x,bp[i].y),bp[i].newStrokeStyle&&(ctx.strokeStyle=bp[i].newStrokeStyle),bp[i].newLineDashArray&&ctx.setLineDash(bp[i].newLineDashArray)),ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y)}ctx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(bp[0].x,bp[0].y));for(i=0;i<bp.length-3;i+=3)ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y),isCanvasSupported&&ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);bp=getBezierPoints(pixelsY2,2),ctx.lineTo(pixelsY2[pixelsY2.length-1].x,pixelsY2[pixelsY2.length-1].y);for(i=bp.length-1;i>2;i-=3)ctx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y),isCanvasSupported&&ghostCtx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y);if(ctx.closePath(),ctx.globalAlpha=dataSeries.fillOpacity,ctx.fill(),isCanvasSupported&&(ghostCtx.closePath(),ghostCtx.fill()),ctx.globalAlpha=1,dataSeries.lineThickness>0){ctx.strokeStyle=lineColor,ctx.setLineDash&&ctx.setLineDash(lineDashType),ctx.beginPath(),ctx.moveTo(bp[0].x,bp[0].y);i=0;for(var j=0;i<bp.length-3;i+=3,j++)(pixelsY1[j].newStrokeStyle||pixelsY1[j].newLineDashArray)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(bp[i].x,bp[i].y),pixelsY1[j].newStrokeStyle&&(ctx.strokeStyle=pixelsY1[j].newStrokeStyle),pixelsY1[j].newLineDashArray&&ctx.setLineDash(pixelsY1[j].newLineDashArray)),ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);var bp=getBezierPoints(pixelsY1,2);ctx.moveTo(bp[0].x,bp[0].y);for(i=0,j=0;i<bp.length-3;i+=3,j++)(pixelsY1[j].newStrokeStyle||pixelsY1[j].newLineDashArray)&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(bp[i].x,bp[i].y),pixelsY1[j].newStrokeStyle&&(ctx.strokeStyle=pixelsY1[j].newStrokeStyle),pixelsY1[j].newLineDashArray&&ctx.setLineDash(pixelsY1[j].newLineDashArray)),ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);ctx.stroke()}ctx.beginPath()}}},Chart.prototype.renderWaterfall=function(plotUnit){var targetCtx=plotUnit.targetCanvasCtx||this.plotArea.ctx,ctx=isCanvasSupported?this._preRenderCtx:targetCtx;if(!(plotUnit.dataSeriesIndexes.length<=0)){var x,y1,y2,dataPointX,ghostCtx=this._eventManager.ghostCtx,color=null,plotArea=this.plotArea,i=0,yZeroToPixel=plotUnit.axisY.convertValueToPixel(plotUnit.axisY.logarithmic?plotUnit.axisY.viewportMinimum:0),minBarWidth=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,maxBarWidth=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/plotUnit.plotType.totalDataSeries*.9)|0,xMinDiff=plotUnit.axisX.dataInfo.minDiff;isFinite(xMinDiff)||(xMinDiff=.3*Math.abs(plotUnit.axisX.range));var barWidth=this.options.dataPointWidth?this.dataPointWidth:plotArea.width*(plotUnit.axisX.logarithmic?Math.log(xMinDiff)/Math.log(plotUnit.axisX.range):Math.abs(xMinDiff)/Math.abs(plotUnit.axisX.range))/plotUnit.plotType.totalDataSeries*.6|0;this.dataPointMaxWidth&&minBarWidth>maxBarWidth&&(minBarWidth=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,maxBarWidth)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&maxBarWidth<minBarWidth&&(maxBarWidth=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,minBarWidth)),barWidth<minBarWidth&&(barWidth=minBarWidth),barWidth>maxBarWidth&&(barWidth=maxBarWidth),ctx.save(),isCanvasSupported&&this._eventManager.ghostCtx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.clip(),isCanvasSupported&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.clip());for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints;color=dataSeries._colorSet[0],dataSeries.risingColor=dataSeries.options.risingColor?dataSeries.options.risingColor:color,dataSeries.fallingColor=dataSeries.options.fallingColor?dataSeries.options.fallingColor:"#e40a0a";var currentLineThickness="number"==typeof dataSeries.options.lineThickness?Math.round(dataSeries.lineThickness):1,currentLineOffset=Math.round(currentLineThickness)%2==1?-.5:0;if(dataPoints.length>0){var bevelEnabled=!!(barWidth>5&&dataSeries.bevelEnabled),prevDataNull=!1,prevX=null,prevY=null;for(i=0;i<dataPoints.length;i++)if(dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x,"number"==typeof dataPoints[i].y){x=plotUnit.axisX.convertValueToPixel(dataPointX),y1=0===dataSeries.dataPointEOs[i].cumulativeSum?yZeroToPixel:plotUnit.axisY.convertValueToPixel(dataSeries.dataPointEOs[i].cumulativeSum),y2=0===dataSeries.dataPointEOs[i].cumulativeSumYStartValue?yZeroToPixel:plotUnit.axisY.convertValueToPixel(dataSeries.dataPointEOs[i].cumulativeSumYStartValue);var x1=plotUnit.axisX.reversed?x+plotUnit.plotType.totalDataSeries*barWidth/2-(plotUnit.previousDataSeriesCount+j)*barWidth|0:x-plotUnit.plotType.totalDataSeries*barWidth/2+(plotUnit.previousDataSeriesCount+j)*barWidth|0,x2=plotUnit.axisX.reversed?x1-barWidth|0:x1+barWidth|0;if(y1>y2){var temp=y1;y1=y2,y2=temp}if(plotUnit.axisY.reversed){temp=y1;y1=y2,y2=temp}var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id,objectType:"dataPoint",dataSeriesIndex,dataPointIndex:i,x1,y1,x2,y2};var currentX,currentY,barColor=dataPoints[i].color?dataPoints[i].color:dataPoints[i].y>0?dataSeries.risingColor:dataSeries.fallingColor;drawRect(ctx,x1,y1,x2,y2,barColor,0,barColor,bevelEnabled,bevelEnabled,!1,!1,dataSeries.fillOpacity),color=intToHexColorString(id),isCanvasSupported&&drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,!1,!1,!1,!1),currentX=x1,currentY=void 0!==dataPoints[i].isIntermediateSum&&!0===dataPoints[i].isIntermediateSum||void 0!==dataPoints[i].isCumulativeSum&&!0===dataPoints[i].isCumulativeSum?dataPoints[i].y>0?y1:y2:dataPoints[i].y>0?y2:y1,i>0&&prevX&&(prevDataNull&&!dataSeries.connectNullData||(prevDataNull&&ctx.setLineDash&&ctx.setLineDash(getLineDashArray(nullDataLineDashType,currentLineThickness)),ctx.beginPath(),ctx.moveTo(prevX,prevY-currentLineOffset),ctx.lineTo(currentX,currentY-currentLineOffset),currentLineThickness>0&&ctx.stroke(),isCanvasSupported&&(ghostCtx.beginPath(),ghostCtx.moveTo(prevX,prevY-currentLineOffset),ghostCtx.lineTo(currentX,currentY-currentLineOffset),currentLineThickness>0&&ghostCtx.stroke()))),prevDataNull=!1,prevX=x2,prevY=dataPoints[i].y>0?y1:y2;var currentLineDashType=dataPoints[i].lineDashType?dataPoints[i].lineDashType:dataSeries.options.lineDashType?dataSeries.options.lineDashType:"shortDash",currentStrokeStyle=dataPoints[i].lineColor?dataPoints[i].lineColor:dataSeries.options.lineColor?dataSeries.options.lineColor:"#9e9e9e";if(ctx.strokeStyle=currentStrokeStyle,ctx.lineWidth=currentLineThickness,ctx.setLineDash){var lineDashType=getLineDashArray(currentLineDashType,currentLineThickness);ctx.setLineDash(lineDashType)}(dataPoints[i].indexLabel||dataSeries.indexLabel||dataPoints[i].indexLabelFormatter||dataSeries.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:dataPoints[i],dataSeries,point:{x:x1+(x2-x1)/2,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y<0===plotUnit.axisY.reversed?1:-1,bounds:{x1,y1:Math.min(y1,y2),x2,y2:Math.max(y1,y2)},color})}else{if(i>0&&!prevDataNull&&dataSeries.connectNullData)var nullDataLineDashType=dataSeries.options.nullDataLineDashType||!dataPoints[i-1].lineDashType?dataSeries.nullDataLineDashType:dataPoints[i-1].lineDashType;prevDataNull=!0}}}return isCanvasSupported&&(targetCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.globalCompositeOperation="source-atop",plotUnit.axisX.maskCanvas&&ctx.drawImage(plotUnit.axisX.maskCanvas,0,0,this.width,this.height),plotUnit.axisY.maskCanvas&&ctx.drawImage(plotUnit.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),this._eventManager.ghostCtx.restore()),ctx.restore(),{source:targetCtx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}};var drawSegment=function(ctx,center,radius,color,type,theta1,theta2,fillOpacity,percentInnerRadius){if(!(radius<0)){if(void 0===fillOpacity&&(fillOpacity=1),!isCanvasSupported){var theta2Mod=Number((theta2%(2*Math.PI)).toFixed(8));Number((theta1%(2*Math.PI)).toFixed(8))===theta2Mod&&(theta2-=1e-4)}ctx.save(),ctx.globalAlpha=fillOpacity,"pie"===type?(ctx.beginPath(),ctx.moveTo(center.x,center.y),ctx.arc(center.x,center.y,radius,theta1,theta2,!1),ctx.fillStyle=color,ctx.strokeStyle="white",ctx.lineWidth=2,ctx.closePath(),ctx.fill()):"doughnut"===type&&(ctx.beginPath(),ctx.arc(center.x,center.y,radius,theta1,theta2,!1),percentInnerRadius>=0&&ctx.arc(center.x,center.y,percentInnerRadius*radius,theta2,theta1,!0),ctx.closePath(),ctx.fillStyle=color,ctx.strokeStyle="white",ctx.lineWidth=2,ctx.fill()),ctx.globalAlpha=1,ctx.restore()}};Chart.prototype.renderPie=function(plotUnit){var _this=this;if(!(plotUnit.dataSeriesIndexes.length<=0)){for(var indexLabelRadius,dataSeriesIndex=plotUnit.dataSeriesIndexes[0],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,indexLabelLineEdgeLength=10,plotArea=this.plotArea,dataPointEOs=dataSeries.dataPointEOs,minDistanceBetweenLabels=2,poleAnglularDistance=20/180*Math.PI,precision=6,center={x:(plotArea.x2+plotArea.x1)/2,y:(plotArea.y2+plotArea.y1)/2},sum=0,isIndexLabelPresent=!1,j=0;j<dataPoints.length;j++)sum+=Math.abs(dataPoints[j].y),!isIndexLabelPresent&&void 0!==dataPoints[j].indexLabel&&null!==dataPoints[j].indexLabel&&dataPoints[j].indexLabel.toString().length>0&&(isIndexLabelPresent=!0),!isIndexLabelPresent&&void 0!==dataPoints[j].label&&null!==dataPoints[j].label&&dataPoints[j].label.toString().length>0&&(isIndexLabelPresent=!0);if(0!==sum){isIndexLabelPresent=isIndexLabelPresent||void 0!==dataSeries.indexLabel&&null!==dataSeries.indexLabel&&dataSeries.indexLabel.toString().length>0;var outerRadius="inside"!==dataSeries.indexLabelPlacement&&isIndexLabelPresent?.75*Math.min(plotArea.width,plotArea.height)/2:.92*Math.min(plotArea.width,plotArea.height)/2;dataSeries.radius&&(outerRadius=convertPercentToValue(dataSeries.radius,outerRadius));var innerRadius=void 0!==dataSeries.innerRadius&&null!==dataSeries.innerRadius?convertPercentToValue(dataSeries.innerRadius,outerRadius):.7*outerRadius;dataSeries.radius=outerRadius,"doughnut"===dataSeries.type&&(dataSeries.innerRadius=innerRadius);var percentInnerRadius=Math.min(innerRadius/outerRadius,(outerRadius-1)/outerRadius);this.pieDoughnutClickHandler=function(e){if(!_this.isAnimating&&(isNullOrUndefined(e.dataSeries.explodeOnClick)||e.dataSeries.explodeOnClick)){var i=e.dataPointIndex,dataPoint=e.dataPoint;this.dataPointIds[i];dataPoint.exploded?dataPoint.exploded=!1:dataPoint.exploded=!0,this.dataPoints.length>1&&_this._animator.animate(0,500,(function(fractionComplete){explodeToggle(fractionComplete),renderChartElementsInPlotArea()}))}},function initLabels(){if(dataSeries&&dataPoints){for(var noDPNearSouthPole=0,noDPNearNorthPole=0,firstDPCloseToSouth=0,firstDPCloseToNorth=0,j=0;j<dataPoints.length;j++){var dataPoint=dataPoints[j],id=dataSeries.dataPointIds[j];dataPointEOs[j].id=id,dataPointEOs[j].objectType="dataPoint",dataPointEOs[j].dataPointIndex=j,dataPointEOs[j].dataSeriesIndex=0;var percentAndTotal,dataPointEO=dataPointEOs[j],formatterParameter=null;percentAndTotal=_this.getPercentAndTotal(dataSeries,dataPoint),(dataSeries.indexLabelFormatter||dataPoint.indexLabelFormatter)&&(formatterParameter={chart:_this.options,dataSeries,dataPoint,total:percentAndTotal.total,percent:percentAndTotal.percent});var indexLabelText=dataPoint.indexLabelFormatter?dataPoint.indexLabelFormatter(formatterParameter):dataPoint.indexLabel?_this.replaceKeywordsWithValue(dataPoint.indexLabel,dataPoint,dataSeries,j):dataSeries.indexLabelFormatter?dataSeries.indexLabelFormatter(formatterParameter):dataSeries.indexLabel?_this.replaceKeywordsWithValue(dataSeries.indexLabel,dataPoint,dataSeries,j):dataPoint.label?dataPoint.label:"";_this._eventManager.objectMap[id]=dataPointEO,dataPointEO.center={x:center.x,y:center.y},dataPointEO.y=dataPoint.y,dataPointEO.radius=outerRadius,dataPointEO.percentInnerRadius=percentInnerRadius,dataPointEO.indexLabelText=indexLabelText,dataPointEO.indexLabelPlacement=dataSeries.indexLabelPlacement,dataPointEO.indexLabelLineColor=dataPoint.indexLabelLineColor?dataPoint.indexLabelLineColor:dataSeries.options.indexLabelLineColor?dataSeries.options.indexLabelLineColor:dataPoint.color?dataPoint.color:dataSeries._colorSet[j%dataSeries._colorSet.length],dataPointEO.indexLabelLineThickness=isNullOrUndefined(dataPoint.indexLabelLineThickness)?dataSeries.indexLabelLineThickness:dataPoint.indexLabelLineThickness,dataPointEO.indexLabelLineDashType=dataPoint.indexLabelLineDashType?dataPoint.indexLabelLineDashType:dataSeries.indexLabelLineDashType,dataPointEO.indexLabelFontColor=dataPoint.indexLabelFontColor?dataPoint.indexLabelFontColor:dataSeries.indexLabelFontColor,dataPointEO.indexLabelFontStyle=dataPoint.indexLabelFontStyle?dataPoint.indexLabelFontStyle:dataSeries.indexLabelFontStyle,dataPointEO.indexLabelFontWeight=dataPoint.indexLabelFontWeight?dataPoint.indexLabelFontWeight:dataSeries.indexLabelFontWeight,dataPointEO.indexLabelFontSize=isNullOrUndefined(dataPoint.indexLabelFontSize)?dataSeries.indexLabelFontSize:dataPoint.indexLabelFontSize,dataPointEO.indexLabelFontFamily=dataPoint.indexLabelFontFamily?dataPoint.indexLabelFontFamily:dataSeries.indexLabelFontFamily,dataPointEO.indexLabelBackgroundColor=dataPoint.indexLabelBackgroundColor?dataPoint.indexLabelBackgroundColor:dataSeries.options.indexLabelBackgroundColor?dataSeries.options.indexLabelBackgroundColor:dataSeries.indexLabelBackgroundColor,dataPointEO.indexLabelMaxWidth=dataPoint.indexLabelMaxWidth?dataPoint.indexLabelMaxWidth:dataSeries.indexLabelMaxWidth?dataSeries.indexLabelMaxWidth:.33*plotArea.width,dataPointEO.indexLabelWrap=void 0!==dataPoint.indexLabelWrap?dataPoint.indexLabelWrap:dataSeries.indexLabelWrap,dataPointEO.startAngle=0===j?dataSeries.startAngle?dataSeries.startAngle/180*Math.PI:0:dataPointEOs[j-1].endAngle,dataPointEO.startAngle=(dataPointEO.startAngle+2*Math.PI)%(2*Math.PI),dataPointEO.endAngle=dataPointEO.startAngle+2*Math.PI/sum*Math.abs(dataPoint.y);var midAngle=(dataPointEO.endAngle+dataPointEO.startAngle)/2;midAngle=(midAngle+2*Math.PI)%(2*Math.PI),dataPointEO.midAngle=midAngle,dataPointEO.midAngle>Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<Math.PI/2+poleAnglularDistance?((0===noDPNearSouthPole||dataPointEOs[firstDPCloseToSouth].midAngle>dataPointEO.midAngle)&&(firstDPCloseToSouth=j),noDPNearSouthPole++):dataPointEO.midAngle>3*Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<3*Math.PI/2+poleAnglularDistance&&((0===noDPNearNorthPole||dataPointEOs[firstDPCloseToNorth].midAngle>dataPointEO.midAngle)&&(firstDPCloseToNorth=j),noDPNearNorthPole++),midAngle>Math.PI/2&&midAngle<=3*Math.PI/2?dataPointEO.hemisphere="left":dataPointEO.hemisphere="right",dataPointEO.indexLabelTextBlock=new TextBlock(_this.plotArea.ctx,{fontSize:dataPointEO.indexLabelFontSize,fontFamily:dataPointEO.indexLabelFontFamily,fontColor:dataPointEO.indexLabelFontColor,fontStyle:dataPointEO.indexLabelFontStyle,fontWeight:dataPointEO.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:dataPointEO.indexLabelBackgroundColor,maxWidth:dataPointEO.indexLabelMaxWidth,maxHeight:dataPointEO.indexLabelWrap?5*dataPointEO.indexLabelFontSize:1.5*dataPointEO.indexLabelFontSize,text:dataPointEO.indexLabelText,padding:0,textBaseline:"top"}),dataPointEO.indexLabelTextBlock.measureText()}var noOfDPToRightOfSouthPole=0,noOfDPToLeftOfNorthPole=0,keepSameDirection=!1;for(j=0;j<dataPoints.length;j++){dataPointEO=dataPointEOs[(firstDPCloseToSouth+j)%dataPoints.length];noDPNearSouthPole>1&&dataPointEO.midAngle>Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<Math.PI/2+poleAnglularDistance&&(noOfDPToRightOfSouthPole<=noDPNearSouthPole/2&&!keepSameDirection?(dataPointEO.hemisphere="right",noOfDPToRightOfSouthPole++):(dataPointEO.hemisphere="left",keepSameDirection=!0))}keepSameDirection=!1;for(j=0;j<dataPoints.length;j++){dataPointEO=dataPointEOs[(firstDPCloseToNorth+j)%dataPoints.length];noDPNearNorthPole>1&&dataPointEO.midAngle>3*Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<3*Math.PI/2+poleAnglularDistance&&(noOfDPToLeftOfNorthPole<=noDPNearNorthPole/2&&!keepSameDirection?(dataPointEO.hemisphere="left",noOfDPToLeftOfNorthPole++):(dataPointEO.hemisphere="right",keepSameDirection=!0))}}}(),positionLabels(),positionLabels(),positionLabels(),positionLabels(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,(function(fractionComplete){!function animate(fractionComplete){var ctx=_this.plotArea.ctx;ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.fillStyle=_this.backgroundColor,ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);for(var maxAngle=dataPointEOs[0].startAngle+2*Math.PI*fractionComplete,i=0;i<dataPoints.length;i++){var startAngle=0===i?dataPointEOs[i].startAngle:endAngle,endAngle=startAngle+(dataPointEOs[i].endAngle-dataPointEOs[i].startAngle),shouldBreak=!1;endAngle>maxAngle&&(endAngle=maxAngle,shouldBreak=!0);var color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];if(endAngle>startAngle&&drawSegment(_this.plotArea.ctx,dataPointEOs[i].center,dataPointEOs[i].radius,color,dataSeries.type,startAngle,endAngle,dataSeries.fillOpacity,dataPointEOs[i].percentInnerRadius),shouldBreak)break}}(fractionComplete),renderChartElementsInPlotArea()}),(function(){_this.disableToolTip=!1,_this._animator.animate(0,_this.animatedRender?500:0,(function(fractionComplete){explodeToggle(fractionComplete),renderChartElementsInPlotArea()}))}))}}function explodeToggle(fractionComplete){var ctx=_this.plotArea.ctx;ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.fillStyle=_this.backgroundColor,ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);for(var i=0;i<dataPoints.length;i++){var startAngle=dataPointEOs[i].startAngle,endAngle=dataPointEOs[i].endAngle;if(endAngle>startAngle){var offsetX=.07*outerRadius*Math.cos(dataPointEOs[i].midAngle),offsetY=.07*outerRadius*Math.sin(dataPointEOs[i].midAngle),isInTransition=!1;if(dataPoints[i].exploded?(Math.abs(dataPointEOs[i].center.x-(center.x+offsetX))>1e-9||Math.abs(dataPointEOs[i].center.y-(center.y+offsetY))>1e-9)&&(dataPointEOs[i].center.x=center.x+offsetX*fractionComplete,dataPointEOs[i].center.y=center.y+offsetY*fractionComplete,isInTransition=!0):(Math.abs(dataPointEOs[i].center.x-center.x)>0||Math.abs(dataPointEOs[i].center.y-center.y)>0)&&(dataPointEOs[i].center.x=center.x+offsetX*(1-fractionComplete),dataPointEOs[i].center.y=center.y+offsetY*(1-fractionComplete),isInTransition=!0),isInTransition){var entry={};entry.dataSeries=dataSeries,entry.dataPoint=dataSeries.dataPoints[i],entry.index=i,_this.toolTip.highlightObjects([entry])}var color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawSegment(_this.plotArea.ctx,dataPointEOs[i].center,dataPointEOs[i].radius,color,dataSeries.type,startAngle,endAngle,dataSeries.fillOpacity,dataPointEOs[i].percentInnerRadius)}}!function renderLabels(){var ctx=_this.plotArea.ctx;ctx.save(),ctx.fillStyle="black",ctx.strokeStyle="grey",ctx.textBaseline="middle",ctx.lineJoin="round";var i=0;for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i];if(dataPointEO.indexLabelText){dataPointEO.indexLabelTextBlock.y-=dataPointEO.indexLabelTextBlock.height/2;var xOffset=0;if(xOffset="left"===dataPointEO.hemisphere?"inside"!==dataSeries.indexLabelPlacement?-(dataPointEO.indexLabelTextBlock.width+indexLabelLineEdgeLength):-dataPointEO.indexLabelTextBlock.width/2:"inside"!==dataSeries.indexLabelPlacement?indexLabelLineEdgeLength:-dataPointEO.indexLabelTextBlock.width/2,dataPointEO.indexLabelTextBlock.x+=xOffset,dataPointEO.indexLabelTextBlock.render(!0),dataPointEO.indexLabelTextBlock.x-=xOffset,dataPointEO.indexLabelTextBlock.y+=dataPointEO.indexLabelTextBlock.height/2,"inside"!==dataPointEO.indexLabelPlacement&&dataPointEO.indexLabelLineThickness>0){var indexLabelLineStartX=dataPointEO.center.x+outerRadius*Math.cos(dataPointEO.midAngle),indexLabelLineStartY=dataPointEO.center.y+outerRadius*Math.sin(dataPointEO.midAngle);ctx.strokeStyle=dataPointEO.indexLabelLineColor,ctx.lineWidth=dataPointEO.indexLabelLineThickness,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(dataPointEO.indexLabelLineDashType,dataPointEO.indexLabelLineThickness)),ctx.beginPath(),ctx.moveTo(indexLabelLineStartX,indexLabelLineStartY),ctx.lineTo(dataPointEO.indexLabelTextBlock.x,dataPointEO.indexLabelTextBlock.y),ctx.lineTo(dataPointEO.indexLabelTextBlock.x+("left"===dataPointEO.hemisphere?-indexLabelLineEdgeLength:indexLabelLineEdgeLength),dataPointEO.indexLabelTextBlock.y),ctx.stroke()}ctx.lineJoin="miter"}}ctx.save()}()}function getVerticalDistanceBetweenLabels(first,second){var label1_y=first.indexLabelTextBlock.y,label1_y1=first.indexLabelTextBlock.y-first.indexLabelTextBlock.height/2,label1_y2=first.indexLabelTextBlock.y+first.indexLabelTextBlock.height/2,label2_y=second.indexLabelTextBlock.y,label2_y1=second.indexLabelTextBlock.y-second.indexLabelTextBlock.height/2,label2_y2=second.indexLabelTextBlock.y+second.indexLabelTextBlock.height/2;return label2_y>label1_y?label2_y1-label1_y2:label1_y1-label2_y2}function getNextLabelIndex(currentLabelIndex){for(var nextLabelIndex=null,i=1;i<dataPoints.length;i++){if(nextLabelIndex=(currentLabelIndex+i+dataPointEOs.length)%dataPointEOs.length,dataPointEOs[nextLabelIndex].hemisphere!==dataPointEOs[currentLabelIndex].hemisphere){nextLabelIndex=null;break}if(dataPointEOs[nextLabelIndex].indexLabelText&&nextLabelIndex!==currentLabelIndex&&(getVerticalDistanceBetweenLabels(dataPointEOs[nextLabelIndex],dataPointEOs[currentLabelIndex])<0||("right"===dataPointEOs[currentLabelIndex].hemisphere?dataPointEOs[nextLabelIndex].indexLabelTextBlock.y>=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y:dataPointEOs[nextLabelIndex].indexLabelTextBlock.y<=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y)))break;nextLabelIndex=null}return nextLabelIndex}function rePositionLabels(dataPointIndex,offset,recursionCount){if((recursionCount=(recursionCount||0)+1)>1e3)return 0;offset=offset||0;var actualOffset=0,labelYMin=center.y-1*indexLabelRadius,labelYMax=center.y+1*indexLabelRadius;if(dataPointIndex>=0&&dataPointIndex<dataPoints.length){var dataPointEO=dataPointEOs[dataPointIndex];if(offset<0&&dataPointEO.indexLabelTextBlock.y<labelYMin||offset>0&&dataPointEO.indexLabelTextBlock.y>labelYMax)return 0;var distFromIndexLineStart,indexLabelLineStartX,indexLabelLineStartY,indexLabelAngleWhenTangent,validOffset=offset;validOffset<0?dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2>labelYMin&&dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2+validOffset<labelYMin&&(validOffset=-(labelYMin-(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2+validOffset))):dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2<labelYMin&&dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2+validOffset>labelYMax&&(validOffset=dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2+validOffset-labelYMax);var newlabelY=dataPointEO.indexLabelTextBlock.y+validOffset,newlabelX=0;newlabelX="right"===dataPointEO.hemisphere?center.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newlabelY-center.y,2)):center.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newlabelY-center.y,2)),indexLabelLineStartX=center.x+outerRadius*Math.cos(dataPointEO.midAngle),indexLabelLineStartY=center.y+outerRadius*Math.sin(dataPointEO.midAngle),distFromIndexLineStart=Math.sqrt(Math.pow(newlabelX-indexLabelLineStartX,2)+Math.pow(newlabelY-indexLabelLineStartY,2)),indexLabelAngleWhenTangent=Math.acos(outerRadius/indexLabelRadius),validOffset=Math.acos((indexLabelRadius*indexLabelRadius+outerRadius*outerRadius-distFromIndexLineStart*distFromIndexLineStart)/(2*outerRadius*indexLabelRadius))<indexLabelAngleWhenTangent?newlabelY-dataPointEO.indexLabelTextBlock.y:0;var otherDataPointIndex,prevDataPointIndex=function getPreviousLabelIndex(currentLabelIndex){for(var prevLabelIndex=null,i=1;i<dataPoints.length;i++){if(prevLabelIndex=(currentLabelIndex-i+dataPointEOs.length)%dataPointEOs.length,dataPointEOs[prevLabelIndex].hemisphere!==dataPointEOs[currentLabelIndex].hemisphere){prevLabelIndex=null;break}if(dataPointEOs[prevLabelIndex].indexLabelText&&dataPointEOs[prevLabelIndex].hemisphere===dataPointEOs[currentLabelIndex].hemisphere&&prevLabelIndex!==currentLabelIndex&&(getVerticalDistanceBetweenLabels(dataPointEOs[prevLabelIndex],dataPointEOs[currentLabelIndex])<0||("right"===dataPointEOs[currentLabelIndex].hemisphere?dataPointEOs[prevLabelIndex].indexLabelTextBlock.y<=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y:dataPointEOs[prevLabelIndex].indexLabelTextBlock.y>=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y)))break;prevLabelIndex=null}return prevLabelIndex}(dataPointIndex),nextDataPointIndex=getNextLabelIndex(dataPointIndex),otherDataPointOffset=0,otherDataPointActualOffset=0;if(validOffset<0){if(actualOffset=validOffset,null!==(otherDataPointIndex="right"===dataPointEO.hemisphere?prevDataPointIndex:nextDataPointIndex)){var tempOffset=-validOffset;(distanceFromOtherLabel=dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2-(dataPointEOs[otherDataPointIndex].indexLabelTextBlock.y+dataPointEOs[otherDataPointIndex].indexLabelTextBlock.height/2))-tempOffset<minDistanceBetweenLabels&&+(otherDataPointActualOffset=rePositionLabels(otherDataPointIndex,otherDataPointOffset=-tempOffset,recursionCount+1)).toFixed(precision)>+otherDataPointOffset.toFixed(precision)&&(actualOffset=distanceFromOtherLabel>minDistanceBetweenLabels?-(distanceFromOtherLabel-minDistanceBetweenLabels):-(tempOffset-(otherDataPointActualOffset-otherDataPointOffset)))}}else if(validOffset>0&&(actualOffset=validOffset,null!==(otherDataPointIndex="right"===dataPointEO.hemisphere?nextDataPointIndex:prevDataPointIndex))){var distanceFromOtherLabel;tempOffset=validOffset;(distanceFromOtherLabel=dataPointEOs[otherDataPointIndex].indexLabelTextBlock.y-dataPointEOs[otherDataPointIndex].indexLabelTextBlock.height/2-(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2))-tempOffset<minDistanceBetweenLabels&&+(otherDataPointActualOffset=rePositionLabels(otherDataPointIndex,otherDataPointOffset=tempOffset,recursionCount+1)).toFixed(precision)<+otherDataPointOffset.toFixed(precision)&&(actualOffset=distanceFromOtherLabel>minDistanceBetweenLabels?distanceFromOtherLabel-minDistanceBetweenLabels:tempOffset-(otherDataPointOffset-otherDataPointActualOffset))}if(actualOffset){var newLabelY=dataPointEO.indexLabelTextBlock.y+actualOffset,newLabelX=0;if(newLabelX="right"===dataPointEO.hemisphere?center.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newLabelY-center.y,2)):center.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newLabelY-center.y,2)),dataPointEO.midAngle>Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<Math.PI/2+poleAnglularDistance){var prevDPIndex=(dataPointIndex-1+dataPointEOs.length)%dataPointEOs.length,prevDP=dataPointEOs[prevDPIndex],nextDP=dataPointEOs[(dataPointIndex+1+dataPointEOs.length)%dataPointEOs.length];"left"===dataPointEO.hemisphere&&"right"===prevDP.hemisphere&&newLabelX>prevDP.indexLabelTextBlock.x?newLabelX=prevDP.indexLabelTextBlock.x-15:"right"===dataPointEO.hemisphere&&"left"===nextDP.hemisphere&&newLabelX<nextDP.indexLabelTextBlock.x&&(newLabelX=nextDP.indexLabelTextBlock.x+15)}else if(dataPointEO.midAngle>3*Math.PI/2-poleAnglularDistance&&dataPointEO.midAngle<3*Math.PI/2+poleAnglularDistance){prevDPIndex=(dataPointIndex-1+dataPointEOs.length)%dataPointEOs.length,prevDP=dataPointEOs[prevDPIndex],nextDP=dataPointEOs[(dataPointIndex+1+dataPointEOs.length)%dataPointEOs.length];"right"===dataPointEO.hemisphere&&"left"===prevDP.hemisphere&&newLabelX<prevDP.indexLabelTextBlock.x?newLabelX=prevDP.indexLabelTextBlock.x+15:"left"===dataPointEO.hemisphere&&"right"===nextDP.hemisphere&&newLabelX>nextDP.indexLabelTextBlock.x&&(newLabelX=nextDP.indexLabelTextBlock.x-15)}dataPointEO.indexLabelTextBlock.y=newLabelY,dataPointEO.indexLabelTextBlock.x=newLabelX,dataPointEO.indexLabelAngle=Math.atan2(dataPointEO.indexLabelTextBlock.y-center.y,dataPointEO.indexLabelTextBlock.x-center.x)}}return actualOffset}function positionLabels(){var ctx=_this.plotArea.ctx;ctx.fillStyle="grey",ctx.strokeStyle="grey";ctx.font="16px Arial",ctx.textBaseline="middle";var i=0,j=0,deltaR=0,resizeFlag=!0;for(j=0;j<10&&(j<1||deltaR>0);j++){if((dataSeries.radius||!dataSeries.radius&&void 0!==dataSeries.innerRadius&&null!==dataSeries.innerRadius&&outerRadius-deltaR<=innerRadius)&&(resizeFlag=!1),resizeFlag&&(outerRadius-=deltaR),deltaR=0,"inside"!==dataSeries.indexLabelPlacement){for(indexLabelRadius=1.3*outerRadius,i=0;i<dataPoints.length;i++){(dataPointEO=dataPointEOs[i]).indexLabelTextBlock.x=center.x+indexLabelRadius*Math.cos(dataPointEO.midAngle),dataPointEO.indexLabelTextBlock.y=center.y+indexLabelRadius*Math.sin(dataPointEO.midAngle),dataPointEO.indexLabelAngle=dataPointEO.midAngle,dataPointEO.radius=outerRadius,dataPointEO.percentInnerRadius=percentInnerRadius}var currentDataPoint,nextDataPoint;for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i],nextDataPointIndex=getNextLabelIndex(i);if(null!==nextDataPointIndex){currentDataPoint=dataPointEOs[i],nextDataPoint=dataPointEOs[nextDataPointIndex];var distanceFromNextLabel=0;if((distanceFromNextLabel=getVerticalDistanceBetweenLabels(currentDataPoint,nextDataPoint)-minDistanceBetweenLabels)<0){for(var dataPointsAbove=0,dataPointsBelow=0,k=0;k<dataPoints.length;k++)k!==i&&dataPointEOs[k].hemisphere===dataPointEO.hemisphere&&(dataPointEOs[k].indexLabelTextBlock.y<dataPointEO.indexLabelTextBlock.y?dataPointsAbove++:dataPointsBelow++);var upWardsOffset=distanceFromNextLabel/(dataPointsAbove+dataPointsBelow||1)*dataPointsBelow,downWardsOffset=-1*(distanceFromNextLabel-upWardsOffset),actualUpwardOffset=0,actualDownwardOffset=0;"right"===dataPointEO.hemisphere?(actualUpwardOffset=rePositionLabels(i,upWardsOffset),+(actualDownwardOffset=rePositionLabels(nextDataPointIndex,downWardsOffset=-1*(distanceFromNextLabel-actualUpwardOffset))).toFixed(precision)<+downWardsOffset.toFixed(precision)&&+actualUpwardOffset.toFixed(precision)<=+upWardsOffset.toFixed(precision)&&rePositionLabels(i,-(downWardsOffset-actualDownwardOffset))):(actualUpwardOffset=rePositionLabels(nextDataPointIndex,upWardsOffset),+(actualDownwardOffset=rePositionLabels(i,downWardsOffset=-1*(distanceFromNextLabel-actualUpwardOffset))).toFixed(precision)<+downWardsOffset.toFixed(precision)&&+actualUpwardOffset.toFixed(precision)<=+upWardsOffset.toFixed(precision)&&rePositionLabels(nextDataPointIndex,-(downWardsOffset-actualDownwardOffset)))}}}}else for(i=0;i<dataPoints.length;i++){dataPointEO=dataPointEOs[i];indexLabelRadius="pie"===dataSeries.type?.7*outerRadius:.8*outerRadius;var dx=center.x+indexLabelRadius*Math.cos(dataPointEO.midAngle),dy=center.y+indexLabelRadius*Math.sin(dataPointEO.midAngle);dataPointEO.indexLabelTextBlock.x=dx,dataPointEO.indexLabelTextBlock.y=dy}for(i=0;i<dataPoints.length;i++){var size=(dataPointEO=dataPointEOs[i]).indexLabelTextBlock.measureText();if(0!==size.height&&0!==size.width){var xOverflow=0,xdr=0;if("right"===dataPointEO.hemisphere?(xOverflow=plotArea.x2-(dataPointEO.indexLabelTextBlock.x+dataPointEO.indexLabelTextBlock.width+indexLabelLineEdgeLength),xOverflow*=-1):xOverflow=plotArea.x1-(dataPointEO.indexLabelTextBlock.x-dataPointEO.indexLabelTextBlock.width-indexLabelLineEdgeLength),xOverflow>0){if(!resizeFlag&&dataPointEO.indexLabelText){var newIndexLabelMaxWidth="right"===dataPointEO.hemisphere?plotArea.x2-dataPointEO.indexLabelTextBlock.x:dataPointEO.indexLabelTextBlock.x-plotArea.x1;.3*dataPointEO.indexLabelTextBlock.maxWidth>newIndexLabelMaxWidth?dataPointEO.indexLabelText="":dataPointEO.indexLabelTextBlock.maxWidth=.85*newIndexLabelMaxWidth,.3*dataPointEO.indexLabelTextBlock.maxWidth<newIndexLabelMaxWidth&&(dataPointEO.indexLabelTextBlock.x-="right"===dataPointEO.hemisphere?2:-2)}(Math.abs(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2-center.y)<outerRadius||Math.abs(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2-center.y)<outerRadius)&&((xdr=xOverflow/Math.abs(Math.cos(dataPointEO.indexLabelAngle)))>9&&(xdr*=.3),xdr>deltaR&&(deltaR=xdr))}var yOverflow=0,ydr=0;if(dataPointEO.indexLabelAngle>0&&dataPointEO.indexLabelAngle<Math.PI?(yOverflow=plotArea.y2-(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height/2+5),yOverflow*=-1):yOverflow=plotArea.y1-(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height/2-5),yOverflow>0){if(!resizeFlag&&dataPointEO.indexLabelText){var positionMultiplier=dataPointEO.indexLabelAngle>0&&dataPointEO.indexLabelAngle<Math.PI?-1:1;0===rePositionLabels(i,yOverflow*positionMultiplier)&&rePositionLabels(i,2*positionMultiplier)}Math.abs(dataPointEO.indexLabelTextBlock.x-center.x)<outerRadius&&((ydr=yOverflow/Math.abs(Math.sin(dataPointEO.indexLabelAngle)))>9&&(ydr*=.3),ydr>deltaR&&(deltaR=ydr))}}}function removeLabelsForSmallSegments(totalOverlap,startIndex,endIndex){for(var dpEOs=[],totalRemovedLabelHeight=0,i=startIndex;dpEOs.push(dataPointEOs[i]),i!==endIndex;i=(i+1+dataPoints.length)%dataPoints.length);dpEOs.sort((function(entry1,entry2){return entry1.y-entry2.y}));for(i=0;i<dpEOs.length;i++){var dpEO=dpEOs[i];if(!(totalRemovedLabelHeight<.7*totalOverlap))break;totalRemovedLabelHeight+=dpEO.indexLabelTextBlock.height,dpEO.indexLabelTextBlock.text="",dpEO.indexLabelText="",dpEO.indexLabelTextBlock.measureText()}}function skipLabels(){for(var first,second,label1_x1,label1_y1,label1_x2,label1_y2,label2_x1,label2_y1,label2_x2,label2_y2,overlapStartIndex=-1,overlapEndIndex=-1,totalOverlap=0,removeLabels=!1,k=0;k<dataPoints.length;k++)if(removeLabels=!1,(currentDataPoint=dataPointEOs[k]).indexLabelText){var nextLabelIndex=getNextLabelIndex(k);if(null!==nextLabelIndex){var nextDataPoint=dataPointEOs[nextLabelIndex];distanceFromNextLabel=0,(distanceFromNextLabel=getVerticalDistanceBetweenLabels(currentDataPoint,nextDataPoint))<0&&(second=nextDataPoint,label1_x1=void 0,label1_y1=void 0,label1_x2=void 0,label1_y2=void 0,label2_x1=void 0,label2_y1=void 0,label2_x2=void 0,label2_y2=void 0,label1_x1=(first=currentDataPoint).indexLabelTextBlock.x,label1_y1=first.indexLabelTextBlock.y-first.indexLabelTextBlock.height/2,label1_x2=first.indexLabelTextBlock.x+first.indexLabelTextBlock.width,label1_y2=first.indexLabelTextBlock.y+first.indexLabelTextBlock.height/2,label2_x1=second.indexLabelTextBlock.x,label2_y1=second.indexLabelTextBlock.y-second.indexLabelTextBlock.height/2,label2_x2=second.indexLabelTextBlock.x+second.indexLabelTextBlock.width,label2_y2=second.indexLabelTextBlock.y+second.indexLabelTextBlock.height/2,!(label1_x2<label2_x1-indexLabelLineEdgeLength||label1_x1>label2_x2+indexLabelLineEdgeLength||label1_y1>label2_y2+indexLabelLineEdgeLength||label1_y2<label2_y1-indexLabelLineEdgeLength))?(overlapStartIndex<0&&(overlapStartIndex=k),nextLabelIndex!==overlapStartIndex&&(overlapEndIndex=nextLabelIndex,totalOverlap+=-distanceFromNextLabel),k%Math.max(dataPoints.length/10,3)==0&&(removeLabels=!0)):removeLabels=!0,removeLabels&&totalOverlap>0&&overlapStartIndex>=0&&overlapEndIndex>=0&&(removeLabelsForSmallSegments(totalOverlap,overlapStartIndex,overlapEndIndex),overlapStartIndex=-1,overlapEndIndex=-1,totalOverlap=0)}}totalOverlap>0&&removeLabelsForSmallSegments(totalOverlap,overlapStartIndex,overlapEndIndex)}skipLabels()}}function renderChartElementsInPlotArea(){if(_this.plotArea.layoutManager.reset(),_this.title&&(_this.title.dockInsidePlotArea||"center"===_this.title.horizontalAlign&&"center"===_this.title.verticalAlign)&&_this.title.render(),_this.subtitles)for(var i=0;i<_this.subtitles.length;i++){var subtitle=_this.subtitles[i];(subtitle.dockInsidePlotArea||"center"===subtitle.horizontalAlign&&"center"===subtitle.verticalAlign)&&subtitle.render()}_this.legend&&(_this.legend.dockInsidePlotArea||"center"===_this.legend.horizontalAlign&&"center"===_this.legend.verticalAlign)&&(_this.legend.setLayout(),_this.legend.render())}};var drawSectionOfFunnel=function(ctx,sectionOfFunnel,fillOpacity,color){void 0===fillOpacity&&(fillOpacity=1),Math.round(sectionOfFunnel.y4-sectionOfFunnel.y1)<=0||(ctx.save(),ctx.globalAlpha=fillOpacity,ctx.beginPath(),ctx.moveTo(Math.round(sectionOfFunnel.x1),Math.round(sectionOfFunnel.y1)),ctx.lineTo(Math.round(sectionOfFunnel.x2),Math.round(sectionOfFunnel.y2)),ctx.lineTo(Math.round(sectionOfFunnel.x3),Math.round(sectionOfFunnel.y3)),ctx.lineTo(Math.round(sectionOfFunnel.x4),Math.round(sectionOfFunnel.y4)),"undefined"!==sectionOfFunnel.x5&&(ctx.lineTo(Math.round(sectionOfFunnel.x5),Math.round(sectionOfFunnel.y5)),ctx.lineTo(Math.round(sectionOfFunnel.x6),Math.round(sectionOfFunnel.y6))),ctx.closePath(),ctx.fillStyle=color||sectionOfFunnel.color,ctx.fill(),ctx.globalAplha=1,ctx.restore())};function Legend(chart,options){Legend.base.constructor.call(this,"Legend","legend",options,null,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.width=0,this.height=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=getFontHeightInPixels(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function DataSeries(chart,options,index,id){DataSeries.base.constructor.call(this,"DataSeries","data",options,index,chart),this.chart=chart,this.canvas=chart.canvas,this._ctx=chart.canvas.ctx,this.index=index,this.noDataPointsInPlotArea=0,this.id=id,this.chart._eventManager.objectMap[id]={id,objectType:"dataSeries",dataSeriesIndex:index};var numberOfDataPoints=options.dataPoints?options.dataPoints.length:0;this.dataPointEOs=[];for(var i=0;i<numberOfDataPoints;i++)this.dataPointEOs[i]={};this.dataPointIds=[],this.plotUnit=[],this.axisX=null,this.axisY=null,this.optionsName="data",this.isOptionsInArray=!0,null===this.fillOpacity&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),void 0===this.options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function Axis(chart,themeOptionsKey,options,index,type,position){if(Axis.base.constructor.call(this,"Axis",themeOptionsKey,options,index,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=chart.ctx,this.maxWidth=0,this.maxHeight=0,this.intervalStartPosition=0,this.labels=[],this.dataSeries=[],this._labels=null,this._ticks=null,this._stripLineLabels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,"axisX"===type?("left"===position||"bottom"===position?(this.optionsName="axisX",isNullOrUndefined(this.chart.sessionVariables.axisX[index])&&(this.chart.sessionVariables.axisX[index]={}),this.sessionVariables=this.chart.sessionVariables.axisX[index]):(this.optionsName="axisX2",isNullOrUndefined(this.chart.sessionVariables.axisX2[index])&&(this.chart.sessionVariables.axisX2[index]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[index]),this.options.interval||(this.intervalType=null)):"left"===position||"bottom"===position?(this.optionsName="axisY",isNullOrUndefined(this.chart.sessionVariables.axisY[index])&&(this.chart.sessionVariables.axisY[index]={}),this.sessionVariables=this.chart.sessionVariables.axisY[index]):(this.optionsName="axisY2",isNullOrUndefined(this.chart.sessionVariables.axisY2[index])&&(this.chart.sessionVariables.axisY2[index]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[index]),void 0===this.options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),void 0===this.options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=type,"axisX"!==type||options&&void 0!==options.gridThickness||(this.gridThickness=0),this._position=position,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,this.labelAngle>90&&this.labelAngle<270?this.labelAngle-=180:this.labelAngle>=270&&this.labelAngle<=360&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new ScaleBreaks(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&this.options.stripLines.length>0)for(var i=0;i<this.options.stripLines.length;i++)this.stripLines.push(new StripLine(this.chart,this.options.stripLines[i],i,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new Crosshair(this.chart,this.options.crosshair,this)),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&null===this.viewportMinimum&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||null===this.sessionVariables.newViewportMinimum?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&null===this.viewportMaximum&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||null===this.sessionVariables.newViewportMaximum?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,null!==this.minimum&&null!==this.viewportMinimum&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),null!==this.maximum&&null!==this.viewportMaximum&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function ScaleBreaks(chart,options,id,axis){if(ScaleBreaks.base.constructor.call(this,"ScaleBreaks","scaleBreaks",options,null,axis),this.id=id,this.chart=chart,this.ctx=this.chart.ctx,this.axis=axis,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],"string"==typeof this.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(this.spacing>10?10:this.spacing)+"%"):"number"!=typeof this.spacing&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&this.options.customBreaks.length>0){for(var i=0;i<this.options.customBreaks.length;i++)this.customBreaks.push(new Break(this.chart,"customBreaks",this.options.customBreaks[i],i,++this.chart._eventManager.lastObjectId,this)),"number"==typeof this.customBreaks[i].startValue&&"number"==typeof this.customBreaks[i].endValue&&this.customBreaks[i].endValue!==this.customBreaks[i].startValue&&this._appliedBreaks.push(this.customBreaks[i]);this._appliedBreaks.sort((function(break1,break2){return break1.startValue-break2.startValue}));for(i=0;i<this._appliedBreaks.length-1;i++)this._appliedBreaks[i].endValue>=this._appliedBreaks[i+1].startValue&&(this._appliedBreaks[i].endValue=Math.max(this._appliedBreaks[i].endValue,this._appliedBreaks[i+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+i+" and "+(i+1)+" are overlapping."),this._appliedBreaks.splice(i,2),i--)}}function Break(chart,themeOptionsKey,options,index,id,scaleBreaks){if(Break.base.constructor.call(this,"Break",themeOptionsKey,options,index,scaleBreaks),this.id=id,this.chart=chart,this.ctx=this.chart.ctx,this.scaleBreaks=scaleBreaks,this.optionsName=themeOptionsKey,this.isOptionsInArray=!0,this.type=options.type?this.type:scaleBreaks.type,this.fillOpacity=isNullOrUndefined(options.fillOpacity)?scaleBreaks.fillOpacity:this.fillOpacity,this.lineThickness=isNullOrUndefined(options.lineThickness)?scaleBreaks.lineThickness:this.lineThickness,this.color=options.color?this.color:scaleBreaks.color,this.lineColor=options.lineColor?this.lineColor:scaleBreaks.lineColor,this.lineDashType=options.lineDashType?this.lineDashType:scaleBreaks.lineDashType,!isNullOrUndefined(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!isNullOrUndefined(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),"number"==typeof this.startValue&&"number"==typeof this.endValue&&this.endValue<this.startValue){var temp=this.startValue;this.startValue=this.endValue,this.endValue=temp}this.spacing=void 0===options.spacing?scaleBreaks.spacing:options.spacing,"string"==typeof this.options.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(this.spacing>10?10:this.spacing)+"%"):"number"!=typeof this.options.spacing&&(this.spacing=scaleBreaks.spacing),this.size=scaleBreaks.parent.logarithmic?1:0}function StripLine(chart,options,index,id,axis){StripLine.base.constructor.call(this,"StripLine","stripLines",options,index,axis),this.id=id,this.chart=chart,this.ctx=this.chart.ctx,this.label=this.label,this.axis=axis,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",null!==this.startValue&&null!==this.endValue&&(this.value=axis.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function Crosshair(chart,options,axis){Crosshair.base.constructor.call(this,"Crosshair","crosshair",options,null,axis),this.chart=chart,this.ctx=this.chart.ctx,this.axis=axis,this.optionsName="crosshair",this._thicknessType="pixel"}function ToolTip(chart,options){ToolTip.base.constructor.call(this,"ToolTip","toolTip",options,null,chart),this.chart=chart,this.canvas=chart.canvas,this.ctx=this.chart.ctx,this.currentSeriesIndex=-1,this.currentDataPointIndex=-1,this._prevX=NaN,this._prevY=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function EventManager(chart){this.chart=chart,this.lastObjectId=0;this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=createCanvas(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d");this.mouseoveredObjectMaps=[]}function Animator(chart){this.chart=chart,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}Chart.prototype.renderFunnel=function(plotUnit){var _this=this;if(!(plotUnit.dataSeriesIndexes.length<=0)){for(var dataSeriesIndex=plotUnit.dataSeriesIndexes[0],dataSeries=this.data[dataSeriesIndex],dataPoints=dataSeries.dataPoints,plotArea=this.plotArea,topBottomPadding=.025*plotArea.width,sidePadding=.01*plotArea.width,sideOffset=0,height=plotArea.height-2*topBottomPadding,width=Math.min(plotArea.width-2*sidePadding,2.8*plotArea.height),isIndexLabelPresent=!1,j=0;j<dataPoints.length;j++)!isIndexLabelPresent&&void 0!==dataPoints[j].indexLabel&&null!==dataPoints[j].indexLabel&&dataPoints[j].indexLabel.toString().length>0&&(isIndexLabelPresent=!0),!isIndexLabelPresent&&void 0!==dataPoints[j].label&&null!==dataPoints[j].label&&dataPoints[j].label.toString().length>0&&(isIndexLabelPresent=!0),(!isIndexLabelPresent&&"function"==typeof dataSeries.indexLabelFormatter||"function"==typeof dataPoints[j].indexLabelFormatter)&&(isIndexLabelPresent=!0);isIndexLabelPresent=isIndexLabelPresent||void 0!==dataSeries.indexLabel&&null!==dataSeries.indexLabel&&dataSeries.indexLabel.toString().length>0,"inside"!==dataSeries.indexLabelPlacement&&isIndexLabelPresent||(sidePadding=(plotArea.width-.75*width)/2);var plotAreaX1=plotArea.x1+sidePadding,plotAreaX2=plotArea.x2-sidePadding,plotAreaY1=plotArea.y1+topBottomPadding,plotAreaY2=plotArea.y2-topBottomPadding,ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(0!=dataSeries.length&&dataSeries.dataPoints&&dataSeries.visible&&0!==dataPoints.length){var neckHeight,neckWidth,headWidth=75*width/100,tickLength=30*(plotAreaX2-headWidth)/100;"funnel"===dataSeries.type?(neckHeight=isNullOrUndefined(dataSeries.options.neckHeight)?.35*height:dataSeries.neckHeight,neckWidth=isNullOrUndefined(dataSeries.options.neckWidth)?.25*headWidth:dataSeries.neckWidth,neckHeight="string"==typeof neckHeight&&neckHeight.match(/%$/)?(neckHeight=parseInt(neckHeight))*height/100:parseInt(neckHeight),neckWidth="string"==typeof neckWidth&&neckWidth.match(/%$/)?(neckWidth=parseInt(neckWidth))*headWidth/100:parseInt(neckWidth),neckHeight>height?neckHeight=height:neckHeight<=0&&(neckHeight=0),neckWidth>headWidth?neckWidth=headWidth-.5:neckWidth<=0&&(neckWidth=0)):"pyramid"===dataSeries.type&&(neckHeight=0,neckWidth=0,dataSeries.reversed?dataSeries.reversed=!1:dataSeries.reversed=!0);var sectionHeight,midRegion,midPointWidthOfFunnel=plotAreaX1+headWidth/2,headStartPositionLeftX=plotAreaX1,headStartPositionRightX=plotAreaX1+headWidth,headStartPositionY=dataSeries.reversed?plotAreaY2:plotAreaY1,neckLeftPositionX=midPointWidthOfFunnel-neckWidth/2,neckRightPositionX=midPointWidthOfFunnel+neckWidth/2,neckTopPositionY=dataSeries.reversed?plotAreaY1+neckHeight:plotAreaY2-neckHeight,neckBottomPositionY=dataSeries.reversed?plotAreaY1:plotAreaY2,sectionType=dataSeries.valueRepresents?dataSeries.valueRepresents:"height",sectionLeftPositionX=[],sectionRightPositionX=[],sectionsOfFunnel=[],sectionDivPositionY=[],initialYPosition=plotAreaY1,m1=(neckTopPositionY-headStartPositionY)/(neckLeftPositionX-headStartPositionLeftX),m2=-m1;if(sectionHeight="area"===sectionType?function dataToAreaRatio(){var y1,y3,x1=headStartPositionLeftX,x2=headStartPositionRightX;y1=plotAreaY1;var headArea=((y3=plotAreaY2-neckHeight)-y1)*(x2-x1+(neckRightPositionX-neckLeftPositionX))/2;headArea=Math.abs(headArea);var lengthOfNeck=neckRightPositionX-neckLeftPositionX,heightOfHead=y3-y1,neckArea=lengthOfNeck*(y3-plotAreaY2);neckArea=Math.abs(neckArea);for(var areaOfFunnel=headArea+neckArea,sectionalHeight=[],total=0,i=0;i<dataPoints.length;i++){if(void 0===dataPoints[i].y)return-1;dataPoints[i].y="number"==typeof dataPoints[i].y?dataPoints[i].y:0,total+=Math.abs(dataPoints[i].y)}if(0===total)return-1;sectionalHeight[0]=0;var heightForThisDataPoint,areaForThisDataPoint,width1,width2,areaOccupied=0,heightOccupied=0;width1=x2-x1;var neckRegion=!1;for(i=0;i<dataPoints.length;i++)if(areaForThisDataPoint=Math.abs(dataPoints[i].y)*areaOfFunnel/total,neckRegion)heightForThisDataPoint=0==Number(lengthOfNeck.toFixed(3))?0:areaForThisDataPoint/lengthOfNeck,sectionalHeight.push(heightForThisDataPoint);else{var sqrt=m1*m1*width1*width1-4*Math.abs(m1)*areaForThisDataPoint;sqrt<0?(areaForThisDataPoint-=areaOccupied=(width1+(width2=lengthOfNeck))*(heightOfHead-heightOccupied)/2,heightForThisDataPoint=heightOfHead-heightOccupied,heightOccupied+=heightOfHead-heightOccupied,heightForThisDataPoint+=0==width2?0:areaForThisDataPoint/width2,heightOccupied+=areaForThisDataPoint/width2,neckRegion=!0,sectionalHeight.push(heightForThisDataPoint)):(width2=width1-2*(heightForThisDataPoint=(Math.abs(m1)*width1-Math.sqrt(sqrt))/2)/Math.abs(m1),(heightOccupied+=heightForThisDataPoint)>heightOfHead&&(areaOccupied=(width1+(width2=lengthOfNeck))*(heightOfHead-(heightOccupied-=heightForThisDataPoint))/2,heightForThisDataPoint=heightOfHead-heightOccupied,heightOccupied+=heightOfHead-heightOccupied,heightForThisDataPoint+=(areaForThisDataPoint-=areaOccupied)/width2,heightOccupied+=areaForThisDataPoint/width2,neckRegion=!0),width1=width2,sectionalHeight.push(heightForThisDataPoint))}return sectionalHeight}():function dataToHeightRatio(){for(var total=0,sectionalHeight=[],i=0;i<dataPoints.length;i++){if(void 0===dataPoints[i].y)return-1;dataPoints[i].y="number"==typeof dataPoints[i].y?dataPoints[i].y:0,total+=Math.abs(dataPoints[i].y)}if(0===total)return-1;sectionalHeight[0]=0;for(i=0;i<dataPoints.length;i++)sectionalHeight.push(Math.abs(dataPoints[i].y)*height/total);return sectionalHeight}(),-1!==sectionHeight){if(dataSeries.reversed){sectionDivPositionY.push(initialYPosition);for(i=sectionHeight.length-1;i>0;i--)initialYPosition+=sectionHeight[i],sectionDivPositionY.push(initialYPosition)}else for(var i=0;i<sectionHeight.length;i++)initialYPosition+=sectionHeight[i],sectionDivPositionY.push(initialYPosition);if(dataSeries.reversed)for(i=0;i<sectionHeight.length;i++)sectionDivPositionY[i]<neckTopPositionY?(sectionLeftPositionX.push(neckLeftPositionX),sectionRightPositionX.push(neckRightPositionX),midRegion=i):(sectionLeftPositionX.push((sectionDivPositionY[i]-headStartPositionY+m1*headStartPositionLeftX)/m1),sectionRightPositionX.push((sectionDivPositionY[i]-headStartPositionY+m2*headStartPositionRightX)/m2));else for(var i=0;i<sectionHeight.length;i++)sectionDivPositionY[i]<neckTopPositionY?(sectionLeftPositionX.push((sectionDivPositionY[i]-headStartPositionY+m1*headStartPositionLeftX)/m1),sectionRightPositionX.push((sectionDivPositionY[i]-headStartPositionY+m2*headStartPositionRightX)/m2),midRegion=i):(sectionLeftPositionX.push(neckLeftPositionX),sectionRightPositionX.push(neckRightPositionX));for(i=0;i<sectionHeight.length-1;i++){var color=dataSeries.reversed?dataPoints[dataPoints.length-1-i].color?dataPoints[dataPoints.length-1-i].color:dataSeries._colorSet[(dataPoints.length-1-i)%dataSeries._colorSet.length]:dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];i===midRegion?sectionsOfFunnel.push({x1:sectionLeftPositionX[i],y1:sectionDivPositionY[i],x2:sectionRightPositionX[i],y2:sectionDivPositionY[i],x3:neckRightPositionX,y3:neckTopPositionY,x4:sectionRightPositionX[i+1],y4:sectionDivPositionY[i+1],x5:sectionLeftPositionX[i+1],y5:sectionDivPositionY[i+1],x6:neckLeftPositionX,y6:neckTopPositionY,id:i,height:sectionDivPositionY[i+1]-sectionDivPositionY[i],color}):sectionsOfFunnel.push({x1:sectionLeftPositionX[i],y1:sectionDivPositionY[i],x2:sectionRightPositionX[i],y2:sectionDivPositionY[i],x3:sectionRightPositionX[i+1],y3:sectionDivPositionY[i+1],x4:sectionLeftPositionX[i+1],y4:sectionDivPositionY[i+1],id:i,height:sectionDivPositionY[i+1]-sectionDivPositionY[i],color})}var minDistanceBetweenLabels=2,indexLabels=[],isAnimating=!1,explodedSections=[],originalPosition=[],exploded=!1,usedWidth=0,extraWidth=0;addArrayIndexOf(explodedSections);for(i=0;i<dataPoints.length;i++)dataPoints[i].exploded&&(exploded=!0,dataSeries.reversed?explodedSections.push(dataPoints.length-1-i):explodedSections.push(i));if(ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),ctx.fillStyle=_this.backgroundColor,ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height),isIndexLabelPresent&&dataSeries.visible&&(function initLabels(){if(dataSeries&&dataPoints){for(var color,indexLabelText,indexLabelPlacement,indexLabelBackgroundColor,indexLabelFontColor,indexLabelFontSize,indexLabelFontStyle,indexLabelFontFamily,indexLabelFontWeight,indexLabelLineColor,indexLabelLineThickness,indexLabelWrap,indexLabelMaxWidth,indexLabelLineDashType,section,labelX,dataPoint,widthForLabel=[],indexLabelMaxHeight=[],percentAndTotal={percent:null,total:null},formatterParameter=null,i=0;i<dataPoints.length;i++)labelX=calculateX(void 0!==(section=sectionsOfFunnel[i]).x5?(section.y2+section.y4)/2:(section.y2+section.y3)/2).x2+1,widthForLabel[i]=plotAreaX2-labelX-tickLength;for(var adjustableLengthOfLineToLabel=.5*tickLength,k=(i=0,dataPoints.length-1);i<dataPoints.length||k>=0;i++,k--){color=(dataPoint=dataSeries.reversed?dataPoints[k]:dataPoints[i]).color?dataPoint.color:dataSeries.reversed?dataSeries._colorSet[(dataPoints.length-1-i)%dataSeries._colorSet.length]:dataSeries._colorSet[i%dataSeries._colorSet.length],indexLabelPlacement=dataPoint.indexLabelPlacement||dataSeries.indexLabelPlacement||"outside",indexLabelBackgroundColor=dataPoint.indexLabelBackgroundColor||dataSeries.indexLabelBackgroundColor||(isCanvasSupported?"transparent":null),indexLabelFontColor=dataPoint.indexLabelFontColor||dataSeries.indexLabelFontColor||"#979797",indexLabelFontSize=isNullOrUndefined(dataPoint.indexLabelFontSize)?dataSeries.indexLabelFontSize:dataPoint.indexLabelFontSize,indexLabelFontStyle=dataPoint.indexLabelFontStyle||dataSeries.indexLabelFontStyle||"normal",indexLabelFontFamily=dataPoint.indexLabelFontFamily||dataSeries.indexLabelFontFamily||"arial",indexLabelFontWeight=dataPoint.indexLabelFontWeight||dataSeries.indexLabelFontWeight||"normal",indexLabelLineColor=dataPoint.indexLabelLineColor||dataSeries.options.indexLabelLineColor||color,indexLabelLineThickness="number"==typeof dataPoint.indexLabelLineThickness?dataPoint.indexLabelLineThickness:"number"==typeof dataSeries.indexLabelLineThickness?dataSeries.indexLabelLineThickness:2,indexLabelLineDashType=dataPoint.indexLabelLineDashType||dataSeries.indexLabelLineDashType||"solid",indexLabelWrap=void 0!==dataPoint.indexLabelWrap?dataPoint.indexLabelWrap:void 0===dataSeries.indexLabelWrap||dataSeries.indexLabelWrap;var id=dataSeries.dataPointIds[i],dataPointEO={id,objectType:"dataPoint",dataPointIndex:i,dataSeriesIndex:0,funnelSection:sectionsOfFunnel[dataSeries.reversed?dataPoints.length-1-i:i]};_this._eventManager.objectMap[id]=dataPointEO,"inside"===dataSeries.indexLabelPlacement&&(widthForLabel[i]=i!==midRegion?dataSeries.reversed?sectionsOfFunnel[i].x2-sectionsOfFunnel[i].x1:sectionsOfFunnel[i].x3-sectionsOfFunnel[i].x4:sectionsOfFunnel[i].x3-sectionsOfFunnel[i].x6,widthForLabel[i]<20&&(widthForLabel[i]=i!==midRegion&&dataSeries.reversed?sectionsOfFunnel[i].x3-sectionsOfFunnel[i].x4:sectionsOfFunnel[i].x2-sectionsOfFunnel[i].x1,widthForLabel[i]/=2)),((indexLabelMaxWidth=dataPoint.indexLabelMaxWidth?dataPoint.indexLabelMaxWidth:dataSeries.options.indexLabelMaxWidth?dataSeries.indexLabelMaxWidth:widthForLabel[i])>widthForLabel[i]||indexLabelMaxWidth<0)&&(indexLabelMaxWidth=widthForLabel[i]),indexLabelMaxHeight[i]="inside"===dataSeries.indexLabelPlacement&&sectionsOfFunnel[i].height,percentAndTotal=_this.getPercentAndTotal(dataSeries,dataPoint),(dataSeries.indexLabelFormatter||dataPoint.indexLabelFormatter)&&(formatterParameter={chart:_this.options,dataSeries,dataPoint,total:percentAndTotal.total,percent:percentAndTotal.percent}),indexLabelText=dataPoint.indexLabelFormatter?dataPoint.indexLabelFormatter(formatterParameter):dataPoint.indexLabel?_this.replaceKeywordsWithValue(dataPoint.indexLabel,dataPoint,dataSeries,i):dataSeries.indexLabelFormatter?dataSeries.indexLabelFormatter(formatterParameter):dataSeries.indexLabel?_this.replaceKeywordsWithValue(dataSeries.indexLabel,dataPoint,dataSeries,i):dataPoint.label?dataPoint.label:"",indexLabelLineThickness<=0&&(indexLabelLineThickness=0),1e3>indexLabelMaxWidth&&1e3-indexLabelMaxWidth<adjustableLengthOfLineToLabel&&(indexLabelMaxWidth+=1e3-indexLabelMaxWidth),ctx.roundRect||extendCtx(ctx);var textBlock=new TextBlock(ctx,{fontSize:indexLabelFontSize,fontFamily:indexLabelFontFamily,fontColor:indexLabelFontColor,fontStyle:indexLabelFontStyle,fontWeight:indexLabelFontWeight,horizontalAlign:indexLabelPlacement,backgroundColor:indexLabelBackgroundColor,maxWidth:indexLabelMaxWidth,maxHeight:!1===indexLabelMaxHeight[i]?indexLabelWrap?4.28571429*indexLabelFontSize:1.5*indexLabelFontSize:indexLabelMaxHeight[i],text:indexLabelText,padding:minDistanceBetweenLabels});textBlock.measureText();var height=textBlock.height<textBlock.maxHeight?textBlock.height:textBlock.maxHeight,width=textBlock.width<textBlock.maxWidth?textBlock.width:textBlock.maxWidth;indexLabels.push({textBlock,id:dataSeries.reversed?k:i,isDirty:!1,lineColor:indexLabelLineColor,lineThickness:indexLabelLineThickness,lineDashType:indexLabelLineDashType,height,width})}}}(),positionLabels(),function ifLabelsAreOverlappingChangeMaxWidth(){var nextLabel,nextTextBlock,currentLabel,currentTextBlock,height,width,dataPoint,y,section,maxWidth=[],isOverlapping=!1,temp=0,commonMaxWidth=plotAreaX2-headStartPositionRightX-tickLength/2;commonMaxWidth=dataSeries.options.indexLabelMaxWidth?dataSeries.indexLabelMaxWidth>commonMaxWidth?commonMaxWidth:dataSeries.indexLabelMaxWidth:commonMaxWidth;for(var i=indexLabels.length-1;i>=0;i--)dataPoint=dataPoints[indexLabels[i].id],currentTextBlock=(currentLabel=indexLabels[i]).textBlock,nextTextBlock=(nextLabel=getNextLabelIndex(i)<sectionsOfFunnel.length?indexLabels[getNextLabelIndex(i)]:null)?nextLabel.textBlock:null,height=currentLabel.height,nextLabel&&currentTextBlock.y+height+minDistanceBetweenLabels>nextTextBlock.y&&(isOverlapping=!0),((temp=dataPoint.indexLabelMaxWidth||commonMaxWidth)>commonMaxWidth||temp<0)&&(temp=commonMaxWidth),maxWidth.push(temp);if(isOverlapping)for(i=indexLabels.length-1;i>=0;i--)section=sectionsOfFunnel[i],indexLabels[i].textBlock.maxWidth=maxWidth[maxWidth.length-(i+1)],indexLabels[i].textBlock.measureText(),indexLabels[i].textBlock.x=plotAreaX2-commonMaxWidth,height=indexLabels[i].textBlock.height<indexLabels[i].textBlock.maxHeight?indexLabels[i].textBlock.height:indexLabels[i].textBlock.maxHeight,width=indexLabels[i].textBlock.width<indexLabels[i].textBlock.maxWidth?indexLabels[i].textBlock.width:indexLabels[i].textBlock.maxWidth,indexLabels[i].height=height,indexLabels[i].width=width,y=void 0!==section.x5?(section.y2+section.y4)/2:(section.y2+section.y3)/2,indexLabels[i].textBlock.y=y-indexLabels[i].height/2,dataSeries.reversed?(indexLabels[i].textBlock.y+indexLabels[i].height>headStartPositionY+topBottomPadding&&(indexLabels[i].textBlock.y=headStartPositionY+topBottomPadding-indexLabels[i].height),indexLabels[i].textBlock.y<neckBottomPositionY-topBottomPadding&&(indexLabels[i].textBlock.y=neckBottomPositionY-topBottomPadding)):(indexLabels[i].textBlock.y<headStartPositionY-topBottomPadding&&(indexLabels[i].textBlock.y=headStartPositionY-topBottomPadding),indexLabels[i].textBlock.y+indexLabels[i].height>neckBottomPositionY+topBottomPadding&&(indexLabels[i].textBlock.y=neckBottomPositionY+topBottomPadding-indexLabels[i].height))}(),"inside"!==dataSeries.indexLabelPlacement)){!function repositionLabels(){for(var currentHeight,currentY,previousLabel,currentLabel,currentTextBlock,nextLabel,nextTextBlock,requiredSpace,availableSpace,k=0;k<2;k++){for(var i=indexLabels.length-1;i>=0&&((previousLabel=getPreviousLabelIndex(i)>=0?indexLabels[getPreviousLabelIndex(i)]:null)&&previousLabel.textBlock,currentTextBlock=(currentLabel=indexLabels[i]).textBlock,nextTextBlock=(nextLabel=getNextLabelIndex(i)<sectionsOfFunnel.length?indexLabels[getNextLabelIndex(i)]:null)?nextLabel.textBlock:null,currentHeight=+currentLabel.height.toFixed(6),currentY=+currentTextBlock.y.toFixed(6),!(!currentLabel.isDirty&&nextLabel&&currentY+currentHeight+minDistanceBetweenLabels>+nextTextBlock.y.toFixed(6)&&(availableSpace=rearrangeLabels(i,-(requiredSpace=currentTextBlock.y+currentHeight+minDistanceBetweenLabels-nextTextBlock.y)))<requiredSpace&&(availableSpace>0&&(requiredSpace-=availableSpace),(availableSpace=rearrangeLabels(getNextLabelIndex(i),requiredSpace))!=requiredSpace)));i--);checkOverlapForSkip()}function rearrangeLabels(index,offset){var movedUp,movedDown,previousIndex,nextIndex,newOffset,possibleMove;if(index<0||index>=indexLabels.length)return 0;var currentTextBlock=indexLabels[index].textBlock;return currentTextBlock.height,offset<0?(offset*=-1,(possibleMove=distanceBetweenTwoLabels(previousIndex=getPreviousLabelIndex(index),index))>=offset?(currentTextBlock.y-=offset,offset):(newOffset=offset-possibleMove,0==index?(possibleMove>0&&(currentTextBlock.y-=possibleMove),possibleMove):((movedUp=possibleMove+rearrangeLabels(previousIndex,-newOffset))>0&&(currentTextBlock.y-=movedUp),movedUp))):(possibleMove=distanceBetweenTwoLabels(index,nextIndex=getNextLabelIndex(index)))>=offset?(currentTextBlock.y+=offset,offset):(newOffset=offset-possibleMove,index==sectionsOfFunnel.length-1?(possibleMove>0&&(currentTextBlock.y+=possibleMove),possibleMove):((movedDown=possibleMove+rearrangeLabels(nextIndex,newOffset))>0&&(currentTextBlock.y+=movedDown),movedDown))}function checkOverlapForSkip(){var startIndex,startPosition,previous,i,heightRequired,noOfLabelsSkipped=0;!function separateAtThreshold(threshold,noOfGroups){for(var currentThreshold,next,j=1;j<noOfGroups;j++){currentThreshold=j*threshold;for(var i=indexLabels.length-1;i>=0;i--)if(!indexLabels[i].isDirty&&indexLabels[i].textBlock.y<currentThreshold&&indexLabels[i].textBlock.y+indexLabels[i].height>currentThreshold){if((next=getNextLabelIndex(i))>=indexLabels.length-1)continue;indexLabels[i].textBlock.y+indexLabels[i].height+minDistanceBetweenLabels>indexLabels[next].textBlock.y&&(indexLabels[i].textBlock.y+indexLabels[i].height-currentThreshold>currentThreshold-indexLabels[i].textBlock.y?indexLabels[i].textBlock.y=currentThreshold+1:indexLabels[i].textBlock.y=currentThreshold-indexLabels[i].height-1)}}}((plotAreaY2-plotAreaY1+2*topBottomPadding)/1,1);for(var j=sectionsOfFunnel.length-1;j>0;j--)if(!indexLabels[j].isDirty){if((previous=getPreviousLabelIndex(j))<0&&indexLabels[previous=0].isDirty)break;if(indexLabels[j].textBlock.y<indexLabels[previous].textBlock.y+indexLabels[previous].height){for(startIndex=startIndex||j,i=j,heightRequired=0;indexLabels[i].textBlock.y<indexLabels[previous].textBlock.y+indexLabels[previous].height+minDistanceBetweenLabels;){if(startPosition=startPosition||indexLabels[i].textBlock.y+indexLabels[i].height,heightRequired+=indexLabels[i].height,heightRequired+=minDistanceBetweenLabels,(i=previous)<=0){heightRequired+=indexLabels[i=0].height;break}if((previous=getPreviousLabelIndex(i))<0){heightRequired+=indexLabels[i=0].height;break}}if(i==j)continue;noOfLabelsSkipped=removeLabelFromSmallSegment(heightRequired-(startPosition-indexLabels[i].textBlock.y),startIndex,i),j=i;break}}return noOfLabelsSkipped}function removeLabelFromSmallSegment(totalOverlap,endIndex,startIndex){for(var labelsToSkip=[],totalRemovedLabelHeight=0,noOfLabelsRemoved=0,i=(totalOverlap=Math.abs(totalOverlap),startIndex);i<=endIndex;i++)labelsToSkip.push(sectionsOfFunnel[i]);for(labelsToSkip.sort((function(entry1,entry2){return entry1.height-entry2.height})),i=0;i<labelsToSkip.length;i++){var skippedSection=labelsToSkip[i];if(!(totalRemovedLabelHeight<totalOverlap))break;noOfLabelsRemoved++,totalRemovedLabelHeight+=indexLabels[skippedSection.id].height+minDistanceBetweenLabels,indexLabels[skippedSection.id].textBlock.text="",indexLabels[skippedSection.id].indexLabelText="",indexLabels[skippedSection.id].isDirty=!0,indexLabels[skippedSection.id].textBlock.measureText()}return noOfLabelsRemoved}}();for(i=0;i<dataPoints.length;i++)indexLabels[i].isDirty||(usedWidth=indexLabels[i].textBlock.x+indexLabels[i].width,extraWidth=(plotAreaX2-usedWidth)/2,0==i&&(sideOffset=extraWidth),sideOffset>extraWidth&&(sideOffset=extraWidth));for(i=0;i<sectionsOfFunnel.length;i++)sectionsOfFunnel[i].x1+=sideOffset,sectionsOfFunnel[i].x2+=sideOffset,sectionsOfFunnel[i].x3+=sideOffset,sectionsOfFunnel[i].x4+=sideOffset,sectionsOfFunnel[i].x5&&(sectionsOfFunnel[i].x5+=sideOffset,sectionsOfFunnel[i].x6+=sideOffset),indexLabels[i].textBlock.x+=sideOffset}for(i=0;i<sectionsOfFunnel.length;i++){var currentSection=sectionsOfFunnel[i];drawSectionOfFunnel(ctx,currentSection,dataSeries.fillOpacity),originalPosition.push(currentSection.y1)}if(renderChartElementsInPlotArea(ctx),isIndexLabelPresent&&dataSeries.visible&&("inside"===dataSeries.indexLabelPlacement||_this.animationEnabled||drawLineToLabel(ctx),_this.animationEnabled||renderLabels()),!isIndexLabelPresent){var id,dataPointEO;for(i=0;i<dataPoints.length;i++)dataPointEO={id:id=dataSeries.dataPointIds[i],objectType:"dataPoint",dataPointIndex:i,dataSeriesIndex:0,funnelSection:sectionsOfFunnel[dataSeries.reversed?dataPoints.length-1-i:i]},_this._eventManager.objectMap[id]=dataPointEO}return(!_this.animationEnabled&&exploded||_this.animationEnabled&&!_this.animatedRender)&&explodeToggle(_this,-1,0),this.funnelPyramidClickHandler=function(ev){var selectedSection=-1;isAnimating||_this.isAnimating||(isNullOrUndefined(ev.dataSeries.explodeOnClick)||ev.dataSeries.explodeOnClick)&&(selectedSection=dataSeries.reversed?dataPoints.length-1-ev.dataPointIndex:ev.dataPointIndex)>=0&&(!function changeExplodedForDataPoints(sectionIndex){"funnel"!==dataSeries.type&&"pyramid"!==dataSeries.type||(dataSeries.reversed?dataPoints[dataPoints.length-1-sectionIndex].exploded?dataPoints[dataPoints.length-1-sectionIndex].exploded=!1:dataPoints[dataPoints.length-1-sectionIndex].exploded=!0:dataPoints[sectionIndex].exploded?dataPoints[sectionIndex].exploded=!1:dataPoints[sectionIndex].exploded=!0)}(selectedSection),explodeToggle(_this,selectedSection,500))},{source:ctx,dest:this.plotArea.ctx,animationCallback:function(fractionComplete,animationInfo){AnimationHelper.fadeInAnimation(fractionComplete,animationInfo),fractionComplete>=1&&(explodeToggle(_this,-1,500),renderChartElementsInPlotArea(_this.plotArea.ctx||_this.ctx))},easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0}}}}function positionLabels(){var section,x1,y1,sectionHeight,labelHeight,labelWidth;if("inside"!==dataSeries.indexLabelPlacement)for(var i=0;i<sectionsOfFunnel.length;i++)0!=indexLabels[i].textBlock.text.length?(y1=void 0!==(section=sectionsOfFunnel[i]).x5?(section.y2+section.y4)/2:(section.y2+section.y3)/2,x1=dataSeries.reversed?void 0!==section.x5&&y1>neckTopPositionY?calculateX(y1).x2+1:(section.x2+section.x3)/2+1:void 0!==section.x5?y1<neckTopPositionY?calculateX(y1).x2+1:(section.x4+section.x3)/2+1:(section.x2+section.x3)/2+1,indexLabels[i].textBlock.x=x1+tickLength,indexLabels[i].textBlock.y=y1-indexLabels[i].height/2,dataSeries.reversed?(indexLabels[i].textBlock.y+indexLabels[i].height>headStartPositionY+topBottomPadding&&(indexLabels[i].textBlock.y=headStartPositionY+topBottomPadding-indexLabels[i].height),indexLabels[i].textBlock.y<neckBottomPositionY-topBottomPadding&&(indexLabels[i].textBlock.y=neckBottomPositionY-topBottomPadding)):(indexLabels[i].textBlock.y<headStartPositionY-topBottomPadding&&(indexLabels[i].textBlock.y=headStartPositionY-topBottomPadding),indexLabels[i].textBlock.y+indexLabels[i].height>neckBottomPositionY+topBottomPadding&&(indexLabels[i].textBlock.y=neckBottomPositionY+topBottomPadding-indexLabels[i].height))):indexLabels[i].isDirty=!0;else for(i=0;i<sectionsOfFunnel.length;i++)0!=indexLabels[i].textBlock.text.length?(sectionHeight=(section=sectionsOfFunnel[i]).height,labelHeight=indexLabels[i].height,labelWidth=indexLabels[i].width,sectionHeight>=labelHeight?(x1=i!=midRegion?(section.x4+section.x3)/2-labelWidth/2:(section.x5+section.x4)/2-labelWidth/2,y1=i!=midRegion?(section.y1+section.y3)/2-labelHeight/2:(section.y1+section.y4)/2-labelHeight/2,indexLabels[i].textBlock.x=x1,indexLabels[i].textBlock.y=y1):indexLabels[i].isDirty=!0):indexLabels[i].isDirty=!0}function distanceBetweenTwoLabels(previous,current){var topPosition;return topPosition=previous<0?dataSeries.reversed?neckBottomPositionY-topBottomPadding:headStartPositionY-topBottomPadding:indexLabels[previous].textBlock.y+indexLabels[previous].height+minDistanceBetweenLabels,(current<sectionsOfFunnel.length?indexLabels[current].textBlock.y:dataSeries.reversed?headStartPositionY+topBottomPadding:neckBottomPositionY+topBottomPadding)-topPosition}function explodeToggle(_this,selectedSection,animDuration){var moveFromAbsBy,gap,moveSectionBy,index,newPosition=[],extraGap=topBottomPadding,previousMoveForSameSection=[];-1!==selectedSection&&(explodedSections.indexOf(selectedSection)>=0?(index=explodedSections.indexOf(selectedSection),explodedSections.splice(index,1)):(explodedSections.push(selectedSection),explodedSections=explodedSections.sort((function(a,b){return a-b}))));if(0===explodedSections.length)newPosition=originalPosition;else{gap=topBottomPadding*(1!=explodedSections.length||0!=explodedSections[0]&&explodedSections[0]!=sectionsOfFunnel.length-1?2:1)/function gapRequired(){for(var gapCount=0,i=0;i<sectionsOfFunnel.length-1;i++)(explodedSections.indexOf(i)>=0||explodedSections.indexOf(i+1)>=0)&&gapCount++;return gapCount}();for(var i=0;i<sectionsOfFunnel.length;i++){if(1==explodedSections.length&&0==explodedSections[0]){if(0===i){newPosition.push(originalPosition[i]),moveFromAbsBy=extraGap;continue}}else 0===i&&(moveFromAbsBy=-1*extraGap);newPosition.push(originalPosition[i]+moveFromAbsBy),(explodedSections.indexOf(i)>=0||i<sectionsOfFunnel.length&&explodedSections.indexOf(i+1)>=0)&&(moveFromAbsBy+=gap)}}moveSectionBy=function moveForEachSection(){for(var movement=[],i=0;i<sectionsOfFunnel.length;i++)movement.push(newPosition[i]-sectionsOfFunnel[i].y1);return movement}();var animatingObject={startTime:(new Date).getTime(),duration:animDuration||500,easingFunction:function(b,c,t,d){return AnimationHelper.easing.easeOutQuart(b,c,t,d)},changeSection:function(fractionComplete){for(var moveCurrentSectionBy,currentSection,newY,i=0;i<sectionsOfFunnel.length;i++)moveCurrentSectionBy=moveSectionBy[i],currentSection=sectionsOfFunnel[i],newY=moveCurrentSectionBy*fractionComplete,void 0===previousMoveForSameSection[i]&&(previousMoveForSameSection[i]=0),previousMoveForSameSection<0&&(previousMoveForSameSection*=-1),currentSection.y1+=newY-previousMoveForSameSection[i],currentSection.y2+=newY-previousMoveForSameSection[i],currentSection.y3+=newY-previousMoveForSameSection[i],currentSection.y4+=newY-previousMoveForSameSection[i],currentSection.y5&&(currentSection.y5+=newY-previousMoveForSameSection[i],currentSection.y6+=newY-previousMoveForSameSection[i]),previousMoveForSameSection[i]=newY}};_this._animator.animate(0,animDuration,(function(fractionComplete){!function animate(fractionComplete,selectedSection,ctx,animatingObject){isAnimating=!0,function clearPlotArea(ctx){ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.x2-plotArea.x1,plotArea.y2-plotArea.y1),ctx.fillStyle=_this.backgroundColor,ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height)}(ctx),animatingObject.changeSection(fractionComplete,selectedSection);var entry={};entry.dataSeries=dataSeries,entry.dataPoint=dataSeries.reversed?dataSeries.dataPoints[dataPoints.length-1-selectedSection]:dataSeries.dataPoints[selectedSection],entry.index=dataSeries.reversed?dataPoints.length-1-selectedSection:selectedSection,_this.toolTip.highlightObjects([entry]);for(var i=0;i<sectionsOfFunnel.length;i++)drawSectionOfFunnel(ctx,sectionsOfFunnel[i],dataSeries.fillOpacity);renderChartElementsInPlotArea(ctx),isIndexLabelPresent&&("inside"!==dataSeries.indexLabelPlacement?drawLineToLabel(ctx):positionLabels(),renderLabels(ctx));fractionComplete>=1&&(isAnimating=!1)}(fractionComplete,selectedSection,_this.plotArea.ctx||_this.ctx,animatingObject)}),null,AnimationHelper.easing.easeOutQuart)}function drawLineToLabel(ctx){for(var startX,startY,endX,endY,lineOffset,k=0;k<sectionsOfFunnel.length;k++)lineOffset=indexLabels[k].lineThickness%2==1?.5:0,startX=calculateX(startY=((sectionsOfFunnel[k].y2+sectionsOfFunnel[k].y4)/2|0)+lineOffset).x2-1,endX=indexLabels[k].textBlock.x,endY=(indexLabels[k].textBlock.y+indexLabels[k].height/2|0)+lineOffset,indexLabels[k].isDirty||0==indexLabels[k].lineThickness||(ctx.strokeStyle=indexLabels[k].lineColor,ctx.lineWidth=indexLabels[k].lineThickness,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(indexLabels[k].lineDashType,indexLabels[k].lineThickness)),ctx.beginPath(),ctx.moveTo(startX,startY),ctx.lineTo(endX,endY),ctx.stroke())}function getPreviousLabelIndex(index){var k;for(k=index-1;k>=-1&&-1!=k&&indexLabels[k].isDirty;k--);return k}function getNextLabelIndex(index){var k;for(k=index+1;k<=sectionsOfFunnel.length&&k!=sectionsOfFunnel.length&&indexLabels[k].isDirty;k++);return k}function calculateX(y){for(var x2,funnelSection,i=0;i<dataPoints.length;i++)if(sectionsOfFunnel[i].y1<y&&sectionsOfFunnel[i].y4>y){funnelSection=sectionsOfFunnel[i];break}return funnelSection?(funnelSection.y6?y>funnelSection.y6?(funnelSection.x6+(funnelSection.x5-funnelSection.x6)/(funnelSection.y5-funnelSection.y6)*(y-funnelSection.y6),x2=funnelSection.x3+(funnelSection.x4-funnelSection.x3)/(funnelSection.y4-funnelSection.y3)*(y-funnelSection.y3)):(funnelSection.x1+(funnelSection.x6-funnelSection.x1)/(funnelSection.y6-funnelSection.y1)*(y-funnelSection.y1),x2=funnelSection.x2+(funnelSection.x3-funnelSection.x2)/(funnelSection.y3-funnelSection.y2)*(y-funnelSection.y2)):(funnelSection.x1+(funnelSection.x4-funnelSection.x1)/(funnelSection.y4-funnelSection.y1)*(y-funnelSection.y1),x2=funnelSection.x2+(funnelSection.x3-funnelSection.x2)/(funnelSection.y3-funnelSection.y2)*(y-funnelSection.y2)),{x1:x2,x2}):-1}function renderLabels(ctx){for(var i=0;i<sectionsOfFunnel.length;i++)indexLabels[i].isDirty||(ctx&&(indexLabels[i].textBlock.ctx=ctx),indexLabels[i].textBlock.render(!0))}function renderChartElementsInPlotArea(ctx){if(_this.plotArea.layoutManager.reset(),ctx.roundRect||extendCtx(ctx),_this.title&&(_this.title.dockInsidePlotArea||"center"===_this.title.horizontalAlign&&"center"===_this.title.verticalAlign)&&(_this.title.ctx=ctx,_this.title.render()),_this.subtitles)for(var i=0;i<_this.subtitles.length;i++){var subtitle=_this.subtitles[i];(subtitle.dockInsidePlotArea||"center"===subtitle.horizontalAlign&&"center"===subtitle.verticalAlign)&&(_this.subtitles.ctx=ctx,subtitle.render())}_this.legend&&(_this.legend.dockInsidePlotArea||"center"===_this.legend.horizontalAlign&&"center"===_this.legend.verticalAlign)&&(_this.legend.ctx=ctx,_this.legend.setLayout(),_this.legend.render()),global.fNg&&global.fNg(_this)}},Chart.prototype.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)},Chart.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,Chart.prototype.set=function(name,value,updateChart){updateChart=void 0===updateChart||updateChart,"options"===name?(this.options=value,updateChart&&this.render()):Chart.base.set.call(this,name,value,updateChart)},Chart.prototype.exportChart=function(options){var format=(options=void 0===options?{}:options).format?options.format:"png",fileName=options.fileName?options.fileName:this.exportFileName;if(options.toDataURL)return this.canvas.toDataURL("image/"+format);!function exportCanvas(canvas,format,fileName){if(canvas&&format&&fileName){var fullFileName=fileName+"."+format,mimeType="image/"+format,img=canvas.toDataURL(mimeType),saved=!1,downloadLink=document.createElement("a");if(downloadLink.download=fullFileName,downloadLink.href=img,"undefined"!=typeof Blob&&new Blob){for(var imgData=img.replace(/^data:[a-z\/]*;base64,/,""),byteString=atob(imgData),buffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(buffer),i=0;i<byteString.length;i++)intArray[i]=byteString.charCodeAt(i);var blob=new Blob([intArray.buffer],{type:"image/"+format});try{window.navigator.msSaveBlob(blob,fullFileName),saved=!0}catch(e){downloadLink.dataset.downloadurl=[mimeType,downloadLink.download,downloadLink.href].join(":"),downloadLink.href=window.URL.createObjectURL(blob)}}if(!saved)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),downloadLink.dispatchEvent?downloadLink.dispatchEvent(event):downloadLink.fireEvent&&downloadLink.fireEvent("onclick")}catch(e){var win=window.open();win.document.write("<img src='"+img+"'></img><div>Please right click on the image and save it to your device</div>"),win.document.close()}}}(this.canvas,format,fileName)},Chart.prototype.print=function(){var chartImageData=this.exportChart({toDataURL:!0}),printFrame=document.createElement("iframe");printFrame.setAttribute("class","canvasjs-chart-print-frame"),printFrame.setAttribute("style","position:absolute; width:100%; border: 0px; margin: 0px 0px 0px 0px; padding 0px 0px 0px 0px;"),printFrame.style.height=this.height+"px",this._canvasJSContainer.appendChild(printFrame);var _this=this,printDoc=printFrame.contentWindow||printFrame.contentDocument.document||printFrame.contentDocument;printDoc.document.open(),printDoc.document.write('<!DOCTYPE HTML>\n<html><body style="margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"><img src="'+chartImageData+'"/><body/></html>'),printDoc.document.close(),setTimeout((function(){printDoc.focus(),printDoc.print(),setTimeout((function(){_this._canvasJSContainer.removeChild(printFrame)}),1e3)}),500)},Chart.prototype.getPercentAndTotal=function(ds,dp){var dpX=null,total=null,percent=null;if(ds.type.indexOf("stacked")>=0)total=0,(dpX=dp.x.getTime?dp.x.getTime():dp.x)in ds.plotUnit.yTotals&&(total=ds.plotUnit.yTotals[dpX],percent=isNaN(dp.y)?0:dp.y/total*100);else if("pie"===ds.type||"doughnut"===ds.type||"funnel"===ds.type||"pyramid"===ds.type){total=0;for(var i=0;i<ds.dataPoints.length;i++)isNaN(ds.dataPoints[i].y)||(total+=ds.dataPoints[i].y);percent=isNaN(dp.y)?0:dp.y/total*100}return{percent,total}},Chart.prototype.replaceKeywordsWithValue=function(str,dp,ds,dpIndex,indexKeywordValue){var chart=this;if(indexKeywordValue=void 0===indexKeywordValue?0:indexKeywordValue,(ds.type.indexOf("stacked")>=0||"pie"===ds.type||"doughnut"===ds.type||"funnel"===ds.type||"pyramid"===ds.type)&&(str.indexOf("#percent")>=0||str.indexOf("#total")>=0)){var percent="#percent",total="#total",percentAndTotal=this.getPercentAndTotal(ds,dp);total=isNaN(percentAndTotal.total)?total:percentAndTotal.total,percent=isNaN(percentAndTotal.percent)?percent:percentAndTotal.percent;do{var percentFormatString="";if(ds.percentFormatString)percentFormatString=ds.percentFormatString;else{percentFormatString="#,##0.";var numberOfDecimals=Math.max(Math.ceil(Math.log(1/Math.abs(percent))/Math.LN10),2);!isNaN(numberOfDecimals)&&isFinite(numberOfDecimals)||(numberOfDecimals=2);for(var n=0;n<numberOfDecimals;n++)percentFormatString+="#";ds.percentFormatString=percentFormatString}str=(str=str.replace("#percent",numberFormat(percent,percentFormatString,chart._cultureInfo))).replace("#total",numberFormat(total,ds.yValueFormatString?ds.yValueFormatString:"#,##0.########",chart._cultureInfo))}while(str.indexOf("#percent")>=0||str.indexOf("#total")>=0)}return str.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,(function($0){if('"'===$0[0]&&'"'===$0[$0.length-1]||"'"===$0[0]&&"'"===$0[$0.length-1])return $0.slice(1,$0.length-1);var key=trimString($0.slice(1,$0.length-1));key=key.replace("#index",indexKeywordValue);var index=null;try{var match=key.match(/(.*?)\s*\[\s*(.*?)\s*\]/);match&&match.length>0&&(index=trimString(match[2]),key=trimString(match[1]))}catch(e){}var obj=null;if("color"===key)return"waterfall"===ds.type?dp.color?dp.color:dp.y>0?ds.risingColor:ds.fallingColor:"error"===ds.type?ds.color?ds.color:ds._colorSet[index%ds._colorSet.length]:dp.color?dp.color:ds.color?ds.color:ds._colorSet[dpIndex%ds._colorSet.length];if(dp.hasOwnProperty(key))obj=dp;else{if(!ds.hasOwnProperty(key))return"";obj=ds}var value=obj[key];return null!==index&&(value=value[index]),"x"!==key?"y"===key?numberFormat(value,dp.yValueFormatString?dp.yValueFormatString:ds.yValueFormatString?ds.yValueFormatString:ds.yValueFormatString="#,##0.########",chart._cultureInfo):"z"===key?numberFormat(value,dp.zValueFormatString?dp.zValueFormatString:ds.zValueFormatString?ds.zValueFormatString:ds.zValueFormatString="#,##0.########",chart._cultureInfo):value:"dateTime"===ds.axisX.valueType||"dateTime"===ds.xValueType||dp.x&&dp.x.getTime?ds.axisX.logarithmic?void 0:dateFormat(value,dp.xValueFormatString?dp.xValueFormatString:ds.xValueFormatString?ds.xValueFormatString:ds.xValueFormatString=chart.axisX&&chart.axisX.autoValueFormatString?chart.axisX.autoValueFormatString:"DD MMM YY",chart._cultureInfo):numberFormat(value,dp.xValueFormatString?dp.xValueFormatString:ds.xValueFormatString?ds.xValueFormatString:ds.xValueFormatString="#,##0.########",chart._cultureInfo)}))},extend(Legend,CanvasJSObject),Legend.prototype.setLayout=function(){var container=this.dockInsidePlotArea?this.chart.plotArea:this.chart,freeSpace=container.layoutManager.getFreeSpace(),position=null,top=0,left=0,maxWidth=0,maxHeight=0,markerMargin=this.markerMargin=this.chart.options.legend&&!isNullOrUndefined(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var items=[],rows=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",position=this.verticalAlign,maxWidth=this.maxWidth=null!==this.maxWidth?this.maxWidth:freeSpace.width,maxHeight=this.maxHeight=null!==this.maxHeight?this.maxHeight:.5*freeSpace.height):"center"===this.verticalAlign&&(this.orientation="vertical",position=this.horizontalAlign,maxWidth=this.maxWidth=null!==this.maxWidth?this.maxWidth:.5*freeSpace.width,maxHeight=this.maxHeight=null!==this.maxHeight?this.maxHeight:freeSpace.height),this.errorMarkerColor=[];for(var i=0;i<this.dataSeries.length;i++){var dataSeries=this.dataSeries[i];if(dataSeries.dataPoints&&dataSeries.dataPoints.length){if("pie"!==dataSeries.type&&"doughnut"!==dataSeries.type&&"funnel"!==dataSeries.type&&"pyramid"!==dataSeries.type){var markerType=dataSeries.legendMarkerType=dataSeries.legendMarkerType?dataSeries.legendMarkerType:"line"!==dataSeries.type&&"stepLine"!==dataSeries.type&&"spline"!==dataSeries.type&&"scatter"!==dataSeries.type&&"bubble"!==dataSeries.type||!dataSeries.markerType?"error"===dataSeries.type&&dataSeries._linkedSeries?dataSeries._linkedSeries.legendMarkerType?dataSeries._linkedSeries.legendMarkerType:DataSeries.getDefaultLegendMarker(dataSeries._linkedSeries.type):DataSeries.getDefaultLegendMarker(dataSeries.type):dataSeries.markerType,legendText=dataSeries.legendText?dataSeries.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries,dataPoint:null}):dataSeries.name,markerColor=dataSeries.legendMarkerColor=dataSeries.legendMarkerColor?dataSeries.legendMarkerColor:dataSeries.markerColor?dataSeries.markerColor:"error"===dataSeries.type?isNullOrUndefined(dataSeries.whiskerColor)?dataSeries._colorSet[0]:dataSeries.whiskerColor:dataSeries._colorSet[0],markerSize=dataSeries.markerSize||"line"!==dataSeries.type&&"stepLine"!==dataSeries.type&&"spline"!==dataSeries.type?.75*this.lineHeight:0,markerBorderColor=dataSeries.legendMarkerBorderColor?dataSeries.legendMarkerBorderColor:dataSeries.markerBorderColor,markerBorderThickness=dataSeries.legendMarkerBorderThickness?dataSeries.legendMarkerBorderThickness:dataSeries.markerBorderThickness?Math.max(1,Math.round(.2*markerSize)):0;dataSeries._colorSet[0];"error"===dataSeries.type&&this.errorMarkerColor.push(markerColor);var item={markerType,markerColor,text:legendText=this.chart.replaceKeywordsWithValue(legendText,dataSeries.dataPoints[0],dataSeries,i),textBlock:null,chartType:dataSeries.type,markerSize,lineColor:dataSeries._colorSet[0],dataSeriesIndex:dataSeries.index,dataPointIndex:null,markerBorderColor,markerBorderThickness};items.push(item)}else for(var dataPointIndex=0;dataPointIndex<dataSeries.dataPoints.length;dataPointIndex++){var dataPoint=dataSeries.dataPoints[dataPointIndex];markerType=dataPoint.legendMarkerType?dataPoint.legendMarkerType:dataSeries.legendMarkerType?dataSeries.legendMarkerType:DataSeries.getDefaultLegendMarker(dataSeries.type),legendText=dataPoint.legendText?dataPoint.legendText:dataSeries.legendText?dataSeries.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries,dataPoint}):dataPoint.name?dataPoint.name:"DataPoint: "+(dataPointIndex+1),markerColor=dataPoint.legendMarkerColor?dataPoint.legendMarkerColor:dataSeries.legendMarkerColor?dataSeries.legendMarkerColor:dataPoint.color?dataPoint.color:dataSeries.color?dataSeries.color:dataSeries._colorSet[dataPointIndex%dataSeries._colorSet.length],markerSize=.75*this.lineHeight,markerBorderColor=dataPoint.legendMarkerBorderColor?dataPoint.legendMarkerBorderColor:dataSeries.legendMarkerBorderColor?dataSeries.legendMarkerBorderColor:dataPoint.markerBorderColor?dataPoint.markerBorderColor:dataSeries.markerBorderColor,markerBorderThickness=dataPoint.legendMarkerBorderThickness?dataPoint.legendMarkerBorderThickness:dataSeries.legendMarkerBorderThickness?dataSeries.legendMarkerBorderThickness:dataPoint.markerBorderThickness||dataSeries.markerBorderThickness?Math.max(1,Math.round(.2*markerSize)):0,item={markerType,markerColor,text:legendText=this.chart.replaceKeywordsWithValue(legendText,dataPoint,dataSeries,dataPointIndex),textBlock:null,chartType:dataSeries.type,markerSize,dataSeriesIndex:i,dataPointIndex,markerBorderColor,markerBorderThickness};(dataPoint.showInLegend||dataSeries.showInLegend&&!1!==dataPoint.showInLegend)&&items.push(item)}item=null}}if(!0===this.reversed&&items.reverse(),items.length>0){var row=null,rowIndex=0,textMaxWidth=0,columnHeight=0,itemWidth=0;textMaxWidth=null!==this.itemWidth?null!==this.itemMaxWidth?Math.min(this.itemWidth,this.itemMaxWidth,maxWidth):this.itemMaxWidth=Math.min(this.itemWidth,maxWidth):null!==this.itemMaxWidth?Math.min(this.itemMaxWidth,maxWidth):this.itemMaxWidth=maxWidth,textMaxWidth-=(markerSize=0===markerSize?.75*this.lineHeight:markerSize)+markerMargin;for(i=0;i<items.length;i++){var itemTextMaxWidth=textMaxWidth;"line"!==(item=items[i]).chartType&&"spline"!==item.chartType&&"stepLine"!==item.chartType||(itemTextMaxWidth-=.1*this.lineHeight*2),maxHeight<=0||void 0===maxHeight||itemTextMaxWidth<=0||void 0===itemTextMaxWidth||("horizontal"===this.orientation?(item.textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:itemTextMaxWidth,maxHeight:this.itemWrap?maxHeight:this.lineHeight,angle:0,text:item.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),item.textBlock.measureText(),null!==this.itemWidth&&(item.textBlock.width=this.itemWidth-(markerSize+markerMargin+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0))),(!row||row.width+Math.round(item.textBlock.width+markerSize+markerMargin+(0===row.width?0:this.horizontalSpacing)+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0))>maxWidth)&&(row={items:[],width:0},rows.push(row),this.height+=columnHeight,columnHeight=0),columnHeight=Math.max(columnHeight,item.textBlock.height),item.textBlock.x=row.width,item.textBlock.y=0,row.width+=Math.round(item.textBlock.width+markerSize+markerMargin+(0===row.width?0:this.horizontalSpacing)+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0)),row.items.push(item),this.width=Math.max(row.width,this.width)):(item.textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:textMaxWidth,maxHeight:!0===this.itemWrap?maxHeight:1.5*this.fontSize,angle:0,text:item.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),item.textBlock.measureText(),null!==this.itemWidth&&(item.textBlock.width=this.itemWidth-(markerSize+markerMargin+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0))),this.height<maxHeight-this.lineHeight?(row={items:[],width:0},rows.push(row)):(row=rows[rowIndex],rowIndex=(rowIndex+1)%rows.length),this.height+=item.textBlock.height,item.textBlock.x=row.width,item.textBlock.y=0,row.width+=Math.round(item.textBlock.width+markerSize+markerMargin+(0===row.width?0:this.horizontalSpacing)+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0)),row.items.push(item),this.width=Math.max(row.width,this.width)),itemWidth=item.textBlock.width+(markerSize+markerMargin+("line"===item.chartType||"spline"===item.chartType||"stepLine"===item.chartType?.1*this.lineHeight*2:0)))}this.itemWidth=itemWidth,!1===this.itemWrap?this.height=rows.length*this.lineHeight:this.height+=columnHeight,this.height=Math.min(maxHeight,this.height),this.width=Math.min(maxWidth,this.width)}"top"===this.verticalAlign?(left="left"===this.horizontalAlign?freeSpace.x1:"right"===this.horizontalAlign?freeSpace.x2-this.width:freeSpace.x1+freeSpace.width/2-this.width/2,top=freeSpace.y1):"center"===this.verticalAlign?(left="left"===this.horizontalAlign?freeSpace.x1:"right"===this.horizontalAlign?freeSpace.x2-this.width:freeSpace.x1+freeSpace.width/2-this.width/2,top=freeSpace.y1+freeSpace.height/2-this.height/2):"bottom"===this.verticalAlign&&(left="left"===this.horizontalAlign?freeSpace.x1:"right"===this.horizontalAlign?freeSpace.x2-this.width:freeSpace.x1+freeSpace.width/2-this.width/2,top=freeSpace.y2-this.height),this.items=items;for(i=0;i<this.items.length;i++){(item=items[i]).id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[item.id]={id:item.id,objectType:"legendItem",legendItemIndex:i,dataSeriesIndex:item.dataSeriesIndex,dataPointIndex:item.dataPointIndex}}this.markerSize=markerSize,this.rows=rows,items.length>0&&container.layoutManager.registerSpace(position,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:left,y1:top,x2:left+this.width,y2:top+this.height}},Legend.prototype.render=function(){var left=this.bounds.x1,top=this.bounds.y1,markerMargin=this.markerMargin,maxWidth=this.maxWidth,maxHeight=this.maxHeight,markerSize=this.markerSize,rows=this.rows;(this.borderThickness>0&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(left,top,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var rowHeight=0,i=0;i<rows.length;i++){for(var row=rows[i],columnHeight=0,itemIndex=0;itemIndex<row.items.length;itemIndex++){var item=row.items[itemIndex],itemX=item.textBlock.x+left+(0===itemIndex?.2*markerSize:this.horizontalSpacing),itemY=top+rowHeight,ghostX=itemX;if(this.chart.data[item.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(left,top,maxWidth,Math.max(maxHeight-maxHeight%this.lineHeight,0)),this.ctx.clip(),"line"!==item.chartType&&"stepLine"!==item.chartType&&"spline"!==item.chartType||(this.ctx.strokeStyle=item.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(itemX-.1*this.lineHeight,itemY+this.lineHeight/2),this.ctx.lineTo(itemX+.85*this.lineHeight,itemY+this.lineHeight/2),this.ctx.stroke(),ghostX-=.1*this.lineHeight),"error"===item.chartType){this.ctx.strokeStyle=this.errorMarkerColor[0];var markerBorderThickness=markerSize/8;this.ctx.lineWidth=markerBorderThickness,this.ctx.beginPath();var x=itemX-.08*this.lineHeight+.1*this.lineHeight,y=itemY+.15*this.lineHeight,width=.7*this.lineHeight,height=width+.02*this.lineHeight;this.ctx.moveTo(x,y),this.ctx.lineTo(x+width,y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(x+width/2,y),this.ctx.lineTo(x+width/2,y+height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(x,y+height),this.ctx.lineTo(x+width,y+height),this.ctx.stroke(),this.errorMarkerColor.shift()}var actualMarkerSize="error"===item.chartType||"line"===item.chartType||"spline"===item.chartType?item.markerSize/2:item.markerSize;RenderHelper.drawMarker(itemX+markerSize/2,itemY+this.lineHeight/2,this.ctx,item.markerType,actualMarkerSize,item.markerColor,item.markerBorderColor,item.markerBorderThickness),item.textBlock.x=itemX+markerMargin+markerSize,"line"!==item.chartType&&"stepLine"!==item.chartType&&"spline"!==item.chartType||(item.textBlock.x=item.textBlock.x+.1*this.lineHeight),item.textBlock.y=Math.round(itemY+this.lineHeight/2),item.textBlock.render(!0),this.ctx.restore(),columnHeight=itemIndex>0?Math.max(columnHeight,item.textBlock.height):item.textBlock.height,this.chart.data[item.dataSeriesIndex].visible||(this.ctx.globalAlpha=1);var hexColor=intToHexColorString(item.id);this.ghostCtx.fillStyle=hexColor,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(ghostX,item.textBlock.y-this.lineHeight/2,item.textBlock.x+item.textBlock.width-ghostX,item.textBlock.height),item.x1=this.chart._eventManager.objectMap[item.id].x1=ghostX,item.y1=this.chart._eventManager.objectMap[item.id].y1=item.textBlock.y-this.lineHeight/2,item.x2=this.chart._eventManager.objectMap[item.id].x2=item.textBlock.x+item.textBlock.width,item.y2=this.chart._eventManager.objectMap[item.id].y2=item.textBlock.y+item.textBlock.height-this.lineHeight/2}rowHeight+=columnHeight}},extend(DataSeries,CanvasJSObject),DataSeries.prototype.getDefaultAxisPlacement=function(){var type=this.type;return"column"===type||"line"===type||"stepLine"===type||"spline"===type||"area"===type||"stepArea"===type||"splineArea"===type||"stackedColumn"===type||"stackedLine"===type||"bubble"===type||"scatter"===type||"stackedArea"===type||"stackedColumn100"===type||"stackedLine100"===type||"stackedArea100"===type||"candlestick"===type||"ohlc"===type||"rangeColumn"===type||"rangeArea"===type||"rangeSplineArea"===type||"boxAndWhisker"===type||"waterfall"===type?"normal":"bar"===type||"stackedBar"===type||"stackedBar100"===type||"rangeBar"===type?"xySwapped":"pie"===type||"doughnut"===type||"funnel"===type||"pyramid"===type?"none":("error"!==type&&window.console.log("Unknown Chart Type: "+type),null)},DataSeries.getDefaultLegendMarker=function(type){return"column"===type||"stackedColumn"===type||"stackedLine"===type||"bar"===type||"stackedBar"===type||"stackedBar100"===type||"bubble"===type||"scatter"===type||"stackedColumn100"===type||"stackedLine100"===type||"stepArea"===type||"candlestick"===type||"ohlc"===type||"rangeColumn"===type||"rangeBar"===type||"rangeArea"===type||"rangeSplineArea"===type||"boxAndWhisker"===type||"waterfall"===type?"square":"line"===type||"stepLine"===type||"spline"===type||"pie"===type||"doughnut"===type?"circle":"area"===type||"splineArea"===type||"stackedArea"===type||"stackedArea100"===type||"funnel"===type||"pyramid"===type?"triangle":"error"===type?"none":(window.console.log("Unknown Chart Type: "+type),null)},DataSeries.prototype.getDataPointAtX=function(x,findClosest){if(!this.dataPoints||0===this.dataPoints.length)return null;var xRange,searchResult={dataPoint:null,distance:1/0,index:NaN},dataPoint=null,j=0,i=0,direction=1,minimumXDistance=1/0,forwardMissCount=0,backwardMissCount=0,searchStartIndex=0;"none"!==this.chart.plotInfo.axisPlacement&&(searchStartIndex=this.axisX.logarithmic?(xRange=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))>1?Math.min(Math.max((this.dataPoints.length-1)/xRange*Math.log(x/this.dataPoints[0].x)|0,0),this.dataPoints.length):0:(xRange=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)>0?Math.min(Math.max((this.dataPoints.length-1)/xRange*(x-this.dataPoints[0].x)|0,0),this.dataPoints.length):0);for(;;){if((i=direction>0?searchStartIndex+j:searchStartIndex-j)>=0&&i<this.dataPoints.length){dataPoint=this.dataPoints[i];var distance=this.axisX.logarithmic?dataPoint.x>x?dataPoint.x/x:x/dataPoint.x:Math.abs(dataPoint.x-x);distance<searchResult.distance&&(searchResult.dataPoint=dataPoint,searchResult.distance=distance,searchResult.index=i);if(distance<=minimumXDistance?minimumXDistance=distance:direction>0?forwardMissCount++:backwardMissCount++,forwardMissCount>1e3&&backwardMissCount>1e3)break}else if(searchStartIndex-j<0&&searchStartIndex+j>=this.dataPoints.length)break;-1===direction?(j++,direction=1):direction=-1}return findClosest||(searchResult.dataPoint.x.getTime?searchResult.dataPoint.x.getTime():searchResult.dataPoint.x)!==(x.getTime?x.getTime():x)?findClosest&&null!==searchResult.dataPoint?searchResult:null:searchResult},DataSeries.prototype.getDataPointAtXY=function(x,y,getClosest){if(!this.dataPoints||0===this.dataPoints.length||x<this.chart.plotArea.x1||x>this.chart.plotArea.x2||y<this.chart.plotArea.y1||y>this.chart.plotArea.y2)return null;getClosest=getClosest||!1;var results=[],j=0,i=0,direction=1,foundDataPoint=!1,minimumXDistance=1/0,forwardMissCount=0,backwardMissCount=0,searchStartIndex=0;if("none"!==this.chart.plotInfo.axisPlacement){var xRange,xval=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x,y});if(this.axisX.logarithmic)searchStartIndex=(xRange=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))>1?Math.min(Math.max((this.dataPoints.length-1)/xRange*Math.log(xval/this.dataPoints[0].x)|0,0),this.dataPoints.length):0;else searchStartIndex=(xRange=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)>0?Math.min(Math.max((this.dataPoints.length-1)/xRange*(xval-this.dataPoints[0].x)|0,0),this.dataPoints.length):0}for(;;){if((i=direction>0?searchStartIndex+j:searchStartIndex-j)>=0&&i<this.dataPoints.length){var id=this.dataPointIds[i],visualInfo=this.chart._eventManager.objectMap[id],dataPoint=this.dataPoints[i],distance=null;if(visualInfo){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":x>=visualInfo.x1&&x<=visualInfo.x2&&y>=visualInfo.y1&&y<=visualInfo.y2&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y1-y),Math.abs(visualInfo.y2-y))}),foundDataPoint=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var markerSize=getProperty("markerSize",dataPoint,this)||4,snapDistance=getClosest?20:markerSize;(distance=Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2)))<=snapDistance&&results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance}),(xDistance=Math.abs(visualInfo.x1-x))<=minimumXDistance?minimumXDistance=xDistance:direction>0?forwardMissCount++:backwardMissCount++,distance<=markerSize/2&&(foundDataPoint=!0);break;case"rangeArea":case"rangeSplineArea":var xDistance;markerSize=getProperty("markerSize",dataPoint,this)||4,snapDistance=getClosest?20:markerSize;(distance=Math.min(Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2)),Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y2-y,2))))<=snapDistance&&results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance}),(xDistance=Math.abs(visualInfo.x1-x))<=minimumXDistance?minimumXDistance=xDistance:direction>0?forwardMissCount++:backwardMissCount++,distance<=markerSize/2&&(foundDataPoint=!0);break;case"bubble":markerSize=visualInfo.size;(distance=Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2)))<=markerSize/2&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance}),foundDataPoint=!0);break;case"pie":case"doughnut":var center=visualInfo.center,innerRadius="doughnut"===this.type?visualInfo.percentInnerRadius*visualInfo.radius:0;if((distance=Math.sqrt(Math.pow(center.x-x,2)+Math.pow(center.y-y,2)))<visualInfo.radius&&distance>innerRadius){var deltaY=y-center.y,deltaX=x-center.x,angle=Math.atan2(deltaY,deltaX);angle<0&&(angle+=2*Math.PI),angle=Number(((angle/Math.PI*180%360+360)%360).toFixed(12));var startAngle=Number(((visualInfo.startAngle/Math.PI*180%360+360)%360).toFixed(12)),endAngle=Number(((visualInfo.endAngle/Math.PI*180%360+360)%360).toFixed(12));0===endAngle&&visualInfo.endAngle>1&&(endAngle=360),startAngle>=endAngle&&0!==dataPoint.y&&(endAngle+=360,angle<startAngle&&(angle+=360)),angle>startAngle&&angle<endAngle&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance:0}),foundDataPoint=!0)}break;case"funnel":case"pyramid":var x1,x2,funnelSection=visualInfo.funnelSection;y>funnelSection.y1&&y<funnelSection.y4&&(funnelSection.y6?y>funnelSection.y6?(x1=funnelSection.x6+(funnelSection.x5-funnelSection.x6)/(funnelSection.y5-funnelSection.y6)*(y-funnelSection.y6),x2=funnelSection.x3+(funnelSection.x4-funnelSection.x3)/(funnelSection.y4-funnelSection.y3)*(y-funnelSection.y3)):(x1=funnelSection.x1+(funnelSection.x6-funnelSection.x1)/(funnelSection.y6-funnelSection.y1)*(y-funnelSection.y1),x2=funnelSection.x2+(funnelSection.x3-funnelSection.x2)/(funnelSection.y3-funnelSection.y2)*(y-funnelSection.y2)):(x1=funnelSection.x1+(funnelSection.x4-funnelSection.x1)/(funnelSection.y4-funnelSection.y1)*(y-funnelSection.y1),x2=funnelSection.x2+(funnelSection.x3-funnelSection.x2)/(funnelSection.y3-funnelSection.y2)*(y-funnelSection.y2)),x>x1&&x<x2&&(results.push({dataPoint,dataPointIndex:visualInfo.dataPointIndex,dataSeries:this,distance:0}),foundDataPoint=!0));break;case"boxAndWhisker":(x>=visualInfo.x1-visualInfo.borderThickness/2&&x<=visualInfo.x2+visualInfo.borderThickness/2&&y>=visualInfo.y4-visualInfo.borderThickness/2&&y<=visualInfo.y1+visualInfo.borderThickness/2||Math.abs(visualInfo.x2-x+visualInfo.x1-x)<visualInfo.borderThickness&&y>=visualInfo.y1&&y<=visualInfo.y4)&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y2-y),Math.abs(visualInfo.y3-y))}),foundDataPoint=!0);break;case"candlestick":(x>=visualInfo.x1-visualInfo.borderThickness/2&&x<=visualInfo.x2+visualInfo.borderThickness/2&&y>=visualInfo.y2-visualInfo.borderThickness/2&&y<=visualInfo.y3+visualInfo.borderThickness/2||Math.abs(visualInfo.x2-x+visualInfo.x1-x)<visualInfo.borderThickness&&y>=visualInfo.y1&&y<=visualInfo.y4)&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y2-y),Math.abs(visualInfo.y3-y))}),foundDataPoint=!0);break;case"ohlc":(Math.abs(visualInfo.x2-x+visualInfo.x1-x)<visualInfo.borderThickness&&y>=visualInfo.y2&&y<=visualInfo.y3||x>=visualInfo.x1&&x<=(visualInfo.x2+visualInfo.x1)/2&&y>=visualInfo.y1-visualInfo.borderThickness/2&&y<=visualInfo.y1+visualInfo.borderThickness/2||x>=(visualInfo.x1+visualInfo.x2)/2&&x<=visualInfo.x2&&y>=visualInfo.y4-visualInfo.borderThickness/2&&y<=visualInfo.y4+visualInfo.borderThickness/2)&&(results.push({dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y2-y),Math.abs(visualInfo.y3-y))}),foundDataPoint=!0)}if(foundDataPoint||forwardMissCount>1e3&&backwardMissCount>1e3)break}}else if(searchStartIndex-j<0&&searchStartIndex+j>=this.dataPoints.length)break;-1===direction?(j++,direction=1):direction=-1}for(var closestResult=null,m=0;m<results.length;m++)closestResult?results[m].distance<=closestResult.distance&&(closestResult=results[m]):closestResult=results[m];return closestResult},DataSeries.prototype.getMarkerProperties=function(index,x,y,ctx){var dataPoints=this.dataPoints,markerColor=dataPoints[index].markerColor?dataPoints[index].markerColor:this.markerColor?this.markerColor:dataPoints[index].color?dataPoints[index].color:this.color?this.color:this._colorSet[index%this._colorSet.length],markerBorderColor=dataPoints[index].markerBorderColor?dataPoints[index].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,markerBorderThickness=dataPoints[index].markerBorderThickness?dataPoints[index].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null;return{x,y,ctx,type:dataPoints[index].markerType?dataPoints[index].markerType:this.markerType,size:dataPoints[index].markerSize?dataPoints[index].markerSize:this.markerSize,color:markerColor,borderColor:markerBorderColor,borderThickness:markerBorderThickness}},extend(Axis,CanvasJSObject),Axis.prototype.createExtraLabelsForLog=function(recursionCount){if(!((recursionCount=(recursionCount||0)+1)>5)){var start=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(start/this.viewportMinimum)<this.noTicks-1){for(var interval=Axis.getNiceNumber((start-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),i=Math.ceil(this.viewportMinimum/interval)*interval;i<start;i+=interval)i<this.viewportMinimum||this.logLabelValues.push(i);this.logLabelValues.sort(compareNumbers),this.createExtraLabelsForLog(recursionCount)}}},Axis.prototype.createLabels=function(){var textBlock,textBlockNext,sizeNext,endPoint,textBlockHeight,position,i=0,k=0,labelMaxWidth=0,labelMaxHeight=0,labelEffectiveMaxHeight=0,labelInterval=this.interval,intervalInPixels=0,labelMaxHeightLimit=.6*this.chart.height,appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],firstBreakIndex=appliedBreaks.length?isNullOrUndefined(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if("axisX"!==this.type||"dateTime"!==this.valueType||this.logarithmic){if(endPoint=this.viewportMaximum,this.labels){var tempInterval=Math.ceil(labelInterval),tempStartPoint=Math.ceil(this.intervalStartPosition),hasAllLabels=!1;for(i=tempStartPoint;i<this.viewportMaximum;i+=tempInterval){if(!this.labels[i]){hasAllLabels=!1;break}hasAllLabels=!0}hasAllLabels&&(labelInterval=this.interval=tempInterval,this.intervalStartPosition=tempStartPoint)}if(this.logarithmic&&!this.equidistantInterval){this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog());for(k=0,j=firstBreakIndex;k<this.logLabelValues.length;k++)if((i=this.logLabelValues[k])<this.viewportMinimum)k++;else{for(;j<appliedBreaks.length&&i>appliedBreaks[j].endValue;j++);if(position=i,!(j<appliedBreaks.length&&i>=appliedBreaks[j].startValue&&i<=appliedBreaks[j].endValue)){text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:position,label:this.labels[position]?this.labels[position]:null}):"axisX"===this.type&&this.labels[position]?this.labels[position]:numberFormat(position,this.valueFormatString,this.chart._cultureInfo);textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:labelMaxWidth,maxHeight:labelMaxHeight,angle:this.labelAngle,text:this.prefix+text+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,cornerRadius:this.labelCornerRadius,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position,textBlock,effectiveHeight:null})}}}for(j=firstBreakIndex,i=this.intervalStartPosition;i<=endPoint;i=parseFloat(this.interval<1e-12?this.logarithmic&&this.equidistantInterval?i*Math.pow(this.logarithmBase,this.interval):i+this.interval:(this.logarithmic&&this.equidistantInterval?i*Math.pow(this.logarithmBase,this.interval):i+this.interval).toFixed(12))){for(;j<appliedBreaks.length&&i>appliedBreaks[j].endValue;j++);if(position=i,!(j<appliedBreaks.length&&i>=appliedBreaks[j].startValue&&i<=appliedBreaks[j].endValue)){text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:position,label:this.labels[position]?this.labels[position]:null}):"axisX"===this.type&&this.labels[position]?this.labels[position]:numberFormat(position,this.valueFormatString,this.chart._cultureInfo);textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:labelMaxWidth,maxHeight:labelMaxHeight,angle:this.labelAngle,text:this.prefix+text+this.suffix,textAlign:this.labelTextAlign,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position,textBlock,effectiveHeight:null})}}}else{this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),endPoint=addToDateTime(new Date(this.viewportMaximum),this.interval,this.intervalType);for(var j=firstBreakIndex,i=this.intervalStartPosition;i<endPoint;addToDateTime(i,labelInterval,this.intervalType)){for(var timeInMilliseconds=i.getTime();j<appliedBreaks.length&&timeInMilliseconds>appliedBreaks[j].endValue;j++);if(position=timeInMilliseconds,!(j<appliedBreaks.length&&timeInMilliseconds>=appliedBreaks[j].startValue&&timeInMilliseconds<=appliedBreaks[j].endValue)){var text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(position),label:this.labels[position]?this.labels[position]:null}):"axisX"===this.type&&this.labels[position]?this.labels[position]:dateFormat(position,this.valueFormatString,this.chart._cultureInfo);textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:labelMaxWidth,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:labelMaxHeight,angle:this.labelAngle,text:this.prefix+text+this.suffix,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position,textBlock,effectiveHeight:null,breaksLabelType:undefined})}}}"bottom"===this._position||"top"===this._position?(intervalInPixels=this.logarithmic&&!this.equidistantInterval&&this._labels.length>=2?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*convertToNumber(this.interval,this.intervalType),labelMaxWidth=void 0===this.options.labelMaxWidth?.5*this.chart.width|0:this.options.labelMaxWidth,this.chart.panEnabled||(labelMaxHeight=void 0===this.options.labelWrap||this.labelWrap?.8*this.chart.height|0:1.5*this.labelFontSize)):"left"!==this._position&&"right"!==this._position||(intervalInPixels=this.logarithmic&&!this.equidistantInterval&&this._labels.length>=2?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*convertToNumber(this.interval,this.intervalType),this.chart.panEnabled||(labelMaxWidth=void 0===this.options.labelMaxWidth?.3*this.chart.width|0:this.options.labelMaxWidth),labelMaxHeight=void 0===this.options.labelWrap||this.labelWrap?.3*this.chart.height|0:1.5*this.labelFontSize);for(k=0;k<this._labels.length;k++){(textBlock=this._labels[k].textBlock).maxWidth=labelMaxWidth,textBlock.maxHeight=labelMaxHeight,textBlockHeight=(size=textBlock.measureText()).height}var effectiveLabelHeights=[],labelOverlapWidth=0,labelOverLapHeight=0;if(this.labelAutoFit||this.options.labelAutoFit)if(isNullOrUndefined(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,this.labelAngle>90&&this.labelAngle<270?this.labelAngle-=180:this.labelAngle>=270&&this.labelAngle<=360&&(this.labelAngle-=360)),"bottom"===this._position||"top"===this._position){j=0;labelMaxWidth=.9*intervalInPixels|0;var labelWordMaxWidth=0;if(!this.chart.panEnabled&&this._labels.length>=1){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,i=0;i<this._labels.length;i++)if(!this._labels[i].breaksLabelType){var labelIndex,words=(textBlock=this._labels[i].textBlock).text.split(" ");for(k=0;k<words.length;k++){var testLine=words[k];this.ctx.font=textBlock.fontStyle+" "+textBlock.fontWeight+" "+textBlock.fontSize+"px "+textBlock.fontFamily;var metrics=this.ctx.measureText(testLine);metrics.width>labelWordMaxWidth&&(labelIndex=i,labelWordMaxWidth=metrics.width)}}for(i=this.intervalStartPosition<this.viewportMinimum?1:0;i<this._labels.length;i++)if(!this._labels[i].breaksLabelType){var size=(textBlock=this._labels[i].textBlock).measureText();for(j=i+1;j<this._labels.length;j++)if(!this._labels[j].breaksLabelType){sizeNext=(textBlockNext=this._labels[j].textBlock).measureText();break}if(effectiveLabelHeights.push(textBlock.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,effectiveLabelHeights),labelMaxWidth*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(labelMaxHeight-textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),labelEffectiveMaxHeight=labelMaxWidth*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(labelMaxHeight-textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),isNullOrUndefined(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle){this.sessionVariables.labelMaxHeight=0===this.labelAngle?labelMaxHeight:Math.min((labelEffectiveMaxHeight-labelMaxWidth*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),labelEffectiveMaxHeight);labelEffectiveMaxWidthLimit=(labelMaxHeightLimit-(textBlockHeight+textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25));if(isNullOrUndefined(this.options.labelWrap)){if(isNullOrUndefined(this.options.labelWrap))if(isNullOrUndefined(this.options.labelMaxWidth)){if(!isNullOrUndefined(sizeNext)){var adjacentLabelsWidth=size.width+sizeNext.width|0,labelFontSize=this.labelFontSize;if(labelWordMaxWidth<labelMaxWidth)adjacentLabelsWidth-2*labelMaxWidth>labelOverlapWidth&&(labelOverlapWidth=adjacentLabelsWidth-2*labelMaxWidth,adjacentLabelsWidth>=2*labelMaxWidth&&adjacentLabelsWidth<2.2*labelMaxWidth?(this.sessionVariables.labelMaxWidth=labelMaxWidth,isNullOrUndefined(this.options.labelFontSize)&&labelFontSize>12&&(labelFontSize=Math.floor(12/13*labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):adjacentLabelsWidth>=2.2*labelMaxWidth&&adjacentLabelsWidth<2.8*labelMaxWidth?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit,this.sessionVariables.labelFontSize=labelFontSize):adjacentLabelsWidth>=2.8*labelMaxWidth&&adjacentLabelsWidth<3.2*labelMaxWidth?(this.sessionVariables.labelMaxWidth=Math.max(labelMaxWidth,labelWordMaxWidth),this.sessionVariables.labelWrap=!0,isNullOrUndefined(this.options.labelFontSize)&&this.labelFontSize>12&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):adjacentLabelsWidth>=3.2*labelMaxWidth&&adjacentLabelsWidth<3.6*labelMaxWidth?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit,this.sessionVariables.labelFontSize=this.labelFontSize):adjacentLabelsWidth>3.6*labelMaxWidth&&adjacentLabelsWidth<5*labelMaxWidth?(isNullOrUndefined(this.options.labelFontSize)&&labelFontSize>12&&(labelFontSize=Math.floor(12/13*labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?labelFontSize:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit):adjacentLabelsWidth>5*labelMaxWidth&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelFontSize=labelFontSize,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelAngle=this.labelAngle));else if(labelIndex===i&&(0===labelIndex&&labelWordMaxWidth+this._labels[labelIndex+1].textBlock.measureText().width-2*labelMaxWidth>labelOverlapWidth||labelIndex===this._labels.length-1&&labelWordMaxWidth+this._labels[labelIndex-1].textBlock.measureText().width-2*labelMaxWidth>labelOverlapWidth||labelIndex>0&&labelIndex<this._labels.length-1&&labelWordMaxWidth+this._labels[labelIndex+1].textBlock.measureText().width-2*labelMaxWidth>labelOverlapWidth&&labelWordMaxWidth+this._labels[labelIndex-1].textBlock.measureText().width-2*labelMaxWidth>labelOverlapWidth))labelOverlapWidth=0===labelIndex?labelWordMaxWidth+this._labels[labelIndex+1].textBlock.measureText().width-2*labelMaxWidth:labelWordMaxWidth+this._labels[labelIndex-1].textBlock.measureText().width-2*labelMaxWidth,this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?labelFontSize:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit;else if(0===labelOverlapWidth)for(this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?labelFontSize:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,k=0;k<this._labels.length;k++)(textBlock=this._labels[k].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(labelMaxWidth,labelWordMaxWidth),labelEffectiveMaxWidthLimit),size=textBlock.measureText(),k<this._labels.length-1&&(j=k+1,(textBlockNext=this._labels[j].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(labelMaxWidth,labelWordMaxWidth),labelEffectiveMaxWidthLimit),sizeNext=textBlockNext.measureText(),(size.width+sizeNext.width|0)>2*labelMaxWidth&&(this.sessionVariables.labelAngle=-25))}}else this.options.labelMaxWidth<labelMaxWidth?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=labelEffectiveMaxHeight):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight)}else this.labelWrap?isNullOrUndefined(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(labelMaxWidth,labelWordMaxWidth),labelEffectiveMaxWidthLimit),this.sessionVariables.labelWrap=this.labelWrap,sizeNext&&(size.width+sizeNext.width|0)>2*labelMaxWidth&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>labelMaxWidth?-25:this.sessionVariables.labelAngle):isNullOrUndefined(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelMaxWidth=labelMaxWidth,sizeNext&&(size.width+sizeNext.width|0)>2*labelMaxWidth&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>labelMaxWidth?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelWrap=this.labelWrap)}else{this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=0===this.labelAngle?labelMaxHeight:Math.min((labelEffectiveMaxHeight-labelMaxWidth*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),labelEffectiveMaxHeight);var labelEffectiveMaxWidthLimit=0!=this.labelAngle?(labelMaxHeightLimit-(textBlockHeight+textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):labelMaxWidth;this.sessionVariables.labelMaxHeight=labelMaxHeight=this.labelWrap?(labelMaxHeightLimit-labelEffectiveMaxWidthLimit*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,isNullOrUndefined(this.options.labelWrap)?isNullOrUndefined(this.options.labelWrap)&&(this.labelWrap&&!isNullOrUndefined(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:labelEffectiveMaxWidthLimit,this.sessionVariables.labelMaxHeight=labelMaxHeight):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=labelEffectiveMaxWidthLimit,this.sessionVariables.labelMaxHeight=labelEffectiveMaxHeight<.9*intervalInPixels?.9*intervalInPixels:labelEffectiveMaxHeight,this.sessionVariables.labelWrap=this.labelWrap)):this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:labelEffectiveMaxWidthLimit,this.sessionVariables.labelMaxHeight=labelMaxHeight):(isNullOrUndefined(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:labelEffectiveMaxWidthLimit,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=labelMaxHeight)}}for(k=0;k<this._labels.length;k++)(textBlock=this._labels[k].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,textBlock.fontSize=this.sessionVariables.labelFontSize,textBlock.angle=this.labelAngle=this.sessionVariables.labelAngle,textBlock.wrap=this.labelWrap=this.sessionVariables.labelWrap,textBlock.maxHeight=this.sessionVariables.labelMaxHeight,textBlock.measureText()}else for(i=0;i<this._labels.length;i++)(textBlock=this._labels[i].textBlock).maxWidth=this.labelMaxWidth=isNullOrUndefined(this.options.labelMaxWidth)?isNullOrUndefined(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=labelMaxWidth:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,textBlock.fontSize=this.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?isNullOrUndefined(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,textBlock.angle=this.labelAngle=isNullOrUndefined(this.options.labelAngle)?isNullOrUndefined(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,textBlock.wrap=this.labelWrap=isNullOrUndefined(this.options.labelWrap)?isNullOrUndefined(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,textBlock.maxHeight=isNullOrUndefined(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=labelMaxHeight:this.sessionVariables.labelMaxHeight,textBlock.measureText()}else if("left"===this._position||"right"===this._position){j=0;if(labelMaxWidth=isNullOrUndefined(this.options.labelMaxWidth)?.3*this.chart.width|0:this.options.labelMaxWidth,labelMaxHeight=void 0===this.options.labelWrap||this.labelWrap?.3*this.chart.height|0:1.5*this.labelFontSize,!this.chart.panEnabled&&this._labels.length>=1){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelAngle=isNullOrUndefined(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,i=0;i<this._labels.length;i++)if(!this._labels[i].breaksLabelType){size=(textBlock=this._labels[i].textBlock).measureText();for(j=i+1;j<this._labels.length;j++)if(!this._labels[j].breaksLabelType){sizeNext=(textBlockNext=this._labels[j].textBlock).measureText();break}if(effectiveLabelHeights.push(textBlock.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,effectiveLabelHeights),labelEffectiveMaxHeight=labelMaxWidth*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(labelMaxHeight-textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),labelMaxWidth*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(labelMaxHeight-textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),isNullOrUndefined(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle)if(isNullOrUndefined(this.options.labelWrap)){if(isNullOrUndefined(this.options.labelWrap))if(isNullOrUndefined(this.options.labelMaxWidth)){if(!isNullOrUndefined(sizeNext)){var adjacentLabelsHeight=size.height+sizeNext.height|0;adjacentLabelsHeight-2*labelMaxHeight>labelOverLapHeight&&(labelOverLapHeight=adjacentLabelsHeight-2*labelMaxHeight,adjacentLabelsHeight>=2*labelMaxHeight&&adjacentLabelsHeight<2.4*labelMaxHeight?(isNullOrUndefined(this.options.labelFontSize)&&this.labelFontSize>12&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):adjacentLabelsHeight>=2.4*labelMaxHeight&&adjacentLabelsHeight<2.8*labelMaxHeight?(this.sessionVariables.labelMaxHeight=labelEffectiveMaxHeight,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):adjacentLabelsHeight>=2.8*labelMaxHeight&&adjacentLabelsHeight<3.2*labelMaxHeight?(this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelWrap=!0,isNullOrUndefined(this.options.labelFontSize)&&this.labelFontSize>12&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=isNullOrUndefined(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):adjacentLabelsHeight>=3.2*labelMaxHeight&&adjacentLabelsHeight<3.6*labelMaxHeight?(this.sessionVariables.labelMaxHeight=labelEffectiveMaxHeight,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):adjacentLabelsHeight>3.6*labelMaxHeight&&adjacentLabelsHeight<10*labelMaxHeight?(isNullOrUndefined(this.options.labelFontSize)&&this.labelFontSize>12&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelAngle=isNullOrUndefined(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):adjacentLabelsHeight>10*labelMaxHeight&&adjacentLabelsHeight<50*labelMaxHeight&&(isNullOrUndefined(this.options.labelFontSize)&&this.labelFontSize>12&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),size=textBlock.measureText()),this.sessionVariables.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelAngle=isNullOrUndefined(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))}}else this.sessionVariables.labelMaxHeight=labelMaxHeight,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth}else this.labelWrap||this.labelMaxWidth?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight):(this.sessionVariables.labelMaxWidth=labelMaxWidth,this.sessionVariables.labelMaxHeight=labelMaxHeight);else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=0===this.labelAngle?labelMaxWidth:Math.min((labelEffectiveMaxHeight-labelMaxHeight*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),labelMaxHeight),isNullOrUndefined(this.options.labelWrap)?isNullOrUndefined(this.options.labelWrap)&&(this.labelWrap&&!isNullOrUndefined(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=labelEffectiveMaxHeight):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:labelMaxWidth,this.sessionVariables.labelMaxHeight=0===this.labelAngle?labelMaxHeight:labelEffectiveMaxHeight,isNullOrUndefined(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=0===this.labelAngle?labelMaxHeight:labelEffectiveMaxHeight,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=labelMaxWidth):(this.sessionVariables.labelMaxHeight=labelMaxHeight,isNullOrUndefined(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap)}for(k=0;k<this._labels.length;k++)(textBlock=this._labels[k].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,textBlock.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,textBlock.angle=this.labelAngle=this.sessionVariables.labelAngle,textBlock.wrap=this.labelWrap=this.sessionVariables.labelWrap,textBlock.maxHeight=this.sessionVariables.labelMaxHeight,textBlock.measureText()}else for(i=0;i<this._labels.length;i++)(textBlock=this._labels[i].textBlock).maxWidth=this.labelMaxWidth=isNullOrUndefined(this.options.labelMaxWidth)?isNullOrUndefined(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=labelMaxWidth:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,textBlock.fontSize=this.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?isNullOrUndefined(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,textBlock.angle=this.labelAngle=isNullOrUndefined(this.options.labelAngle)?isNullOrUndefined(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,textBlock.wrap=this.labelWrap=isNullOrUndefined(this.options.labelWrap)?isNullOrUndefined(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,textBlock.maxHeight=isNullOrUndefined(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=labelMaxHeight:this.sessionVariables.labelMaxHeight,textBlock.measureText()}for(i=0;i<this.stripLines.length;i++){var stripLineLabelMaxWidth,stripLineLabelMaxHeight,stripLine=this.stripLines[i];"outside"===stripLine.labelPlacement?(stripLineLabelMaxWidth=this.sessionVariables.labelMaxWidth,"bottom"!==this._position&&"top"!==this._position||(isNullOrUndefined(stripLine.options.labelWrap)&&!isNullOrUndefined(this.sessionVariables.stripLineLabelMaxHeight)?stripLineLabelMaxHeight=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=stripLineLabelMaxHeight=stripLine.labelWrap?.8*this.chart.height|0:1.5*this.labelFontSize),"left"!==this._position&&"right"!==this._position||(isNullOrUndefined(stripLine.options.labelWrap)&&!isNullOrUndefined(this.sessionVariables.stripLineLabelMaxHeight)?stripLineLabelMaxHeight=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=stripLineLabelMaxHeight=stripLine.labelWrap?.8*this.chart.width|0:1.5*this.labelFontSize),isNullOrUndefined(stripLine.labelBackgroundColor)&&(stripLine.labelBackgroundColor="#EEEEEE")):(stripLineLabelMaxWidth="bottom"===this._position||"top"===this._position?.9*this.chart.width|0:.9*this.chart.height|0,stripLineLabelMaxHeight=isNullOrUndefined(stripLine.options.labelWrap)||stripLine.labelWrap?"bottom"===this._position||"top"===this._position?.8*this.chart.width|0:.8*this.chart.height|0:1.5*this.labelFontSize,isNullOrUndefined(stripLine.labelBackgroundColor)&&(isNullOrUndefined(stripLine.startValue)&&0!==stripLine.startValue?stripLine.labelBackgroundColor=isCanvasSupported?"transparent":null:stripLine.labelBackgroundColor="#EEEEEE")),textBlock=new TextBlock(this.ctx,{x:0,y:0,backgroundColor:stripLine.labelBackgroundColor,borderColor:stripLine.labelBorderColor,borderThickness:stripLine.labelBorderThickness,cornerRadius:stripLine.labelCornerRadius,maxWidth:stripLine.options.labelMaxWidth?stripLine.options.labelMaxWidth:stripLineLabelMaxWidth,maxHeight:stripLineLabelMaxHeight,angle:this.labelAngle,text:stripLine.labelFormatter?stripLine.labelFormatter({chart:this.chart,axis:this,stripLine}):stripLine.label,textAlign:this.labelTextAlign,fontSize:"outside"===stripLine.labelPlacement?stripLine.options.labelFontSize?stripLine.labelFontSize:this.labelFontSize:stripLine.labelFontSize,fontFamily:"outside"===stripLine.labelPlacement?stripLine.options.labelFontFamily?stripLine.labelFontFamily:this.labelFontFamily:stripLine.labelFontFamily,fontWeight:"outside"===stripLine.labelPlacement?stripLine.options.labelFontWeight?stripLine.labelFontWeight:this.labelFontWeight:stripLine.labelFontWeight,fontColor:stripLine.labelFontColor||stripLine.color,fontStyle:"outside"===stripLine.labelPlacement?stripLine.options.labelFontStyle?stripLine.labelFontStyle:this.fontWeight:stripLine.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:stripLine.value,textBlock,effectiveHeight:null,stripLine})}},Axis.prototype.createLabelsAndCalculateWidth=function(){var maxLabelEffectiveWidth=0,i=0;this._labels=[],this._stripLineLabels=[];var padding=this.chart.isNavigator?0:5;if("left"===this._position||"right"===this._position){if(this.createLabels(),"inside"!=this.labelPlacement||"inside"===this.labelPlacement&&this._index>0)for(i=0;i<this._labels.length;i++){var size=(textBlock=this._labels[i].textBlock).measureText(),labelEffectiveWidth=0;maxLabelEffectiveWidth<(labelEffectiveWidth=0===this.labelAngle?size.width:size.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(size.height-textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(maxLabelEffectiveWidth=labelEffectiveWidth),this._labels[i].effectiveWidth=labelEffectiveWidth}for(i=0;i<this._stripLineLabels.length;i++)if("outside"===this._stripLineLabels[i].stripLine.labelPlacement&&this._stripLineLabels[i].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[i].stripLine.value<=this.viewportMaximum){var textBlock;size=(textBlock=this._stripLineLabels[i].textBlock).measureText(),labelEffectiveWidth=0;maxLabelEffectiveWidth<(labelEffectiveWidth=0===this.labelAngle?size.width:size.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(size.height-textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(maxLabelEffectiveWidth=labelEffectiveWidth),this._stripLineLabels[i].effectiveWidth=labelEffectiveWidth}}return(this.title?this._titleTextBlock.measureText().height+2:0)+maxLabelEffectiveWidth+("inside"===this.tickPlacement?0:this.tickLength)+padding},Axis.prototype.createLabelsAndCalculateHeight=function(){var textBlock,maxLabelEffectiveHeight=0;this._labels=[],this._stripLineLabels=[];var i=0,padding=this.chart.isNavigator?0:5;if("bottom"===this._position||"top"===this._position){if(this.createLabels(),"inside"!=this.labelPlacement||"inside"===this.labelPlacement&&this._index>0)for(i=0;i<this._labels.length;i++){var size=(textBlock=this._labels[i].textBlock).measureText(),labelEffectiveHeight=0;maxLabelEffectiveHeight<(labelEffectiveHeight=0===this.labelAngle?size.height:size.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(size.height-textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(maxLabelEffectiveHeight=labelEffectiveHeight),this._labels[i].effectiveHeight=labelEffectiveHeight}for(i=0;i<this._stripLineLabels.length;i++)if("outside"===this._stripLineLabels[i].stripLine.labelPlacement&&this._stripLineLabels[i].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[i].stripLine.value<=this.viewportMaximum){size=(textBlock=this._stripLineLabels[i].textBlock).measureText(),labelEffectiveHeight=0;maxLabelEffectiveHeight<(labelEffectiveHeight=0===this.labelAngle?size.height:size.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(size.height-textBlock.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(maxLabelEffectiveHeight=labelEffectiveHeight),this._stripLineLabels[i].effectiveHeight=labelEffectiveHeight}}return(this.title?this._titleTextBlock.measureText().height+2:0)+maxLabelEffectiveHeight+("inside"===this.tickPlacement?0:this.tickLength)+padding},Axis.setLayout=function(axisX,axisX2,axisY,axisY2,axisPlacement,freeSpace){var x1,y1,x2,y2,chart=axisX[0]?axisX[0].chart:axisX2[0].chart,maxPadding=chart.isNavigator?0:10,axes=(chart.ctx,chart._axes);if(axisX&&axisX.length>0)for(var k=0;k<axisX.length;k++)axisX[k]&&axisX[k].calculateAxisParameters();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].calculateAxisParameters();if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].calculateAxisParameters();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].calculateAxisParameters();for(k=0;k<axes.length;k++)if(axes[k]&&axes[k].scaleBreaks&&axes[k].scaleBreaks._appliedBreaks.length)for(var appliedBreaks=axes[k].scaleBreaks._appliedBreaks,i=0;i<appliedBreaks.length&&!(appliedBreaks[i].startValue>axes[k].viewportMaximum);i++)appliedBreaks[i].endValue<axes[k].viewportMinimum||(isNullOrUndefined(axes[k].scaleBreaks.firstBreakIndex)&&(axes[k].scaleBreaks.firstBreakIndex=i),appliedBreaks[i].startValue>=axes[k].viewPortMinimum&&(axes[k].scaleBreaks.lastBreakIndex=i));i=0;var firstLabelPosition,lastLabelPosition,xFlag,x2Flag,yFlag,y2Flag,firstLabelWidthX=0,lastLabelWidthX=0,firstLabelWidthY=0,lastLabelWidthY=0,firstLabelWidthY2=0,lastLabelWidthY2=0,lastLabelWidthOutside=0,firstLabelOutside=0;xFlag=x2Flag=yFlag=y2Flag=!1;for(k=0;k<axes.length;k++)axes[k]&&axes[k].title&&(axes[k]._titleTextBlock=new TextBlock(axes[k].ctx,{text:axes[k].title,horizontalAlign:"center",fontSize:axes[k].titleFontSize,fontFamily:axes[k].titleFontFamily,fontWeight:axes[k].titleFontWeight,fontColor:axes[k].titleFontColor,fontStyle:axes[k].titleFontStyle,borderColor:axes[k].titleBorderColor,borderThickness:axes[k].titleBorderThickness,backgroundColor:axes[k].titleBackgroundColor,cornerRadius:axes[k].titleCornerRadius,textBaseline:"top"}));for(k=0;k<axes.length;k++)if(axes[k].title)switch(axes[k]._position){case"left":axes[k]._titleTextBlock.maxWidth=axes[k].titleMaxWidth||freeSpace.height,axes[k]._titleTextBlock.maxHeight=axes[k].titleWrap?.8*freeSpace.width:1.5*axes[k].titleFontSize,axes[k]._titleTextBlock.angle=-90;break;case"right":axes[k]._titleTextBlock.maxWidth=axes[k].titleMaxWidth||freeSpace.height,axes[k]._titleTextBlock.maxHeight=axes[k].titleWrap?.8*freeSpace.width:1.5*axes[k].titleFontSize,axes[k]._titleTextBlock.angle=90;break;default:axes[k]._titleTextBlock.maxWidth=axes[k].titleMaxWidth||freeSpace.width,axes[k]._titleTextBlock.maxHeight=axes[k].titleWrap?.8*freeSpace.height:1.5*axes[k].titleFontSize,axes[k]._titleTextBlock.angle=0}if("normal"===axisPlacement){for(var axisXHeight=[],axisX2Height=[],axisYWidth=[],axisY2Width=[],axisXHeights=[],axisX2Heights=[],axisYWidths=[],axisY2Widths=[];i<4;){var prevAxisXHeight=0,prevAxisX2Height=0,prevAxisYWidth=0,prevAxisY2Width=0,axisXMargin=0,axisX2Margin=0,axisYMargin=0,axisY2Margin=0,axisXTotalHeight=0,axisX2TotalHeight=0,axisYTotalWidth=0,axisY2TotalWidth=0;if(axisY&&axisY.length>0){axisYWidth=[],axisYTotalWidth=0;for(k=0;k<axisY.length;k++)axisYWidth.push(Math.ceil(axisY[k]?axisY[k].createLabelsAndCalculateWidth():0)),axisYTotalWidth+=axisYWidth[k],axisYMargin+=axisY[k]&&!chart.isNavigator?axisY[k].margin:0;axisYWidths.push(axisYWidth)}else axisYWidth.push(Math.ceil(axisY[0]?axisY[0].createLabelsAndCalculateWidth():0)),axisYWidths.push(axisYWidth);if(axisY2&&axisY2.length>0){axisY2Width=[],axisY2TotalWidth=0;for(k=0;k<axisY2.length;k++)axisY2Width.push(Math.ceil(axisY2[k]?axisY2[k].createLabelsAndCalculateWidth():0)),axisY2TotalWidth+=axisY2Width[k],axisY2Margin+=axisY2[k]?axisY2[k].margin:0;axisY2Widths.push(axisY2Width)}else axisY2Width.push(Math.ceil(axisY2[0]?axisY2[0].createLabelsAndCalculateWidth():0)),axisY2Widths.push(axisY2Width);if(x1=Math.round(freeSpace.x1+axisYTotalWidth+axisYMargin),x2=Math.round(freeSpace.x2-axisY2TotalWidth-axisY2Margin>chart.width-maxPadding?chart.width-maxPadding:freeSpace.x2-axisY2TotalWidth-axisY2Margin),axisX&&axisX.length>0){axisXHeight=[],axisXTotalHeight=0;for(k=0;k<axisX.length;k++)axisX[k]&&(axisX[k].lineCoordinates={}),axisX[k].lineCoordinates.width=Math.abs(x2-x1),axisX[k].title&&(axisX[k]._titleTextBlock.maxWidth=axisX[k].titleMaxWidth>0&&axisX[k].titleMaxWidth<axisX[k].lineCoordinates.width?axisX[k].titleMaxWidth:axisX[k].lineCoordinates.width),axisXHeight.push(Math.ceil(axisX[k]?axisX[k].createLabelsAndCalculateHeight():0)),axisXTotalHeight+=axisXHeight[k],axisXMargin+=axisX[k]&&!chart.isNavigator?axisX[k].margin:0;axisXHeights.push(axisXHeight)}else axisXHeight.push(Math.ceil(axisX[0]?axisX[0].createLabelsAndCalculateHeight():0)),axisXHeights.push(axisXHeight);if(axisX2&&axisX2.length>0){axisX2Height=[],axisX2TotalHeight=0;for(k=0;k<axisX2.length;k++)axisX2[k]&&(axisX2[k].lineCoordinates={}),axisX2[k].lineCoordinates.width=Math.abs(x2-x1),axisX2[k].title&&(axisX2[k]._titleTextBlock.maxWidth=axisX2[k].titleMaxWidth>0&&axisX2[k].titleMaxWidth<axisX2[k].lineCoordinates.width?axisX2[k].titleMaxWidth:axisX2[k].lineCoordinates.width),axisX2Height.push(Math.ceil(axisX2[k]?axisX2[k].createLabelsAndCalculateHeight():0)),axisX2TotalHeight+=axisX2Height[k],axisX2Margin+=axisX2[k]&&!chart.isNavigator?axisX2[k].margin:0;axisX2Heights.push(axisX2Height)}else axisX2Height.push(Math.ceil(axisX2[0]?axisX2[0].createLabelsAndCalculateHeight():0)),axisX2Heights.push(axisX2Height);if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++){if(axisX[k]){if(axisX[k].lineCoordinates.x1=x1,x2=Math.round(freeSpace.x2-axisY2TotalWidth-axisY2Margin>chart.width-maxPadding?chart.width-maxPadding:freeSpace.x2-axisY2TotalWidth-axisY2Margin),axisX[k]._labels&&axisX[k]._labels.length>1){var firstLabel=0,lastLabel=0;firstLabel=axisX[k]._labels[1],lastLabel="dateTime"===axisX[k].valueType?axisX[k]._labels[axisX[k]._labels.length-2]:axisX[k]._labels[axisX[k]._labels.length-1],firstLabelWidthX=firstLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(firstLabel.textBlock.angle))+(firstLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(firstLabel.textBlock.angle)),lastLabelWidthX=lastLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(lastLabel.textBlock.angle))+(lastLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(lastLabel.textBlock.angle))}!axisX[k]||!axisX[k].labelAutoFit||isNullOrUndefined(firstLabelPosition)||isNullOrUndefined(lastLabelPosition)||chart.isNavigator||chart.stockChart||(lastLabelWidthOutside=0,axisX[k].labelAngle>0?lastLabelPosition+lastLabelWidthX>x2&&(lastLabelWidthOutside+=axisX[k].labelAngle>0?lastLabelPosition+lastLabelWidthX-x2-axisY2TotalWidth:0):axisX[k].labelAngle<0?firstLabelPosition-firstLabelWidthX<x1&&firstLabelPosition-firstLabelWidthX<axisX[k].viewportMinimum&&(firstLabelOutside=x1-(axisYMargin+axisX[k].tickLength+axisYWidth+firstLabelPosition-firstLabelWidthX+axisX[k].labelFontSize/2)):0===axisX[k].labelAngle&&(lastLabelPosition+lastLabelWidthX>x2&&(lastLabelWidthOutside=lastLabelPosition+lastLabelWidthX/2-x2-axisY2TotalWidth),firstLabelPosition-firstLabelWidthX<x1&&firstLabelPosition-firstLabelWidthX<axisX[k].viewportMinimum&&(firstLabelOutside=x1-axisYMargin-axisX[k].tickLength-axisYWidth-firstLabelPosition+firstLabelWidthX/2)),axisX[k].viewportMaximum===axisX[k].maximum&&axisX[k].viewportMinimum===axisX[k].minimum&&axisX[k].labelAngle>0&&lastLabelWidthOutside>0?x2-=lastLabelWidthOutside:axisX[k].viewportMaximum===axisX[k].maximum&&axisX[k].viewportMinimum===axisX[k].minimum&&axisX[k].labelAngle<0&&firstLabelOutside>0?x1+=firstLabelOutside:axisX[k].viewportMaximum===axisX[k].maximum&&axisX[k].viewportMinimum===axisX[k].minimum&&0===axisX[k].labelAngle&&(firstLabelOutside>0&&(x1+=firstLabelOutside),lastLabelWidthOutside>0&&(x2-=lastLabelWidthOutside))),chart.panEnabled?axisXTotalHeight=isNullOrUndefined(chart.sessionVariables.axisX.height)?chart.sessionVariables.axisX.height=axisXTotalHeight:chart.sessionVariables.axisX.height:chart.sessionVariables.axisX.height=axisXTotalHeight,y1=Math.round(freeSpace.y2-axisXTotalHeight-axisXMargin+prevAxisXHeight),y2=Math.round(freeSpace.y2),axisX[k].lineCoordinates.x2=x2,axisX[k].lineCoordinates.width=x2-x1,axisX[k].lineCoordinates.y1=y1,axisX[k].lineCoordinates.y2=y1+axisX[k].lineThickness/2,"inside"===axisX[k].labelPlacement&&k>0&&(axisX[k].lineCoordinates.y1=axisX[k].lineCoordinates.y1+axisXHeight[k]-(axisX[k]._titleTextBlock?axisX[k]._titleTextBlock.height:0)-("inside"===axisX[k].tickPlacement?axisX[k].tickLength:0),axisX[k].lineCoordinates.y2=axisX[k].lineCoordinates.y1+axisX[k].lineThickness/2),axisX[k].bounds={x1,y1,x2,y2:y2-(axisXTotalHeight+axisXMargin-axisXHeight[k]-prevAxisXHeight),width:x2-x1,height:y2-y1}}prevAxisXHeight+=axisXHeight[k]+axisX[k].margin}if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++){if(axisX2[k].lineCoordinates.x1=Math.round(freeSpace.x1+axisYTotalWidth+axisYMargin),axisX2[k].lineCoordinates.x2=Math.round(freeSpace.x2-axisY2TotalWidth-axisY2Margin>chart.width-maxPadding?chart.width-maxPadding:freeSpace.x2-axisY2TotalWidth-axisY2Margin),axisX2[k].lineCoordinates.width=Math.abs(x2-x1),axisX2[k]._labels&&axisX2[k]._labels.length>1){firstLabel=0,lastLabel=0;firstLabel=axisX2[k]._labels[1],lastLabel="dateTime"===axisX2[k].valueType?axisX2[k]._labels[axisX2[k]._labels.length-2]:axisX2[k]._labels[axisX2[k]._labels.length-1],firstLabelWidthX=firstLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(firstLabel.textBlock.angle))+(firstLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(firstLabel.textBlock.angle)),lastLabelWidthX=lastLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(lastLabel.textBlock.angle))+(lastLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(lastLabel.textBlock.angle))}chart.panEnabled?axisX2TotalHeight=isNullOrUndefined(chart.sessionVariables.axisX2.height)?chart.sessionVariables.axisX2.height=axisX2TotalHeight:chart.sessionVariables.axisX2.height:chart.sessionVariables.axisX2.height=axisX2TotalHeight,y1=Math.round(freeSpace.y1),y2=Math.round(freeSpace.y2+axisX2[k].margin),axisX2[k].lineCoordinates.y1=y1+axisX2TotalHeight+axisX2Margin-prevAxisX2Height,axisX2[k].lineCoordinates.y2=y1,"inside"===axisX2[k].labelPlacement&&k>0&&(axisX2[k].lineCoordinates.y1=axisX2[k-1].bounds.y1-axisX2Height[k]+(axisX2[k]._titleTextBlock?axisX2[k]._titleTextBlock.height:0)),axisX2[k].bounds={x1,y1:y1+(axisX2TotalHeight+axisX2Margin-axisX2Height[k]-prevAxisX2Height),x2,y2,width:x2-x1,height:y2-y1},prevAxisX2Height+=axisX2Height[k]+axisX2[k].margin}if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++){var padding=chart.isNavigator?0:10;axisY[k]&&(x1=Math.round(axisX[0]?axisX[0].lineCoordinates.x1:axisX2[0].lineCoordinates.x1),padding=axisY[k]._labels&&axisY[k]._labels.length>0?axisY[k]._labels[axisY[k]._labels.length-1].textBlock.height/2:maxPadding,y1=Math.round(freeSpace.y1+axisX2TotalHeight+axisX2Margin<Math.max(padding,maxPadding)?Math.max(padding,maxPadding):freeSpace.y1+axisX2TotalHeight+axisX2Margin),x2=Math.round(axisX[0]?axisX[0].lineCoordinates.x1:axisX2[0].lineCoordinates.x1),padding=axisX.length>0?0:axisY[k]._labels&&axisY[k]._labels.length>0?axisY[k]._labels[0].textBlock.height/2:maxPadding,y2=Math.round(freeSpace.y2-axisXTotalHeight-axisXMargin-padding),axisY[k].lineCoordinates={x1:x1-prevAxisYWidth,y1,x2:x2-prevAxisYWidth,y2,height:Math.abs(y2-y1)},"inside"===axisY[k].labelPlacement&&k>0&&(axisY[k].lineCoordinates.x1=axisY[k].lineCoordinates.x1-(axisYWidth[k]-axisY[k]._titleTextBlock?axisY[k]._titleTextBlock.height:0)+("outside"===axisY[k].tickPlacement?axisY[k].tickLength:0),axisY[k].lineCoordinates.x2=axisY[k].lineCoordinates.x1+axisY[k].lineThickness/2),axisY[k].bounds={x1:x1-(axisYWidth[k]+prevAxisYWidth),y1,x2,y2,width:x2-x1,height:y2-y1},axisY[k].title&&(axisY[k]._titleTextBlock.maxWidth=axisY[k].titleMaxWidth>0&&axisY[k].titleMaxWidth<axisY[k].lineCoordinates.height?axisY[k].titleMaxWidth:axisY[k].lineCoordinates.height),prevAxisYWidth+=axisYWidth[k]+axisY[k].margin)}if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++){padding=0;axisY2[k]&&(x1=Math.round(axisX[0]?axisX[0].lineCoordinates.x2:axisX2[0].lineCoordinates.x2),x2=Math.round(x1),padding=axisY2[k]._labels&&axisY2[k]._labels.length>0?axisY2[k]._labels[axisY2[k]._labels.length-1].textBlock.height/2:0,y1=Math.round(freeSpace.y1+axisX2TotalHeight+axisX2Margin<Math.max(padding,maxPadding)?Math.max(padding,maxPadding):freeSpace.y1+axisX2TotalHeight+axisX2Margin),padding=axisX.length>0?0:axisY2[k]._labels&&axisY2[k]._labels.length>0?axisY2[k]._labels[0].textBlock.height/2:0,y2=Math.round(freeSpace.y2-(axisXTotalHeight+axisXMargin+padding)),axisY2[k].lineCoordinates={x1:x1+prevAxisY2Width,y1,x2:x1+prevAxisY2Width,y2,height:Math.abs(y2-y1)},"inside"===axisY2[k].labelPlacement&&k>0&&(axisY2[k].lineCoordinates.x1=axisY2[k].lineCoordinates.x1+(axisY2Width[k]-axisY2[k]._titleTextBlock?axisY2[k]._titleTextBlock.height:0)-("outside"===axisY2[k].tickPlacement?axisY2[k].tickLength:0)-2,axisY2[k].lineCoordinates.x2=axisY2[k].lineCoordinates.x1+axisY2[k].lineThickness/2),axisY2[k].bounds={x1,y1,x2:x2+(axisY2Width[k]+prevAxisY2Width),y2,width:x2-x1,height:y2-y1},axisY2[k].title&&(axisY2[k]._titleTextBlock.maxWidth=axisY2[k].titleMaxWidth>0&&axisY2[k].titleMaxWidth<axisY2[k].lineCoordinates.height?axisY2[k].titleMaxWidth:axisY2[k].lineCoordinates.height),prevAxisY2Width+=axisY2Width[k]+axisY2[k].margin)}if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)if(axisX[k]&&(axisX[k].calculateValueToPixelConversionParameters(),axisX[k].calculateBreaksSizeInValues(),axisX[k]._labels&&axisX[k]._labels.length>1)){firstLabelPosition=(axisX[k].logarithmic?Math.log(axisX[k]._labels[1].position/axisX[k].viewportMinimum)/axisX[k].conversionParameters.lnLogarithmBase:axisX[k]._labels[1].position-axisX[k].viewportMinimum)*Math.abs(axisX[k].conversionParameters.pixelPerUnit)+axisX[k].lineCoordinates.x1;var lastLabelVal=axisX[k]._labels[axisX[k]._labels.length-("dateTime"===axisX[k].valueType?2:1)].position,lastLabelAboveViewportMin=axisX[k].getApparentDifference(axisX[k].viewportMinimum,lastLabelVal);lastLabelPosition=axisX[k].logarithmic?(lastLabelAboveViewportMin>1?Math.log(lastLabelAboveViewportMin)/axisX[k].conversionParameters.lnLogarithmBase*Math.abs(axisX[k].conversionParameters.pixelPerUnit):0)+axisX[k].lineCoordinates.x1:(lastLabelAboveViewportMin>0?lastLabelAboveViewportMin*Math.abs(axisX[k].conversionParameters.pixelPerUnit):0)+axisX[k].lineCoordinates.x1}if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)if(axisX2[k].calculateValueToPixelConversionParameters(),axisX2[k].calculateBreaksSizeInValues(),axisX2[k]._labels&&axisX2[k]._labels.length>1){firstLabelPosition=(axisX2[k].logarithmic?Math.log(axisX2[k]._labels[1].position/axisX2[k].viewportMinimum)/axisX2[k].conversionParameters.lnLogarithmBase:axisX2[k]._labels[1].position-axisX2[k].viewportMinimum)*Math.abs(axisX2[k].conversionParameters.pixelPerUnit)+axisX2[k].lineCoordinates.x1;lastLabelVal=axisX2[k]._labels[axisX2[k]._labels.length-("dateTime"===axisX2[k].valueType?2:1)].position,lastLabelAboveViewportMin=axisX2[k].getApparentDifference(axisX2[k].viewportMinimum,lastLabelVal);lastLabelPosition=axisX2[k].logarithmic?(lastLabelAboveViewportMin>1?Math.log(lastLabelAboveViewportMin)/axisX2[k].conversionParameters.lnLogarithmBase*Math.abs(axisX2[k].conversionParameters.pixelPerUnit):0)+axisX2[k].lineCoordinates.x1:(lastLabelAboveViewportMin>0?lastLabelAboveViewportMin*Math.abs(axisX2[k].conversionParameters.pixelPerUnit):0)+axisX2[k].lineCoordinates.x1}for(k=0;k<axes.length;k++)"axisY"===axes[k].type&&(axes[k].calculateValueToPixelConversionParameters(),axes[k].calculateBreaksSizeInValues());if(i>0){if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)xFlag=axisXHeights[i-1][k]===axisXHeights[i][k];else xFlag=!0;if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)x2Flag=axisX2Heights[i-1][k]===axisX2Heights[i][k];else x2Flag=!0;if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)yFlag=axisYWidths[i-1][k]===axisYWidths[i][k];else yFlag=!0;if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)y2Flag=axisY2Widths[i-1][k]===axisY2Widths[i][k];else y2Flag=!0}if(xFlag&&x2Flag&&yFlag&&y2Flag)break;i++}if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].calculateStripLinesThicknessInValues(),axisX[k].calculateBreaksInPixels();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].calculateStripLinesThicknessInValues(),axisX2[k].calculateBreaksInPixels();if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].calculateStripLinesThicknessInValues(),axisY[k].calculateBreaksInPixels();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].calculateStripLinesThicknessInValues(),axisY2[k].calculateBreaksInPixels()}else{for(var axisYHeight=[],axisY2Height=[],axisXWidth=[],axisX2Width=[],axisYHeights=[],axisY2Heights=[],axisXWidths=[],axisX2Widths=[];i<4;){var prevAxisYHeight=0,prevAxisY2Height=0,prevAxisXWidth=0,prevAxisX2Width=0,axisYTotalHeight=(axisXMargin=0,axisX2Margin=0,axisYMargin=0,axisY2Margin=0,0),axisY2TotalHeight=0,axisXTotalWidth=0,axisX2TotalWidth=0;if(axisX&&axisX.length>0){axisXWidth=[],axisXTotalWidth=0;for(k=0;k<axisX.length;k++)axisXWidth.push(Math.ceil(axisX[k]?axisX[k].createLabelsAndCalculateWidth():0)),axisXTotalWidth+=axisXWidth[k],axisXMargin+=axisX[k]&&!chart.isNavigator?axisX[k].margin:0;axisXWidths.push(axisXWidth)}else axisXWidth.push(Math.ceil(axisX[0]?axisX[0].createLabelsAndCalculateWidth():0)),axisXWidths.push(axisXWidth);if(axisX2&&axisX2.length>0){axisX2Width=[],axisX2TotalWidth=0;for(k=0;k<axisX2.length;k++)axisX2Width.push(Math.ceil(axisX2[k]?axisX2[k].createLabelsAndCalculateWidth():0)),axisX2TotalWidth+=axisX2Width[k],axisX2Margin+=axisX2[k]?axisX2[k].margin:0;axisX2Widths.push(axisX2Width)}else axisX2Width.push(Math.ceil(axisX2[0]?axisX2[0].createLabelsAndCalculateWidth():0)),axisX2Widths.push(axisX2Width);if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].lineCoordinates={},x1=Math.round(freeSpace.x1+axisXTotalWidth+axisXMargin),x2=Math.round(freeSpace.x2-axisX2TotalWidth-axisX2Margin>chart.width-10?chart.width-10:freeSpace.x2-axisX2TotalWidth-axisX2Margin),axisY[k].labelAutoFit&&(isNullOrUndefined(firstLabelWidthY)||(!axisX.length>0&&(x1=axisY[k].labelAngle<0?Math.max(x1,firstLabelWidthY):0===axisY[k].labelAngle?Math.max(x1,firstLabelWidthY/2):x1),!axisX2.length>0&&(x2=axisY[k].labelAngle>0||0===axisY[k].labelAngle?x2-lastLabelWidthY/2:x2))),axisY[k].lineCoordinates.x1=x1,axisY[k].lineCoordinates.x2=x2,axisY[k].lineCoordinates.width=Math.abs(x2-x1),axisY[k].title&&(axisY[k]._titleTextBlock.maxWidth=axisY[k].titleMaxWidth>0&&axisY[k].titleMaxWidth<axisY[k].lineCoordinates.width?axisY[k].titleMaxWidth:axisY[k].lineCoordinates.width);if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].lineCoordinates={},x1=Math.round(freeSpace.x1+axisXTotalWidth+axisXMargin),x2=Math.round(freeSpace.x2-axisX2TotalWidth-axisX2Margin>axisY2[k].chart.width-10?axisY2[k].chart.width-10:freeSpace.x2-axisX2TotalWidth-axisX2Margin),axisY2[k]&&axisY2[k].labelAutoFit&&(isNullOrUndefined(firstLabelWidthY2)||(!axisX.length>0&&(x1=axisY2[k].labelAngle>0?Math.max(x1,firstLabelWidthY2):0===axisY2[k].labelAngle?Math.max(x1,firstLabelWidthY2/2):x1),!axisX2.length>0&&(axisY2[k].labelAngle<0||axisY2[k].labelAngle,x2-=lastLabelWidthY2/2))),axisY2[k].lineCoordinates.x1=x1,axisY2[k].lineCoordinates.x2=x2,axisY2[k].lineCoordinates.width=Math.abs(x2-x1),axisY2[k].title&&(axisY2[k]._titleTextBlock.maxWidth=axisY2[k].titleMaxWidth>0&&axisY2[k].titleMaxWidth<axisY2[k].lineCoordinates.width?axisY2[k].titleMaxWidth:axisY2[k].lineCoordinates.width);if(axisY&&axisY.length>0){axisYHeight=[],axisYTotalHeight=0;for(k=0;k<axisY.length;k++)axisYHeight.push(Math.ceil(axisY[k]?axisY[k].createLabelsAndCalculateHeight():0)),axisYTotalHeight+=axisYHeight[k]+axisY[k].margin,axisYMargin+=axisY[k].margin;axisYHeights.push(axisYHeight)}else axisYHeight.push(Math.ceil(axisY[0]?axisY[0].createLabelsAndCalculateHeight():0)),axisYHeights.push(axisYHeight);if(axisY2&&axisY2.length>0){axisY2Height=[],axisY2TotalHeight=0;for(k=0;k<axisY2.length;k++)axisY2Height.push(Math.ceil(axisY2[k]?axisY2[k].createLabelsAndCalculateHeight():0)),axisY2TotalHeight+=axisY2Height[k],axisY2Margin+=axisY2[k].margin;axisY2Heights.push(axisY2Height)}else axisY2Height.push(Math.ceil(axisY2[0]?axisY2[0].createLabelsAndCalculateHeight():0)),axisY2Heights.push(axisY2Height);if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)if(axisY[k]._labels.length>0){firstLabel=axisY[k]._labels[0],lastLabel=axisY[k]._labels[axisY[k]._labels.length-1];firstLabelWidthY=firstLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(firstLabel.textBlock.angle))+(firstLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(firstLabel.textBlock.angle)),lastLabelWidthY=lastLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(lastLabel.textBlock.angle))+(lastLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(lastLabel.textBlock.angle))}if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)if(axisY2[k]&&axisY2[k]._labels.length>0){firstLabel=axisY2[k]._labels[0],lastLabel=axisY2[k]._labels[axisY2[k]._labels.length-1];firstLabelWidthY2=firstLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(firstLabel.textBlock.angle))+(firstLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(firstLabel.textBlock.angle)),lastLabelWidthY2=lastLabel.textBlock.width*Math.cos(Math.PI/180*Math.abs(lastLabel.textBlock.angle))+(lastLabel.textBlock.height-lastLabel.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(lastLabel.textBlock.angle))}if(chart.panEnabled)for(k=0;k<axisY.length;k++)axisYHeight[k]=isNullOrUndefined(chart.sessionVariables.axisY.height)?chart.sessionVariables.axisY.height=axisYHeight[k]:chart.sessionVariables.axisY.height;else for(var k=0;k<axisY.length;k++)chart.sessionVariables.axisY.height=axisYHeight[k];if(axisY&&axisY.length>0)for(k=axisY.length-1;k>=0;k--)y1=Math.round(freeSpace.y2),y2=Math.round(freeSpace.y2>axisY[k].chart.height?axisY[k].chart.height:freeSpace.y2),axisY[k].lineCoordinates.y1=y1-(axisYHeight[k]+axisY[k].margin+prevAxisYHeight),axisY[k].lineCoordinates.y2=y1-(axisYHeight[k]+axisY[k].margin+prevAxisYHeight),"inside"===axisY[k].labelPlacement&&k>0&&(axisY[k].lineCoordinates.y1=axisY[k].lineCoordinates.y1+axisYHeight[k]-(axisY[k]._titleTextBlock?axisY[k]._titleTextBlock.height:0)-("inside"===axisY[k].tickPlacement?axisY[k].tickLength:0),axisY[k].lineCoordinates.y2=axisY[k].lineCoordinates.y1+axisY[k].lineThickness/2),axisY[k].bounds={x1,y1:y1-(axisYHeight[k]+prevAxisYHeight+axisY[k].margin),x2,y2:y2-(prevAxisYHeight+axisY[k].margin),width:x2-x1,height:axisYHeight[k]},axisY[k].title&&(axisY[k]._titleTextBlock.maxWidth=axisY[k].titleMaxWidth>0&&axisY[k].titleMaxWidth<axisY[k].lineCoordinates.width?axisY[k].titleMaxWidth:axisY[k].lineCoordinates.width),prevAxisYHeight+=axisYHeight[k]+axisY[k].margin;if(axisY2&&axisY2.length>0)for(k=axisY2.length-1;k>=0;k--)axisY2[k]&&(y1=Math.round(freeSpace.y1),y2=Math.round(freeSpace.y1+(axisY2Height[k]+axisY2[k].margin+prevAxisY2Height)),axisY2[k].lineCoordinates.y1=y2,axisY2[k].lineCoordinates.y2=y2,"inside"===axisY2[k].labelPlacement&&k>0&&(axisY2[k].lineCoordinates.y1=y2-axisY2Height[k]+(axisY2[k]._titleTextBlock?axisY2[k]._titleTextBlock.height:0)),axisY2[k].bounds={x1,y1:y1+(axisY2[k].margin+prevAxisY2Height),x2,y2,width:x2-x1,height:axisY2TotalHeight},axisY2[k].title&&(axisY2[k]._titleTextBlock.maxWidth=axisY2[k].titleMaxWidth>0&&axisY2[k].titleMaxWidth<axisY2[k].lineCoordinates.width?axisY2[k].titleMaxWidth:axisY2[k].lineCoordinates.width),prevAxisY2Height+=axisY2Height[k]+axisY2[k].margin);if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++){padding=0;if(padding=axisX[k]._labels&&axisX[k]._labels.length>0?axisX[k]._labels[0].textBlock.fontSize/2:0,x1=Math.round(freeSpace.x1+axisXMargin),y1=axisY2&&axisY2.length>0?Math.round(axisY2[0]?axisY2[0].lineCoordinates.y2:freeSpace.y1<Math.max(padding,10)?Math.max(padding,10):freeSpace.y1):freeSpace.y1<Math.max(padding,10)?Math.max(padding,10):freeSpace.y1,x2=Math.round(freeSpace.x1+axisXTotalWidth+axisXMargin),y2=axisY&&axisY.length>0?Math.round(axisY[0]?axisY[0].lineCoordinates.y1:freeSpace.y2-axisYTotalHeight>chart.height-Math.max(padding,10)?chart.height-Math.max(padding,10):freeSpace.y2-axisYTotalHeight):freeSpace.y2>chart.height-Math.max(padding,10)?chart.height-Math.max(padding,10):freeSpace.y2,axisY&&axisY.length>0)for(var l=0;l<axisY.length;l++)axisY[l]&&axisY[l].labelAutoFit&&(x2=axisY[l].labelAngle<0?Math.max(x2,firstLabelWidthY):0===axisY[l].labelAngle?Math.max(x2,firstLabelWidthY/2):x2,x1=axisY[l].labelAngle<0||0===axisY[l].labelAngle?x2-axisXTotalWidth:x1);if(axisY2&&axisY2.length>0)for(l=0;l<axisY2.length;l++)axisY2[l]&&axisY2[l].labelAutoFit&&(x1=(x2=axisY2[l].lineCoordinates.x1)-axisXTotalWidth);axisX[k].lineCoordinates={x1:x2-prevAxisXWidth,y1,x2:x2-prevAxisXWidth,y2,height:Math.abs(y2-y1)},"inside"===axisX[k].labelPlacement&&k>0&&(axisX[k].lineCoordinates.x1=axisX[k].lineCoordinates.x1-(axisXWidth[k]-(axisX[k]._titleTextBlock?axisX[k]._titleTextBlock.height:0))+("outside"===axisX[k].tickPlacement?axisX[k].tickLength:0),axisX[k].lineCoordinates.x2=axisX[k].lineCoordinates.x1+axisX[k].lineThickness/2),axisX[k].bounds={x1:x2-(axisXWidth[k]+prevAxisXWidth),y1,x2,y2,width:x2-x1,height:y2-y1},axisX[k].title&&(axisX[k]._titleTextBlock.maxWidth=axisX[k].titleMaxWidth>0&&axisX[k].titleMaxWidth<axisX[k].lineCoordinates.height?axisX[k].titleMaxWidth:axisX[k].lineCoordinates.height),axisX[k].calculateValueToPixelConversionParameters(),axisX[k].calculateBreaksSizeInValues(),prevAxisXWidth+=axisXWidth[k]+axisX[k].margin}if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++){padding=0;if(padding=axisX2[k]._labels&&axisX2[k]._labels.length>0?axisX2[k]._labels[0].textBlock.fontSize/2:0,x1=Math.round(freeSpace.x1-axisXMargin),y1=axisY2&&axisY2.length>0?Math.round(axisY2[0]?axisY2[0].lineCoordinates.y2:freeSpace.y1<Math.max(padding,10)?Math.max(padding,10):freeSpace.y1):freeSpace.y1<Math.max(padding,10)?Math.max(padding,10):freeSpace.y1,x2=Math.round(freeSpace.x2-axisX2TotalWidth-axisX2Margin),y2=axisY&&axisY.length>0?Math.round(axisY[0]?axisY[0].lineCoordinates.y1:freeSpace.y2-axisYTotalHeight>chart.height-Math.max(padding,10)?chart.height-Math.max(padding,10):freeSpace.y2-axisYTotalHeight):freeSpace.y2>chart.height-Math.max(padding,10)?chart.height-Math.max(padding,10):freeSpace.y2,axisY&&axisY.length>0)for(l=0;l<axisY.length;l++)axisY[l]&&axisY[l].labelAutoFit&&(x2=axisY[l].labelAngle<0?Math.max(x2,firstLabelWidthY):0===axisY[l].labelAngle?Math.max(x2,firstLabelWidthY/2):x2,x1=axisY[l].labelAngle<0||0===axisY[l].labelAngle?x2-axisX2TotalWidth:x1);if(axisY2&&axisY2.length>0)for(l=0;l<axisY2.length;l++)axisY2[l]&&axisY2[l].labelAutoFit&&(x1=(x2=axisY2[l].lineCoordinates.x2)-axisX2TotalWidth);axisX2[k].lineCoordinates={x1:x2+prevAxisX2Width,y1,x2:x2+prevAxisX2Width,y2,height:Math.abs(y2-y1)},"inside"===axisX2[k].labelPlacement&&k>0&&(axisX2[k].lineCoordinates.x1=axisX2[k].lineCoordinates.x1+(axisX2Width[k]-(axisX2[k]._titleTextBlock?axisX2[k]._titleTextBlock.height:0)-2)-("outside"===axisX2[k].tickPlacement?axisX2[k].tickLength:0),axisX2[k].lineCoordinates.x2=axisX2[k].lineCoordinates.x1+axisX2[k].lineThickness/2),axisX2[k].bounds={x1:axisX2[k].lineCoordinates.x1,y1,x2:x2+axisX2Width[k]+prevAxisX2Width,y2,width:x2-x1,height:y2-y1},axisX2[k].title&&(axisX2[k]._titleTextBlock.maxWidth=axisX2[k].titleMaxWidth>0&&axisX2[k].titleMaxWidth<axisX2[k].lineCoordinates.height?axisX2[k].titleMaxWidth:axisX2[k].lineCoordinates.height),axisX2[k].calculateValueToPixelConversionParameters(),axisX2[k].calculateBreaksSizeInValues(),prevAxisX2Width+=axisX2Width[k]+axisX2[k].margin}for(k=0;k<axes.length;k++)"axisY"===axes[k].type&&(axes[k].calculateValueToPixelConversionParameters(),axes[k].calculateBreaksSizeInValues());if(i>0){if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)xFlag=axisXWidths[i-1][k]===axisXWidths[i][k];else xFlag=!0;if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)x2Flag=axisX2Widths[i-1][k]===axisX2Widths[i][k];else x2Flag=!0;if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)yFlag=axisYHeights[i-1][k]===axisYHeights[i][k];else yFlag=!0;if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)y2Flag=axisY2Heights[i-1][k]===axisY2Heights[i][k];else y2Flag=!0}if(xFlag&&x2Flag&&yFlag&&y2Flag)break;i++}if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].calculateStripLinesThicknessInValues(),axisY[k].calculateBreaksInPixels();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].calculateStripLinesThicknessInValues(),axisY2[k].calculateBreaksInPixels();if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].calculateStripLinesThicknessInValues(),axisX[k].calculateBreaksInPixels();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].calculateStripLinesThicknessInValues(),axisX2[k].calculateBreaksInPixels()}},Axis.render=function(axisX,axisX2,axisY,axisY2,axisPlacement){var chart=axisX[0]?axisX[0].chart:axisX2[0].chart,ctx=chart.ctx;chart._axes;if(!1,chart.alignVerticalAxes&&chart.alignVerticalAxes(),ctx.save(),ctx.beginPath(),axisX[0]&&ctx.rect(5,axisX[0].bounds.y1,axisX[0].chart.width-10,axisX[0].bounds.height),axisX2[0]&&ctx.rect(5,axisX2[axisX2.length-1].bounds.y1,axisX2[0].chart.width-10,axisX2[0].bounds.height),ctx.clip(),axisX&&axisX.length>0)for(var k=0;k<axisX.length;k++)axisX[k].renderLabelsTicksAndTitle();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderLabelsTicksAndTitle();if(ctx.restore(),axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderLabelsTicksAndTitle();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderLabelsTicksAndTitle();chart.preparePlotArea();var plotArea=chart.plotArea;if(ctx.save(),ctx.beginPath(),ctx.rect(plotArea.x1,plotArea.y1,Math.abs(plotArea.x2-plotArea.x1),Math.abs(plotArea.y2-plotArea.y1)),ctx.clip(),axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].renderStripLinesOfThicknessType("value");if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderStripLinesOfThicknessType("value");if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderStripLinesOfThicknessType("value");if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderStripLinesOfThicknessType("value");if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].renderInterlacedColors();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderInterlacedColors();if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderInterlacedColors();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderInterlacedColors();if(ctx.restore(),axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].renderGrid(),isCanvasSupported&&(axisX[k].createMask(),axisX[k].renderBreaksBackground());if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderGrid(),isCanvasSupported&&(axisX2[k].createMask(),axisX2[k].renderBreaksBackground());if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderGrid(),isCanvasSupported&&(axisY[k].createMask(),axisY[k].renderBreaksBackground());if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderGrid(),isCanvasSupported&&(axisY2[k].createMask(),axisY2[k].renderBreaksBackground());if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].renderAxisLine();if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderAxisLine();if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderAxisLine();if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderAxisLine();if(axisX&&axisX.length>0)for(k=0;k<axisX.length;k++)axisX[k].renderStripLinesOfThicknessType("pixel");if(axisX2&&axisX2.length>0)for(k=0;k<axisX2.length;k++)axisX2[k].renderStripLinesOfThicknessType("pixel");if(axisY&&axisY.length>0)for(k=0;k<axisY.length;k++)axisY[k].renderStripLinesOfThicknessType("pixel");if(axisY2&&axisY2.length>0)for(k=0;k<axisY2.length;k++)axisY2[k].renderStripLinesOfThicknessType("pixel")},Axis.prototype.calculateStripLinesThicknessInValues=function(){for(var i=0;i<this.stripLines.length;i++)if(null!==this.stripLines[i].startValue&&null!==this.stripLines[i].endValue){var val1=Math.min(this.stripLines[i].startValue,this.stripLines[i].endValue),val2=Math.max(this.stripLines[i].startValue,this.stripLines[i].endValue),valueDiff=this.getApparentDifference(val1,val2);this.logarithmic?this.stripLines[i].value*=Math.sqrt(Math.log(Math.max(this.stripLines[i].startValue,this.stripLines[i].endValue)/Math.min(this.stripLines[i].startValue,this.stripLines[i].endValue))/Math.log(valueDiff)):this.stripLines[i].value+=(Math.abs(this.stripLines[i].endValue-this.stripLines[i].startValue)-valueDiff)/2,this.stripLines[i].thickness=valueDiff,this.stripLines[i]._thicknessType="value"}},Axis.prototype.calculateBreaksSizeInValues=function(){for(var hasUserSetSpacing,axisLength="left"===this._position||"right"===this._position?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],conversionParamPixelPerUnit=this.conversionParameters.pixelPerUnit||axisLength/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),hasUserSetScaleBreaksSpacing=this.scaleBreaks&&!isNullOrUndefined(this.scaleBreaks.options.spacing),i=0;i<appliedBreaks.length;i++)hasUserSetSpacing=hasUserSetScaleBreaksSpacing||!isNullOrUndefined(appliedBreaks[i].options.spacing),appliedBreaks[i].spacing=convertPercentToValue(appliedBreaks[i].spacing,axisLength,8,hasUserSetSpacing?.1*axisLength:8,hasUserSetSpacing?0:3)|0,appliedBreaks[i].size=appliedBreaks[i].spacing<0?0:Math.abs(appliedBreaks[i].spacing/conversionParamPixelPerUnit),this.logarithmic&&(appliedBreaks[i].size=Math.pow(this.logarithmBase,appliedBreaks[i].size))},Axis.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&this.scaleBreaks._appliedBreaks.length<=0)){var appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];appliedBreaks.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var i=0;i<appliedBreaks.length&&!(appliedBreaks[i].startValue>this.conversionParameters.maximum);i++)appliedBreaks[i].endValue<this.conversionParameters.minimum||(isNullOrUndefined(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=i),appliedBreaks[i].startValue>=this.conversionParameters.minimum&&(appliedBreaks[i].startPixel=this.convertValueToPixel(appliedBreaks[i].startValue),this.scaleBreaks.lastBreakIndex=i),appliedBreaks[i].endValue<=this.conversionParameters.maximum&&(appliedBreaks[i].endPixel=this.convertValueToPixel(appliedBreaks[i].endValue)))}},Axis.prototype.renderLabelsTicksAndTitle=function(){var _this=this,skipLabels=!1,totalLabelWidth=0,totalLabelHeight=0,thresholdRatio=1,labelCount=0;this.conversionParameters.pixelPerUnit,convertToNumber(this.interval,this.intervalType);if(0!==this.labelAngle&&360!==this.labelAngle&&(thresholdRatio=1.2),void 0===this.options.interval){if("bottom"===this._position||"top"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){var labels=[];thresholdRatio=0!==this.labelAngle&&360!==this.labelAngle?1:1.2;for(var nextWidth,nextPosition=this.viewportMaximum,pixelPerUnit=this.lineCoordinates.width/Math.log(this.range),i=this._labels.length-1;i>=0&&!((label=this._labels[i]).position<this.viewportMinimum);i--)label.position>this.viewportMaximum||(i===this._labels.length-1||nextWidth<Math.log(nextPosition/label.position)*pixelPerUnit/thresholdRatio)&&(labels.push(label),nextPosition=label.position,nextWidth=label.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+label.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=labels}else{for(i=0;i<this._labels.length;i++){if(!((label=this._labels[i]).position<this.viewportMinimum))totalLabelWidth+=label.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+label.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle))}totalLabelWidth>this.lineCoordinates.width*thresholdRatio&&this.labelAutoFit&&(skipLabels=!0)}if("left"===this._position||"right"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){var nextHeight;for(labels=[],nextPosition=this.viewportMaximum,pixelPerUnit=this.lineCoordinates.height/Math.log(this.range),i=this._labels.length-1;i>=0&&!((label=this._labels[i]).position<this.viewportMinimum);i--)label.position>this.viewportMaximum||(i===this._labels.length-1||nextHeight<Math.log(nextPosition/label.position)*pixelPerUnit)&&(labels.push(label),nextPosition=label.position,nextHeight=label.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+label.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=labels}else{for(i=0;i<this._labels.length;i++){if(!((label=this._labels[i]).position<this.viewportMinimum))totalLabelHeight+=label.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+label.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle))}totalLabelHeight>this.lineCoordinates.height*thresholdRatio&&this.labelAutoFit&&(skipLabels=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort((function(label1,label2){return label1.position-label2.position}));var label,xy;i=0;if("bottom"===this._position){for(i=0;i<this._labels.length;i++)if(!((label=this._labels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum)){if(xy=this.getPixelCoordinatesOnAxis(label.position),this.tickThickness&&"inside"!=this.tickPlacement){this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor;var tickX=this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;this.ctx.beginPath(),this.ctx.moveTo(tickX,xy.y|0),this.ctx.lineTo(tickX,xy.y+this.tickLength|0),this.ctx.stroke()}skipLabels&&labelCount++%2!=0&&this.labelAutoFit||(0===label.textBlock.angle?(xy.x-=label.textBlock.width/2,xy.y="inside"===this.labelPlacement?xy.y-(("inside"===this.tickPlacement?this.tickLength:0)+label.textBlock.height-label.textBlock.fontSize/2):xy.y+("inside"===this.tickPlacement?0:this.tickLength)+label.textBlock.fontSize/2+5):(xy.x="inside"===this.labelPlacement?this.labelAngle<0?xy.x:xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):xy.x-(this.labelAngle<0?label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),xy.y="inside"===this.labelPlacement?this.labelAngle<0?xy.y-("inside"===this.tickPlacement?this.tickLength:0)-5:xy.y-("inside"===this.tickPlacement?0:this.tickLength)-Math.abs((this.labelAngle,label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5)):xy.y+("inside"===this.tickPlacement?0:this.tickLength)+Math.abs(this.labelAngle<0?label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),label.textBlock.x=xy.x,label.textBlock.y=xy.y)}"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationEnd",(function(){for(i=0;i<_this._labels.length;i++)if(!((label=_this._labels[i]).position<_this.viewportMinimum||label.position>_this.viewportMaximum)&&(xy=_this.getPixelCoordinatesOnAxis(label.position),_this.tickThickness)){_this.ctx.lineWidth=_this.tickThickness,_this.ctx.strokeStyle=_this.tickColor;var tickX=_this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;_this.ctx.save(),_this.ctx.beginPath(),_this.ctx.moveTo(tickX,xy.y|0),_this.ctx.lineTo(tickX,xy.y-_this.tickLength|0),_this.ctx.stroke(),_this.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height-3,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("top"===this._position){for(i=0;i<this._labels.length;i++)if(!((label=this._labels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum)){if(xy=this.getPixelCoordinatesOnAxis(label.position),this.tickThickness&&"inside"!=this.tickPlacement){this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor;tickX=this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;this.ctx.beginPath(),this.ctx.moveTo(tickX,xy.y|0),this.ctx.lineTo(tickX,xy.y-this.tickLength|0),this.ctx.stroke()}skipLabels&&labelCount++%2!=0&&this.labelAutoFit||(0===label.textBlock.angle?(xy.x-=label.textBlock.width/2,xy.y="inside"===this.labelPlacement?xy.y+this.labelFontSize/2+("inside"===this.tickPlacement?this.tickLength:0)+5:xy.y-(("inside"===this.tickPlacement?0:this.tickLength)+label.textBlock.height-label.textBlock.fontSize/2)):(xy.x="inside"===this.labelPlacement?this.labelAngle>0?xy.x:xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):xy.x+(label.textBlock.height-this.labelFontSize)*Math.sin(Math.PI/180*this.labelAngle)-(this.labelAngle>0?label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),xy.y="inside"===this.labelPlacement?this.labelAngle>0?xy.y+("inside"===this.tickPlacement?this.tickLength:0)+5:xy.y-label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+("inside"===this.tickPlacement?this.tickLength:0)+5:xy.y-(("inside"===this.tickPlacement?0:this.tickLength)+((label.textBlock.height-label.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+(this.labelAngle>0?label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))),label.textBlock.x=xy.x,label.textBlock.y=xy.y)}"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationEnd",(function(){for(i=0;i<_this._labels.length;i++)if(!((label=_this._labels[i]).position<_this.viewportMinimum||label.position>_this.viewportMaximum)&&(xy=_this.getPixelCoordinatesOnAxis(label.position),_this.tickThickness)){_this.ctx.lineWidth=_this.tickThickness,_this.ctx.strokeStyle=_this.tickColor;var tickX=_this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;_this.ctx.save(),_this.ctx.beginPath(),_this.ctx.moveTo(tickX,xy.y|0),_this.ctx.lineTo(tickX,xy.y+_this.tickLength|0),_this.ctx.stroke(),_this.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("left"===this._position){for(i=0;i<this._labels.length;i++)if(!((label=this._labels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum)){if(xy=this.getPixelCoordinatesOnAxis(label.position),this.tickThickness&&"inside"!=this.tickPlacement){this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor;var tickY=this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;this.ctx.beginPath(),this.ctx.moveTo(xy.x|0,tickY),this.ctx.lineTo(xy.x-this.tickLength|0,tickY),this.ctx.stroke()}skipLabels&&labelCount++%2!=0&&this.labelAutoFit||(0===this.labelAngle?(label.textBlock.y=xy.y,label.textBlock.x="inside"===this.labelPlacement?xy.x+("inside"===this.tickPlacement?this.tickLength:0)+5:xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength)-5):(label.textBlock.y="inside"===this.labelPlacement?xy.y:xy.y-label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),label.textBlock.x="inside"===this.labelPlacement?xy.x+("inside"===this.tickPlacement?this.tickLength:0)+5:this.labelAngle>0?xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength)-5:xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength)))}if("inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationEnd",(function(){for(i=0;i<_this._labels.length;i++)if(!((label=_this._labels[i]).position<_this.viewportMinimum||label.position>_this.viewportMaximum)&&(xy=_this.getPixelCoordinatesOnAxis(label.position),_this.tickThickness)){_this.ctx.lineWidth=_this.tickThickness,_this.ctx.strokeStyle=_this.tickColor;var tickY=_this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;_this.ctx.save(),_this.ctx.beginPath(),_this.ctx.moveTo(xy.x|0,tickY),_this.ctx.lineTo(xy.x+_this.tickLength|0,tickY),_this.ctx.stroke(),_this.ctx.restore()}}),this),this.title){this._titleTextBlock.measureText();this._titleTextBlock.x=this.bounds.x1+1,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0)}}else if("right"===this._position){for(i=0;i<this._labels.length;i++)if(!((label=this._labels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum)){if(xy=this.getPixelCoordinatesOnAxis(label.position),this.tickThickness&&"inside"!=this.tickPlacement){this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor;tickY=this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;this.ctx.beginPath(),this.ctx.moveTo(xy.x|0,tickY),this.ctx.lineTo(xy.x+this.tickLength|0,tickY),this.ctx.stroke()}skipLabels&&labelCount++%2!=0&&this.labelAutoFit||(0===this.labelAngle?(label.textBlock.y=xy.y,label.textBlock.x="inside"===this.labelPlacement?xy.x-label.textBlock.width-("inside"===this.tickPlacement?this.tickLength:0)-5:xy.x+("inside"===this.tickPlacement?0:this.tickLength)+5):(label.textBlock.y="inside"===this.labelPlacement?xy.y-label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):this.labelAngle<0?xy.y:xy.y-(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),label.textBlock.x="inside"===this.labelPlacement?xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?this.tickLength:0)-5:this.labelAngle>0?xy.x+(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+("inside"===this.tickPlacement?0:this.tickLength):xy.x+("inside"===this.tickPlacement?0:this.tickLength)+5))}"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationEnd",(function(){for(i=0;i<_this._labels.length;i++)if(!((label=_this._labels[i]).position<_this.viewportMinimum||label.position>_this.viewportMaximum)&&(xy=_this.getPixelCoordinatesOnAxis(label.position),_this.tickThickness)){_this.ctx.lineWidth=_this.tickThickness,_this.ctx.strokeStyle=_this.tickColor;var tickY=_this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;_this.ctx.save(),_this.ctx.beginPath(),_this.ctx.moveTo(xy.x|0,tickY),_this.ctx.lineTo(xy.x-_this.tickLength|0,tickY),_this.ctx.stroke(),_this.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-1,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(labelCount=0,"inside"===this.labelPlacement)this.chart.addEventListener("dataAnimationEnd",(function(){for(i=0;i<_this._labels.length;i++)(label=_this._labels[i]).position<_this.viewportMinimum||label.position>_this.viewportMaximum||skipLabels&&labelCount++%2!=0&&_this.labelAutoFit||(_this.ctx.save(),_this.ctx.beginPath(),label.textBlock.render(!0),_this.ctx.restore())}),this);else for(i=0;i<this._labels.length;i++)(label=this._labels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum||skipLabels&&labelCount++%2!=0&&this.labelAutoFit||label.textBlock.render(!0)},Axis.prototype.renderInterlacedColors=function(){var interlacedGridStartPoint,interlacedGridEndPoint,ctx=this.chart.plotArea.ctx,plotAreaCoordinates=this.chart.plotArea,i=0,renderInterlacedGrid=!0;if("bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(ctx.fillStyle=this.interlacedColor,i=0;i<this._labels.length;i++)renderInterlacedGrid?(interlacedGridEndPoint=this.getPixelCoordinatesOnAxis(this._labels[i].position),interlacedGridStartPoint=i+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),ctx.fillRect(plotAreaCoordinates.x1,Math.min(interlacedGridEndPoint.y,interlacedGridStartPoint.y),Math.abs(plotAreaCoordinates.x1-plotAreaCoordinates.x2),Math.abs(interlacedGridStartPoint.y-interlacedGridEndPoint.y)),renderInterlacedGrid=!1):renderInterlacedGrid=!0}else for(ctx.fillStyle=this.interlacedColor,i=0;i<this._labels.length;i++)renderInterlacedGrid?(interlacedGridStartPoint=this.getPixelCoordinatesOnAxis(this._labels[i].position),interlacedGridEndPoint=i+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),ctx.fillRect(Math.min(interlacedGridEndPoint.x,interlacedGridStartPoint.x),plotAreaCoordinates.y1,Math.abs(interlacedGridEndPoint.x-interlacedGridStartPoint.x),Math.abs(plotAreaCoordinates.y1-plotAreaCoordinates.y2)),renderInterlacedGrid=!1):renderInterlacedGrid=!0;ctx.beginPath()},Axis.prototype.renderStripLinesOfThicknessType=function(thicknessType){if(this.stripLines&&this.stripLines.length>0&&thicknessType){var label,xy,_this=this,i=0,j=0,stripLineShowOnTopHandled=!1,labelShowOnTopHandled=!1,stripLinesToRender=[],labelsToRender=[],clippingRectHandler=!1;for(i=0;i<this.stripLines.length;i++){(stripLine=this.stripLines[i])._thicknessType===thicknessType&&("pixel"===thicknessType&&(stripLine.value<this.viewportMinimum||stripLine.value>this.viewportMaximum||isNullOrUndefined(stripLine.value)||isNaN(this.range))||"value"===thicknessType&&(stripLine.startValue<=this.viewportMinimum&&stripLine.endValue<=this.viewportMinimum||stripLine.startValue>=this.viewportMaximum&&stripLine.endValue>=this.viewportMaximum||isNullOrUndefined(stripLine.startValue)||isNullOrUndefined(stripLine.endValue)||isNaN(this.range))||stripLinesToRender.push(stripLine))}for(i=0;i<this._stripLineLabels.length;i++){var stripLine=this.stripLines[i];if(!((label=this._stripLineLabels[i]).position<this.viewportMinimum||label.position>this.viewportMaximum||isNaN(this.range)))if(xy=this.getPixelCoordinatesOnAxis(label.position),"outside"===label.stripLine.labelPlacement){if(stripLine&&(this.ctx.strokeStyle=stripLine.color,"pixel"===stripLine._thicknessType&&(this.ctx.lineWidth=stripLine.thickness)),"bottom"===this._position){var tickX=this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;this.ctx.beginPath(),this.ctx.moveTo(tickX,xy.y|0),this.ctx.lineTo(tickX,xy.y+this.tickLength|0),this.ctx.stroke(),0===this.labelAngle?(xy.x-=label.textBlock.width/2,xy.y+=this.tickLength+label.textBlock.fontSize/2):(xy.x-=this.labelAngle<0?label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,xy.y+=this.tickLength+Math.abs(this.labelAngle<0?label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5))}else if("top"===this._position){tickX=this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;this.ctx.beginPath(),this.ctx.moveTo(tickX,xy.y|0),this.ctx.lineTo(tickX,xy.y-this.tickLength|0),this.ctx.stroke(),0===this.labelAngle?(xy.x-=label.textBlock.width/2,xy.y-=this.tickLength+label.textBlock.height):(xy.x+=(label.textBlock.height-this.tickLength-this.labelFontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.labelAngle>0?label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),xy.y-=this.tickLength+(label.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+(this.labelAngle>0?label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))}else if("left"===this._position){var tickY=this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;this.ctx.beginPath(),this.ctx.moveTo(xy.x|0,tickY),this.ctx.lineTo(xy.x-this.tickLength|0,tickY),this.ctx.stroke(),0===this.labelAngle?xy.x=xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(xy.y=xy.y-label.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),xy.x=this.labelAngle>0?xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:xy.x-label.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength)}else if("right"===this._position){tickY=this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;this.ctx.beginPath(),this.ctx.moveTo(xy.x|0,tickY),this.ctx.lineTo(xy.x+this.tickLength|0,tickY),this.ctx.stroke(),0===this.labelAngle?xy.x=xy.x+this.tickLength+5:(xy.y=this.labelAngle<0?xy.y:xy.y-(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),xy.x=this.labelAngle>0?xy.x+(label.textBlock.height-label.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:xy.x+this.tickLength+5)}label.textBlock.x=xy.x,label.textBlock.y=xy.y,labelsToRender.push(label)}else label.textBlock.angle=-90,"bottom"===this._position?(label.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.height-3,label.textBlock.measureText(),xy.x-label.textBlock.height>this.chart.plotArea.x1?isNullOrUndefined(stripLine.startValue)?xy.x-=label.textBlock.height-label.textBlock.fontSize/2:xy.x-=label.textBlock.height/2-label.textBlock.fontSize/2+3:(label.textBlock.angle=90,isNullOrUndefined(stripLine.startValue)?xy.x+=label.textBlock.height-label.textBlock.fontSize/2:xy.x+=label.textBlock.height/2-label.textBlock.fontSize/2+3),-90===label.textBlock.angle?xy.y="near"===label.stripLine.labelAlign?this.chart.plotArea.y2-3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+label.textBlock.width)/2:this.chart.plotArea.y1+label.textBlock.width+3:xy.y="near"===label.stripLine.labelAlign?this.chart.plotArea.y2-label.textBlock.width-3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-label.textBlock.width)/2:this.chart.plotArea.y1+3):"top"===this._position?(label.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.height-3,label.textBlock.measureText(),xy.x-label.textBlock.height>this.chart.plotArea.x1?isNullOrUndefined(stripLine.startValue)?xy.x-=label.textBlock.height-label.textBlock.fontSize/2:xy.x-=label.textBlock.height/2-label.textBlock.fontSize/2+3:(label.textBlock.angle=90,isNullOrUndefined(stripLine.startValue)?xy.x+=label.textBlock.height-label.textBlock.fontSize/2:xy.x+=label.textBlock.height/2-label.textBlock.fontSize/2+3),-90===label.textBlock.angle?xy.y="near"===label.stripLine.labelAlign?this.chart.plotArea.y1+label.textBlock.width+3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+label.textBlock.width)/2:this.chart.plotArea.y2-3:xy.y="near"===label.stripLine.labelAlign?this.chart.plotArea.y1+3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-label.textBlock.width)/2:this.chart.plotArea.y2-label.textBlock.width-3):"left"===this._position?(label.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.width-3,label.textBlock.angle=0,label.textBlock.measureText(),xy.y-label.textBlock.height>this.chart.plotArea.y1?isNullOrUndefined(stripLine.startValue)?xy.y-=label.textBlock.height-label.textBlock.fontSize/2:xy.y-=label.textBlock.height/2-label.textBlock.fontSize+3:xy.y-label.textBlock.height<this.chart.plotArea.y2?xy.y+=label.textBlock.fontSize/2+3:isNullOrUndefined(stripLine.startValue)?xy.y-=label.textBlock.height-label.textBlock.fontSize/2:xy.y-=label.textBlock.height/2-label.textBlock.fontSize+3,xy.x="near"===label.stripLine.labelAlign?this.chart.plotArea.x1+3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-label.textBlock.width/2:this.chart.plotArea.x2-label.textBlock.width-3):"right"===this._position&&(label.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.width-3,label.textBlock.angle=0,label.textBlock.measureText(),xy.y-+label.textBlock.height>this.chart.plotArea.y1?isNullOrUndefined(stripLine.startValue)?xy.y-=label.textBlock.height-label.textBlock.fontSize/2:xy.y-=label.textBlock.height/2-label.textBlock.fontSize/2-3:xy.y-label.textBlock.height<this.chart.plotArea.y2?xy.y+=label.textBlock.fontSize/2+3:isNullOrUndefined(stripLine.startValue)?xy.y-=label.textBlock.height-label.textBlock.fontSize/2:xy.y-=label.textBlock.height/2-label.textBlock.fontSize/2+3,xy.x="near"===label.stripLine.labelAlign?this.chart.plotArea.x2-label.textBlock.width-3:"center"===label.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-label.textBlock.width/2:this.chart.plotArea.x1+3),label.textBlock.x=xy.x,label.textBlock.y=xy.y,labelsToRender.push(label)}if(!clippingRectHandler){for(labelShowOnTopHandled=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),i=0;i<stripLinesToRender.length;i++){(stripLine=stripLinesToRender[i]).showOnTop?stripLineShowOnTopHandled||(stripLineShowOnTopHandled=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),j=0;j<stripLinesToRender.length;j++)(stripLine=stripLinesToRender[j]).showOnTop&&stripLine.render();this.ctx.restore()}),stripLine)):stripLine.render()}for(i=0;i<labelsToRender.length;i++)(label=labelsToRender[i]).stripLine.showOnTop?labelShowOnTopHandled||(labelShowOnTopHandled=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(j=0;j<labelsToRender.length;j++)"inside"===(label=labelsToRender[j]).stripLine.labelPlacement&&label.stripLine.showOnTop&&(_this.ctx.save(),_this.ctx.beginPath(),_this.ctx.rect(_this.chart.plotArea.x1,_this.chart.plotArea.y1,_this.chart.plotArea.width,_this.chart.plotArea.height),_this.ctx.clip(),label.textBlock.render(!0),_this.ctx.restore())}),label.textBlock)):"inside"===label.stripLine.labelPlacement&&label.textBlock.render(!0);this.ctx.restore(),clippingRectHandler=!0}if(clippingRectHandler)for(labelShowOnTopHandled=!1,i=0;i<labelsToRender.length;i++)"outside"===(label=labelsToRender[i]).stripLine.labelPlacement&&label.textBlock.render(!0)}},Axis.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&this.scaleBreaks._appliedBreaks.length>0&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},Axis.prototype.createMask=function(){if(this.scaleBreaks&&this.scaleBreaks._appliedBreaks.length>0){var appliedBreaks=this.scaleBreaks._appliedBreaks;isCanvasSupported?(this.maskCanvas=createCanvas(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var i=0;i<appliedBreaks.length;i++)appliedBreaks[i].endValue<this.viewportMinimum||appliedBreaks[i].startValue>this.viewportMaximum||isNaN(this.range)||appliedBreaks[i].render(this.maskCtx);this.maskCtx.restore()}},Axis.prototype.renderCrosshair=function(mouseX,mouseY){if(isFinite(this.minimum)&&isFinite(this.maximum)){this.crosshair.render(mouseX,mouseY);var parameters={chart:this.chart,crosshair:this.options,axis:this,value:this.crosshair.value};this.crosshair.dispatchEvent("updated",parameters,this)}},Axis.prototype.showCrosshair=function(value){isNullOrUndefined(value)||value<this.viewportMinimum||value>this.viewportMaximum||("top"===this._position||"bottom"===this._position?this.crosshair.render(this.convertValueToPixel(value),null,value):this.crosshair.render(null,this.convertValueToPixel(value),value))},Axis.prototype.renderGrid=function(){if(this.gridThickness&&this.gridThickness>0){var xy,ctx=this.chart.ctx;ctx.save();var plotAreaCoordinates=this.chart.plotArea;if(ctx.lineWidth=this.gridThickness,ctx.strokeStyle=this.gridColor,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(this.gridDashType,this.gridThickness)),"bottom"===this._position||"top"===this._position){for(i=0;i<this._labels.length;i++)if(!(this._labels[i].position<this.viewportMinimum||this._labels[i].position>this.viewportMaximum||this._labels[i].breaksLabelType)){ctx.beginPath(),xy=this.getPixelCoordinatesOnAxis(this._labels[i].position);var gridX=ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0;ctx.moveTo(gridX,plotAreaCoordinates.y1|0),ctx.lineTo(gridX,plotAreaCoordinates.y2|0),ctx.stroke()}}else if("left"===this._position||"right"===this._position)for(var i=0;i<this._labels.length;i++)if(!(this._labels[i].position<this.viewportMinimum||this._labels[i].position>this.viewportMaximum||this._labels[i].breaksLabelType)){ctx.beginPath(),xy=this.getPixelCoordinatesOnAxis(this._labels[i].position);var gridY=ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0;ctx.moveTo(plotAreaCoordinates.x1|0,gridY),ctx.lineTo(plotAreaCoordinates.x2|0,gridY),ctx.stroke()}ctx.restore()}},Axis.prototype.renderAxisLine=function(){var p1,p2,targetCtx=this.chart.ctx,ctx=isCanvasSupported?this.chart._preRenderCtx:targetCtx,firstHalfTickThickness=Math.ceil(this.tickThickness/(this.reversed?-2:2)),secondHalfTickThickness=Math.ceil(this.tickThickness/(this.reversed?2:-2));if(ctx.save(),"bottom"===this._position||"top"===this._position){if(this.lineThickness){this.reversed?(p1=this.lineCoordinates.x2,p2=this.lineCoordinates.x1):(p1=this.lineCoordinates.x1,p2=this.lineCoordinates.x2),ctx.lineWidth=this.lineThickness,ctx.strokeStyle=this.lineColor?this.lineColor:"black",ctx.setLineDash&&ctx.setLineDash(getLineDashArray(this.lineDashType,this.lineThickness));var lineY=this.lineThickness%2==1?.5+(this.lineCoordinates.y1|0):this.lineCoordinates.y1|0;if(ctx.beginPath(),this.scaleBreaks&&!isNullOrUndefined(this.scaleBreaks.firstBreakIndex))if(isNullOrUndefined(this.scaleBreaks.lastBreakIndex))p1=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+secondHalfTickThickness;else for(var i=this.scaleBreaks.firstBreakIndex;i<=this.scaleBreaks.lastBreakIndex;i++)ctx.moveTo(p1,lineY),ctx.lineTo(this.scaleBreaks._appliedBreaks[i].startPixel+firstHalfTickThickness,lineY),p1=this.scaleBreaks._appliedBreaks[i].endPixel+secondHalfTickThickness;p1&&(ctx.moveTo(p1,lineY),ctx.lineTo(p2,lineY)),ctx.stroke()}}else if(("left"===this._position||"right"===this._position)&&this.lineThickness){this.reversed?(p1=this.lineCoordinates.y1,p2=this.lineCoordinates.y2):(p1=this.lineCoordinates.y2,p2=this.lineCoordinates.y1),ctx.lineWidth=this.lineThickness,ctx.strokeStyle=this.lineColor,ctx.setLineDash&&ctx.setLineDash(getLineDashArray(this.lineDashType,this.lineThickness));var lineX=this.lineThickness%2==1?.5+(this.lineCoordinates.x1|0):this.lineCoordinates.x1|0;if(ctx.beginPath(),this.scaleBreaks&&!isNullOrUndefined(this.scaleBreaks.firstBreakIndex))if(isNullOrUndefined(this.scaleBreaks.lastBreakIndex))p1=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+firstHalfTickThickness;else for(i=this.scaleBreaks.firstBreakIndex;i<=this.scaleBreaks.lastBreakIndex;i++)ctx.moveTo(lineX,p1),ctx.lineTo(lineX,this.scaleBreaks._appliedBreaks[i].startPixel+secondHalfTickThickness),p1=this.scaleBreaks._appliedBreaks[i].endPixel+firstHalfTickThickness;p1&&(ctx.moveTo(lineX,p1),ctx.lineTo(lineX,p2)),ctx.stroke()}isCanvasSupported&&(targetCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),ctx.clearRect(0,0,this.chart.width,this.chart.height)),ctx.restore()},Axis.prototype.getPixelCoordinatesOnAxis=function(value){var xy={};if("bottom"===this._position||"top"===this._position){this.conversionParameters.pixelPerUnit;xy.x=this.convertValueToPixel(value),xy.y=this.lineCoordinates.y1}if("left"===this._position||"right"===this._position){this.conversionParameters.pixelPerUnit;xy.y=this.convertValueToPixel(value),xy.x=this.lineCoordinates.x2}return xy},Axis.prototype.convertPixelToValue=function(pixel){if(void 0===pixel)return null;var breakIndex,valueHeight,value=0,p=0,isFirstBreak=!0,appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(p="number"==typeof pixel?pixel:"left"===this._position||"right"===this._position?pixel.y:pixel.x,this.logarithmic){if(valueAboveViewportMin=valueHeight=Math.pow(this.logarithmBase,(p-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),p<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(breakIndex=0;breakIndex<appliedBreaks.length;breakIndex++)if(!(appliedBreaks[breakIndex].endValue<this.conversionParameters.minimum))if(isFirstBreak)if(appliedBreaks[breakIndex].startValue<this.conversionParameters.minimum){if(appliedBreaks[breakIndex].size>1&&this.conversionParameters.minimum*Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))<appliedBreaks[breakIndex].endValue){valueAboveViewportMin=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size));break}valueAboveViewportMin*=appliedBreaks[breakIndex].endValue/this.conversionParameters.minimum/Math.pow(appliedBreaks[breakIndex].size,Math.log(appliedBreaks[breakIndex].endValue/this.conversionParameters.minimum)/Math.log(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue)),valueHeight/=Math.pow(appliedBreaks[breakIndex].size,Math.log(appliedBreaks[breakIndex].endValue/this.conversionParameters.minimum)/Math.log(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue)),isFirstBreak=!1}else{if(!(valueHeight>appliedBreaks[breakIndex].startValue/this.conversionParameters.minimum))break;if((valueHeight/=appliedBreaks[breakIndex].startValue/this.conversionParameters.minimum)<appliedBreaks[breakIndex].size){valueAboveViewportMin*=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,1===appliedBreaks[breakIndex].size?1:Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))/valueHeight;break}valueAboveViewportMin*=appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex].size,valueHeight/=appliedBreaks[breakIndex].size,isFirstBreak=!1}else{if(!(valueHeight>appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex-1].endValue))break;if((valueHeight/=appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex-1].endValue)<appliedBreaks[breakIndex].size){valueAboveViewportMin*=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,1===appliedBreaks[breakIndex].size?1:Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))/valueHeight;break}valueAboveViewportMin*=appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex].size,valueHeight/=appliedBreaks[breakIndex].size}}else for(breakIndex=appliedBreaks.length-1;breakIndex>=0;breakIndex--)if(!(appliedBreaks[breakIndex].startValue>this.conversionParameters.minimum))if(isFirstBreak)if(appliedBreaks[breakIndex].endValue>this.conversionParameters.minimum){if(appliedBreaks[breakIndex].size>1&&this.conversionParameters.minimum*Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))>appliedBreaks[breakIndex].startValue){valueAboveViewportMin=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size));break}valueAboveViewportMin*=appliedBreaks[breakIndex].startValue/this.conversionParameters.minimum*Math.pow(appliedBreaks[breakIndex].size,Math.log(appliedBreaks[breakIndex].startValue/this.conversionParameters.minimum)/Math.log(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue))*valueHeight,valueHeight*=Math.pow(appliedBreaks[breakIndex].size,Math.log(this.conversionParameters.minimum/appliedBreaks[breakIndex].startValue)/Math.log(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue)),isFirstBreak=!1}else{if(!(valueHeight<appliedBreaks[breakIndex].endValue/this.conversionParameters.minimum))break;if((valueHeight/=appliedBreaks[breakIndex].endValue/this.conversionParameters.minimum)>1/appliedBreaks[breakIndex].size){valueAboveViewportMin*=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,appliedBreaks[breakIndex].size<=1?1:Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))*valueHeight;break}valueAboveViewportMin/=appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex].size,valueHeight*=appliedBreaks[breakIndex].size,isFirstBreak=!1}else{if(!(valueHeight<appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex+1].startValue))break;if((valueHeight/=appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex+1].startValue)>1/appliedBreaks[breakIndex].size){valueAboveViewportMin*=Math.pow(appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue,appliedBreaks[breakIndex].size<=1?1:Math.log(valueHeight)/Math.log(appliedBreaks[breakIndex].size))*valueHeight;break}valueAboveViewportMin/=appliedBreaks[breakIndex].endValue/appliedBreaks[breakIndex].startValue/appliedBreaks[breakIndex].size,valueHeight*=appliedBreaks[breakIndex].size}value=valueAboveViewportMin*this.viewportMinimum}else{var valueAboveViewportMin=valueHeight=(p-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit;if(p<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(breakIndex=0;breakIndex<appliedBreaks.length;breakIndex++)if(!(appliedBreaks[breakIndex].endValue<this.conversionParameters.minimum))if(isFirstBreak)if(appliedBreaks[breakIndex].startValue<this.conversionParameters.minimum){if(appliedBreaks[breakIndex].size&&this.conversionParameters.minimum+valueHeight*(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)/appliedBreaks[breakIndex].size<appliedBreaks[breakIndex].endValue){valueAboveViewportMin=appliedBreaks[breakIndex].size<=0?0:valueHeight*(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)/appliedBreaks[breakIndex].size;break}valueAboveViewportMin+=appliedBreaks[breakIndex].endValue-this.conversionParameters.minimum-appliedBreaks[breakIndex].size*(appliedBreaks[breakIndex].endValue-this.conversionParameters.minimum)/(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue),valueHeight-=appliedBreaks[breakIndex].size*(appliedBreaks[breakIndex].endValue-this.conversionParameters.minimum)/(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue),isFirstBreak=!1}else{if(!(valueHeight>appliedBreaks[breakIndex].startValue-this.conversionParameters.minimum))break;if((valueHeight-=appliedBreaks[breakIndex].startValue-this.conversionParameters.minimum)<appliedBreaks[breakIndex].size){valueAboveViewportMin+=(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)*(0===appliedBreaks[breakIndex].size?1:valueHeight/appliedBreaks[breakIndex].size)-valueHeight;break}valueAboveViewportMin+=appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex].size,valueHeight-=appliedBreaks[breakIndex].size,isFirstBreak=!1}else{if(!(valueHeight>appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex-1].endValue))break;if((valueHeight-=appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex-1].endValue)<appliedBreaks[breakIndex].size){valueAboveViewportMin+=(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)*(0===appliedBreaks[breakIndex].size?1:valueHeight/appliedBreaks[breakIndex].size)-valueHeight;break}valueAboveViewportMin+=appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex].size,valueHeight-=appliedBreaks[breakIndex].size}}else for(breakIndex=appliedBreaks.length-1;breakIndex>=0;breakIndex--)if(!(appliedBreaks[breakIndex].startValue>this.conversionParameters.minimum))if(isFirstBreak)if(appliedBreaks[breakIndex].endValue>this.conversionParameters.minimum){if(appliedBreaks[breakIndex].size&&this.conversionParameters.minimum+valueHeight*(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)/appliedBreaks[breakIndex].size>appliedBreaks[breakIndex].startValue){valueAboveViewportMin=appliedBreaks[breakIndex].size<=0?0:valueHeight*(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)/appliedBreaks[breakIndex].size;break}valueAboveViewportMin+=appliedBreaks[breakIndex].startValue-this.conversionParameters.minimum+appliedBreaks[breakIndex].size*(this.conversionParameters.minimum-appliedBreaks[breakIndex].startValue)/(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue),valueHeight+=appliedBreaks[breakIndex].size*(this.conversionParameters.minimum-appliedBreaks[breakIndex].startValue)/(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue),isFirstBreak=!1}else{if(!(valueHeight<appliedBreaks[breakIndex].endValue-this.conversionParameters.minimum))break;if((valueHeight-=appliedBreaks[breakIndex].endValue-this.conversionParameters.minimum)>-1*appliedBreaks[breakIndex].size){valueAboveViewportMin+=(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)*(0===appliedBreaks[breakIndex].size?1:valueHeight/appliedBreaks[breakIndex].size)+valueHeight;break}valueAboveViewportMin-=appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex].size,valueHeight+=appliedBreaks[breakIndex].size,isFirstBreak=!1}else{if(!(valueHeight<appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex+1].startValue))break;if((valueHeight-=appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex+1].startValue)>-1*appliedBreaks[breakIndex].size){valueAboveViewportMin+=(appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue)*(0===appliedBreaks[breakIndex].size?1:valueHeight/appliedBreaks[breakIndex].size)+valueHeight;break}valueAboveViewportMin-=appliedBreaks[breakIndex].endValue-appliedBreaks[breakIndex].startValue-appliedBreaks[breakIndex].size,valueHeight+=appliedBreaks[breakIndex].size}value=this.conversionParameters.minimum+valueAboveViewportMin}return value},Axis.prototype.convertValueToPixel=function(value){var mappedValue=this.getApparentDifference(this.conversionParameters.minimum,value,value);return this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(mappedValue/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5|0:"axisX"===this.type?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(mappedValue-this.conversionParameters.minimum)+.5|0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(mappedValue-this.conversionParameters.minimum)+.5},Axis.prototype.getApparentDifference=function(val1,val2,diff,skipIfInside){var appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic)for(var valueDiff=isNullOrUndefined(diff)?val2/val1:diff,j=0;j<appliedBreaks.length&&!(val2<appliedBreaks[j].startValue);j++)val1>appliedBreaks[j].endValue||(val1<=appliedBreaks[j].startValue&&val2>=appliedBreaks[j].endValue?valueDiff=valueDiff/appliedBreaks[j].endValue*appliedBreaks[j].startValue*appliedBreaks[j].size:val1>=appliedBreaks[j].startValue&&val2>=appliedBreaks[j].endValue?valueDiff=valueDiff/appliedBreaks[j].endValue*val1*Math.pow(appliedBreaks[j].size,Math.log(appliedBreaks[j].endValue/val1)/Math.log(appliedBreaks[j].endValue/appliedBreaks[j].startValue)):val1<=appliedBreaks[j].startValue&&val2<=appliedBreaks[j].endValue?valueDiff=valueDiff/val2*appliedBreaks[j].startValue*Math.pow(appliedBreaks[j].size,Math.log(val2/appliedBreaks[j].startValue)/Math.log(appliedBreaks[j].endValue/appliedBreaks[j].startValue)):!skipIfInside&&val1>appliedBreaks[j].startValue&&val2<appliedBreaks[j].endValue&&(valueDiff=val1*Math.pow(appliedBreaks[j].size,Math.log(val2/val1)/Math.log(appliedBreaks[j].endValue/appliedBreaks[j].startValue))));else for(valueDiff=isNullOrUndefined(diff)?Math.abs(val2-val1):diff,j=0;j<appliedBreaks.length&&!(val2<appliedBreaks[j].startValue);j++)val1>appliedBreaks[j].endValue||(val1<=appliedBreaks[j].startValue&&val2>=appliedBreaks[j].endValue?valueDiff=valueDiff-appliedBreaks[j].endValue+appliedBreaks[j].startValue+appliedBreaks[j].size:val1>appliedBreaks[j].startValue&&val2>=appliedBreaks[j].endValue?valueDiff=valueDiff-appliedBreaks[j].endValue+val1+appliedBreaks[j].size*(appliedBreaks[j].endValue-val1)/(appliedBreaks[j].endValue-appliedBreaks[j].startValue):val1<=appliedBreaks[j].startValue&&val2<appliedBreaks[j].endValue?valueDiff=valueDiff-val2+appliedBreaks[j].startValue+appliedBreaks[j].size*(val2-appliedBreaks[j].startValue)/(appliedBreaks[j].endValue-appliedBreaks[j].startValue):!skipIfInside&&val1>appliedBreaks[j].startValue&&val2<appliedBreaks[j].endValue&&(valueDiff=val1+appliedBreaks[j].size*(val2-val1)/(appliedBreaks[j].endValue-appliedBreaks[j].startValue)));return valueDiff},Axis.prototype.setViewPortRange=function(viewportMinimum,viewportMaximum){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(viewportMinimum,viewportMaximum),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(viewportMinimum,viewportMaximum)},Axis.prototype.getXValueAt=function(pixel){if(!pixel)return null;var xval=null;return"left"===this._position?xval=this.convertPixelToValue(pixel.y):"bottom"===this._position&&(xval=this.convertPixelToValue(pixel.x)),xval},Axis.prototype.calculateValueToPixelConversionParameters=function(value){var appliedBreaks=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],conversionParameters={pixelPerUnit:null,minimum:null,reference:null},width=this.lineCoordinates.width,height=this.lineCoordinates.height,length="bottom"===this._position||"top"===this._position?width:height,range=Math.abs(this.range);if(this.logarithmic)for(var i=0;i<appliedBreaks.length&&!(this.viewportMaximum<appliedBreaks[i].startValue);i++)this.viewportMinimum>appliedBreaks[i].endValue||(this.viewportMinimum>=appliedBreaks[i].startValue&&this.viewportMaximum<=appliedBreaks[i].endValue?length=0:this.viewportMinimum<=appliedBreaks[i].startValue&&this.viewportMaximum>=appliedBreaks[i].endValue?(range=range/appliedBreaks[i].endValue*appliedBreaks[i].startValue,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100:length-=Math.min(appliedBreaks[i].spacing,.1*length)):this.viewportMinimum>appliedBreaks[i].startValue&&this.viewportMaximum>=appliedBreaks[i].endValue?(range=range/appliedBreaks[i].endValue*this.viewportMinimum,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100*Math.log(appliedBreaks[i].endValue/this.viewportMinimum)/Math.log(appliedBreaks[i].endValue/appliedBreaks[i].startValue):length-=Math.min(appliedBreaks[i].spacing,.1*length)*Math.log(appliedBreaks[i].endValue/this.viewportMinimum)/Math.log(appliedBreaks[i].endValue/appliedBreaks[i].startValue)):this.viewportMinimum<=appliedBreaks[i].startValue&&this.viewportMaximum<appliedBreaks[i].endValue&&(range=range/this.viewportMaximum*appliedBreaks[i].startValue,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100*Math.log(this.viewportMaximum/appliedBreaks[i].startValue)/Math.log(appliedBreaks[i].endValue/appliedBreaks[i].startValue):length-=Math.min(appliedBreaks[i].spacing,.1*length)*Math.log(this.viewportMaximum/appliedBreaks[i].startValue)/Math.log(appliedBreaks[i].endValue/appliedBreaks[i].startValue)));else for(i=0;i<appliedBreaks.length&&!(this.viewportMaximum<appliedBreaks[i].startValue);i++)this.viewportMinimum>appliedBreaks[i].endValue||(this.viewportMinimum>=appliedBreaks[i].startValue&&this.viewportMaximum<=appliedBreaks[i].endValue?length=0:this.viewportMinimum<=appliedBreaks[i].startValue&&this.viewportMaximum>=appliedBreaks[i].endValue?(range=range-appliedBreaks[i].endValue+appliedBreaks[i].startValue,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100:length-=Math.min(appliedBreaks[i].spacing,.1*length)):this.viewportMinimum>appliedBreaks[i].startValue&&this.viewportMaximum>=appliedBreaks[i].endValue?(range=range-appliedBreaks[i].endValue+this.viewportMinimum,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100*(appliedBreaks[i].endValue-this.viewportMinimum)/(appliedBreaks[i].endValue-appliedBreaks[i].startValue):length-=Math.min(appliedBreaks[i].spacing,.1*length)*(appliedBreaks[i].endValue-this.viewportMinimum)/(appliedBreaks[i].endValue-appliedBreaks[i].startValue)):this.viewportMinimum<=appliedBreaks[i].startValue&&this.viewportMaximum<appliedBreaks[i].endValue&&(range=range-this.viewportMaximum+appliedBreaks[i].startValue,appliedBreaks[i].spacing.toString().indexOf("%")>0?length*=1-parseFloat(appliedBreaks[i].spacing)/100*(this.viewportMaximum-appliedBreaks[i].startValue)/(appliedBreaks[i].endValue-appliedBreaks[i].startValue):length-=Math.min(appliedBreaks[i].spacing,.1*length)*(this.viewportMaximum-appliedBreaks[i].startValue)/(appliedBreaks[i].endValue-appliedBreaks[i].startValue)));conversionParameters.minimum=this.viewportMinimum,conversionParameters.maximum=this.viewportMaximum,conversionParameters.range=range,"bottom"!==this._position&&"top"!==this._position||(this.logarithmic?(conversionParameters.lnLogarithmBase=Math.log(this.logarithmBase),conversionParameters.pixelPerUnit=(this.reversed?-1:1)*length*conversionParameters.lnLogarithmBase/Math.log(Math.abs(range))):conversionParameters.pixelPerUnit=(this.reversed?-1:1)*length/Math.abs(range),conversionParameters.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),"left"!==this._position&&"right"!==this._position||(this.logarithmic?(conversionParameters.lnLogarithmBase=Math.log(this.logarithmBase),conversionParameters.pixelPerUnit=(this.reversed?1:-1)*length*conversionParameters.lnLogarithmBase/Math.log(Math.abs(range))):conversionParameters.pixelPerUnit=(this.reversed?1:-1)*length/Math.abs(range),conversionParameters.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=conversionParameters},Axis.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var freeSpace=this.chart.layoutManager.getFreeSpace(),isLessThanTwoDataPoints=!1,isDateTime=!1;"bottom"===this._position||"top"===this._position?(this.maxWidth=freeSpace.width,this.maxHeight=freeSpace.height):(this.maxWidth=freeSpace.height,this.maxHeight=freeSpace.width);var pixelsPerInterval="axisX"===this.type?"xySwapped"===this.chart.plotInfo.axisPlacement?62:70:"xySwapped"===this.chart.plotInfo.axisPlacement?50:40,minTicks=4;"axisX"===this.type&&(minTicks=this.maxWidth<600?8:6);var min,max,minDiff,range,noTicks=Math.max(minTicks,Math.floor(this.maxWidth/pixelsPerInterval)),rangePadding=0;if(!isNullOrUndefined(this.options.viewportMinimum)&&!isNullOrUndefined(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),!isNullOrUndefined(this.options.viewportMinimum)||isNullOrUndefined(this.sessionVariables.newViewportMinimum)||isNaN(this.sessionVariables.newViewportMinimum)?(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum):this.viewportMinimum=this.sessionVariables.newViewportMinimum,!isNullOrUndefined(this.options.viewportMaximum)||isNullOrUndefined(this.sessionVariables.newViewportMaximum)||isNaN(this.sessionVariables.newViewportMaximum)?(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum):this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.scaleBreaks)for(var i=0;i<this.scaleBreaks._appliedBreaks.length;i++)if((!isNullOrUndefined(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[i].startValue||!isNullOrUndefined(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[i].startValue||!isNullOrUndefined(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[i].startValue)&&(!isNullOrUndefined(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[i].endValue||!isNullOrUndefined(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[i].endValue||!isNullOrUndefined(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[i].endValue)){this.scaleBreaks._appliedBreaks.splice(i,1);break}if("axisX"===this.type){if(this.dataSeries&&this.dataSeries.length>0)for(var k=0;k<this.dataSeries.length;k++)"dateTime"===this.dataSeries[k].xValueType&&(isDateTime=!0);min=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,(max=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)-min==0&&(max+=rangePadding=void 0===this.options.interval?.4:this.options.interval,min-=rangePadding),this.dataInfo.minDiff!==1/0?minDiff=this.dataInfo.minDiff:max-min>1?minDiff=.5*Math.abs(max-min):(minDiff=1,isDateTime&&(isLessThanTwoDataPoints=!0))}else"axisY"===this.type&&(min=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,max=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(min)||isFinite(max)?isFinite(min)?isFinite(max)||(max=min):min=max:(max=void 0===this.options.interval?-1/0:this.options.interval,min=void 0!==this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),0===min&&0===max?(max+=9,min=0):max-min==0?(max+=rangePadding=Math.min(Math.abs(.01*Math.abs(max)),5),min-=rangePadding):min>max?(rangePadding=Math.min(.01*Math.abs(this.getApparentDifference(max,min,null,!0)),5),max>=0?min=max-rangePadding:max=isFinite(min)?min+rangePadding:0):(rangePadding=Math.min(.01*Math.abs(this.getApparentDifference(min,max,null,!0)),.05),0!==max&&(max+=rangePadding),0!==min&&(min-=rangePadding)),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max-min>1?.5*Math.abs(max-min):1,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&min>0&&(min=0),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&max<0&&(max=0));range=this.getApparentDifference(isNaN(this.viewportMinimum)||null===this.viewportMinimum?min:this.viewportMinimum,isNaN(this.viewportMaximum)||null===this.viewportMaximum?max:this.viewportMaximum,null,!0),"axisX"===this.type&&isDateTime?(this.intervalType||(range/1<=noTicks?(this.interval=1,this.intervalType="millisecond"):range/2<=noTicks?(this.interval=2,this.intervalType="millisecond"):range/5<=noTicks?(this.interval=5,this.intervalType="millisecond"):range/10<=noTicks?(this.interval=10,this.intervalType="millisecond"):range/20<=noTicks?(this.interval=20,this.intervalType="millisecond"):range/50<=noTicks?(this.interval=50,this.intervalType="millisecond"):range/100<=noTicks?(this.interval=100,this.intervalType="millisecond"):range/200<=noTicks?(this.interval=200,this.intervalType="millisecond"):range/250<=noTicks?(this.interval=250,this.intervalType="millisecond"):range/300<=noTicks?(this.interval=300,this.intervalType="millisecond"):range/400<=noTicks?(this.interval=400,this.intervalType="millisecond"):range/500<=noTicks?(this.interval=500,this.intervalType="millisecond"):range/(1*constants.secondDuration)<=noTicks?(this.interval=1,this.intervalType="second"):range/(2*constants.secondDuration)<=noTicks?(this.interval=2,this.intervalType="second"):range/(5*constants.secondDuration)<=noTicks?(this.interval=5,this.intervalType="second"):range/(10*constants.secondDuration)<=noTicks?(this.interval=10,this.intervalType="second"):range/(15*constants.secondDuration)<=noTicks?(this.interval=15,this.intervalType="second"):range/(20*constants.secondDuration)<=noTicks?(this.interval=20,this.intervalType="second"):range/(30*constants.secondDuration)<=noTicks?(this.interval=30,this.intervalType="second"):range/(1*constants.minuteDuration)<=noTicks?(this.interval=1,this.intervalType="minute"):range/(2*constants.minuteDuration)<=noTicks?(this.interval=2,this.intervalType="minute"):range/(5*constants.minuteDuration)<=noTicks?(this.interval=5,this.intervalType="minute"):range/(10*constants.minuteDuration)<=noTicks?(this.interval=10,this.intervalType="minute"):range/(15*constants.minuteDuration)<=noTicks?(this.interval=15,this.intervalType="minute"):range/(20*constants.minuteDuration)<=noTicks?(this.interval=20,this.intervalType="minute"):range/(30*constants.minuteDuration)<=noTicks?(this.interval=30,this.intervalType="minute"):range/(1*constants.hourDuration)<=noTicks?(this.interval=1,this.intervalType="hour"):range/(2*constants.hourDuration)<=noTicks?(this.interval=2,this.intervalType="hour"):range/(3*constants.hourDuration)<=noTicks?(this.interval=3,this.intervalType="hour"):range/(6*constants.hourDuration)<=noTicks?(this.interval=6,this.intervalType="hour"):range/(1*constants.dayDuration)<=noTicks?(this.interval=1,this.intervalType="day"):range/(2*constants.dayDuration)<=noTicks?(this.interval=2,this.intervalType="day"):range/(4*constants.dayDuration)<=noTicks?(this.interval=4,this.intervalType="day"):range/(1*constants.weekDuration)<=noTicks?(this.interval=1,this.intervalType="week"):range/(2*constants.weekDuration)<=noTicks?(this.interval=2,this.intervalType="week"):range/(3*constants.weekDuration)<=noTicks?(this.interval=3,this.intervalType="week"):range/(1*constants.monthDuration)<=noTicks?(this.interval=1,this.intervalType="month"):range/(2*constants.monthDuration)<=noTicks?(this.interval=2,this.intervalType="month"):range/(3*constants.monthDuration)<=noTicks?(this.interval=3,this.intervalType="month"):range/(6*constants.monthDuration)<=noTicks?(this.interval=6,this.intervalType="month"):range/(1*constants.yearDuration)<=noTicks?(this.interval=1,this.intervalType="year"):range/(2*constants.yearDuration)<=noTicks?(this.interval=2,this.intervalType="year"):range/(4*constants.yearDuration)<=noTicks?(this.interval=4,this.intervalType="year"):(this.interval=Math.floor(Axis.getNiceNumber(range/(noTicks-1),!0)/constants.yearDuration),this.intervalType="year")),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=min-minDiff/2),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=max+minDiff/2),isLessThanTwoDataPoints?this.autoValueFormatString="MMM DD YYYY HH:mm":"year"===this.intervalType?this.autoValueFormatString="YYYY":"month"===this.intervalType?this.autoValueFormatString="MMM YYYY":"week"===this.intervalType||"day"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"hour"===this.intervalType||"minute"===this.intervalType?this.autoValueFormatString="hh:mm TT":"second"===this.intervalType?this.autoValueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",range=Axis.getNiceNumber(range,!1),this.options&&this.options.interval>0?this.interval=this.options.interval:this.interval=Axis.getNiceNumber(range/(noTicks-1),!0),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&("axisX"===this.type?this.viewportMinimum=min-minDiff/2:this.viewportMinimum=Math.floor(min/this.interval)*this.interval),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&("axisX"===this.type?this.viewportMaximum=max+minDiff/2:this.viewportMaximum=Math.ceil(max/this.interval)*this.interval),0===this.viewportMaximum&&0===this.viewportMinimum&&(0===this.options.viewportMinimum?this.viewportMaximum+=10:0===this.options.viewportMaximum&&(this.viewportMinimum-=10),this.options&&void 0===this.options.interval&&(this.interval=Axis.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(noTicks-1),!0)))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(min=null!==this.minimum?this.minimum:this.dataInfo.min,(max=null!==this.maximum?this.maximum:this.dataInfo.max)-min==0&&(max+=rangePadding=void 0===this.options.interval?.4:this.options.interval,min-=rangePadding),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max-min>1?.5*Math.abs(max-min):1):"axisY"===this.type&&(min=null!==this.minimum?this.minimum:this.dataInfo.min,max=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(min)||isFinite(max)?0===min&&0===max?(max+=9,min=0):max-min==0?(max+=rangePadding=Math.min(Math.abs(.01*Math.abs(max)),5),min-=rangePadding):min>max?(rangePadding=Math.min(.01*Math.abs(this.getApparentDifference(max,min,null,!0)),5),max>=0?min=max-rangePadding:max=isFinite(min)?min+rangePadding:0):(rangePadding=Math.min(.01*Math.abs(this.getApparentDifference(min,max,null,!0)),.05),0!==max&&(max+=rangePadding),0!==min&&(min-=rangePadding)):(max=void 0===this.options.interval?-1/0:this.options.interval,min=void 0!==this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max-min>1?.5*Math.abs(max-min):1,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&min>0&&(min=0),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&max<0&&(max=0)),range=Math.abs(this.getApparentDifference(min,max,null,!0)),"axisX"===this.type&&isDateTime?(this.valueType="dateTime",(null===this.minimum||isNaN(this.minimum))&&(this.minimum=min-minDiff/2),(null===this.maximum||isNaN(this.maximum))&&(this.maximum=max+minDiff/2)):(this.intervalType=this.valueType="number",null===this.minimum&&("axisX"===this.type?this.minimum=min-minDiff/2:this.minimum=Math.floor(min/this.interval)*this.interval,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),null===this.maximum&&("axisX"===this.type?this.maximum=max+minDiff/2:this.maximum=Math.ceil(max/this.interval)*this.interval,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),0===this.maximum&&0===this.minimum&&(0===this.options.minimum?this.maximum+=10:0===this.options.maximum&&(this.minimum-=10)))),isNullOrUndefined(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),isNullOrUndefined(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,"axisX"===this.type&&isDateTime?this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):this.intervalStartPosition=Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=Axis.generateValueFormatString(this.range,2))}},Axis.prototype.calculateLogarithmicAxisParameters=function(){var linearInterval,freeSpace=this.chart.layoutManager.getFreeSpace(),lnLogarithmBase=Math.log(this.logarithmBase);"bottom"===this._position||"top"===this._position?(this.maxWidth=freeSpace.width,this.maxHeight=freeSpace.height):(this.maxWidth=freeSpace.height,this.maxHeight=freeSpace.width);var min,max,minDiff,range,noTicks="axisX"===this.type?this.maxWidth<500?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),rangePadding=1;if((null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks)for(var i=0;i<this.scaleBreaks._appliedBreaks.length;i++)if((!isNullOrUndefined(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[i].startValue||!isNullOrUndefined(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[i].startValue||!isNullOrUndefined(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[i].startValue)&&(!isNullOrUndefined(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[i].endValue||!isNullOrUndefined(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[i].endValue||!isNullOrUndefined(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[i].endValue)){this.scaleBreaks._appliedBreaks.splice(i,1);break}"axisX"===this.type?(min=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,(max=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)/min==1&&(max*=rangePadding=Math.pow(this.logarithmBase,void 0===this.options.interval?.4:this.options.interval),min/=rangePadding),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max/min>this.logarithmBase?max/min*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(min=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,max=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,min<=0&&!isFinite(max)?(max=void 0===this.options.interval?0:this.options.interval,min=1):min<=0?min=max:isFinite(max)||(max=min),1===min&&1===max?(max*=this.logarithmBase-1/this.logarithmBase,min=1):max/min==1?(max*=rangePadding=Math.min(max*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),min/=rangePadding):min>max?(rangePadding=Math.min(min/max*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),max>=1?min=max/rangePadding:max=min*rangePadding):(rangePadding=Math.min(max/min*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==max&&(max*=rangePadding),1!==min&&(min/=rangePadding)),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max/min>this.logarithmBase?max/min*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&min>1&&(min=1),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&max<1&&(max=1)),range=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?max:this.viewportMaximum)/(isNaN(this.viewportMinimum)||null===this.viewportMinimum?min:this.viewportMinimum);var linearRange=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?max:this.viewportMaximum)-(isNaN(this.viewportMinimum)||null===this.viewportMinimum?min:this.viewportMinimum);this.intervalType="number",range=Math.pow(this.logarithmBase,Axis.getNiceNumber(Math.abs(Math.log(range)/lnLogarithmBase),!1)),this.options&&this.options.interval>0?this.interval=this.options.interval:(this.interval=Axis.getNiceExponent(Math.log(range)/lnLogarithmBase/(noTicks-1),!0),linearInterval=Axis.getNiceNumber(linearRange/(noTicks-1),!0)),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&("axisX"===this.type?this.viewportMinimum=min/Math.sqrt(minDiff):this.viewportMinimum=Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(min)/lnLogarithmBase/this.interval))),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&("axisX"===this.type?this.viewportMaximum=max*Math.sqrt(minDiff):this.viewportMaximum=Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(max)/lnLogarithmBase/this.interval))),1===this.viewportMaximum&&1===this.viewportMinimum&&(1===this.options.viewportMinimum?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.viewportMaximum&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&void 0===this.options.interval&&(this.interval=Axis.getNiceExponent(Math.ceil(Math.log(range)/lnLogarithmBase)/(noTicks-1)),linearInterval=Axis.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(noTicks-1),!0))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(min=null!==this.minimum?this.minimum:this.dataInfo.min,(max=null!==this.maximum?this.maximum:this.dataInfo.max)/min==1&&(max*=rangePadding=Math.pow(this.logarithmBase,void 0===this.options.interval?.4:this.options.interval),min/=rangePadding),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max/min>this.logarithmBase?max/min*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(min=null!==this.minimum?this.minimum:this.dataInfo.min,max=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(min)||isFinite(max)?1===min&&1===max?(max*=this.logarithmBase,min/=this.logarithmBase):max/min==1?(max*=rangePadding=Math.pow(this.logarithmBase,this.interval),min/=rangePadding):min>max?(rangePadding=Math.min(min/max*.01,5),max>=1?min=max/rangePadding:max=min*rangePadding):(rangePadding=Math.min(max/min*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==max&&(max*=rangePadding),1!==min&&(min/=rangePadding)):(max=void 0===this.options.interval?0:this.options.interval,min=1),minDiff=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:max/min>this.logarithmBase?max/min*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&min>1&&(min=1),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&max<1&&(max=1)),range=max/min,this.intervalType="number",null===this.minimum&&("axisX"===this.type?this.minimum=min/Math.sqrt(minDiff):this.minimum=Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(min)/lnLogarithmBase/this.interval)),isNullOrUndefined(null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?void 0===this.sessionVariables.newViewportMinimum?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)||(this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?void 0===this.sessionVariables.newViewportMinimum?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum))),null===this.maximum&&("axisX"===this.type?this.maximum=max*Math.sqrt(minDiff):this.maximum=Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(max)/lnLogarithmBase/this.interval)),isNullOrUndefined(null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?void 0===this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)||(this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?void 0===this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum))),1===this.maximum&&1===this.minimum&&(1===this.options.minimum?this.maximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.maximum&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum);var intervalStartPosition=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(lnLogarithmBase*this.interval)+.2)*this.interval);if(this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=noTicks,!this.options.interval&&this.range<Math.pow(this.logarithmBase,this.viewportMaximum<8||noTicks<3?2:3)){for(var linearIntervalStartPosition=Math.floor(this.viewportMinimum/linearInterval+.5)*linearInterval;linearIntervalStartPosition<this.viewportMinimum;)linearIntervalStartPosition+=linearInterval;this.equidistantInterval=!1,this.intervalStartPosition=linearIntervalStartPosition,this.interval=linearInterval}else{if(!this.options.interval){var lnInterval=Math.ceil(this.interval);this.range>this.interval&&(this.interval=lnInterval,intervalStartPosition=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(lnLogarithmBase*this.interval)+.2)*this.interval))}this.equidistantInterval=!0,this.intervalStartPosition=intervalStartPosition}if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",this.viewportMinimum<1)){var numberOfDecimals=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2;if(!isNaN(numberOfDecimals)&&isFinite(numberOfDecimals)||(numberOfDecimals=2),numberOfDecimals>2)for(i=0;i<numberOfDecimals-2;i++)this.valueFormatString+="#"}},Axis.generateValueFormatString=function(range,decimalsAt100){var valueFormatString="#,##0.",numberOfDecimals=decimalsAt100;range<1&&(numberOfDecimals+=Math.floor(Math.abs(Math.log(range)/Math.LN10)),!isNaN(numberOfDecimals)&&isFinite(numberOfDecimals)||(numberOfDecimals=decimalsAt100));for(var i=0;i<numberOfDecimals;i++)valueFormatString+="#";return valueFormatString},Axis.getNiceExponent=function(x,round){var nf,exp=Math.floor(Math.log(x)/Math.LN10),f=x/Math.pow(10,exp);return nf=exp<0?f<=1?1:f<=5?5:10:Math.max(Math.floor(f),1),Number(exp<-20?nf*Math.pow(10,exp):(nf*Math.pow(10,exp)).toFixed(20))},Axis.getNiceNumber=function(x,round){var nf,exp=Math.floor(Math.log(x)/Math.LN10),f=x/Math.pow(10,exp);return nf=round?f<1.5?1:f<3?2:f<7?5:10:f<=1?1:f<=2?2:f<=5?5:10,Number(exp<-20?nf*Math.pow(10,exp):(nf*Math.pow(10,exp)).toFixed(20))},Axis.prototype.getLabelStartPoint=function(){var intervalInMilliseconds=convertToNumber(this.interval,this.intervalType),minimum=Math.floor(this.viewportMinimum/intervalInMilliseconds)*intervalInMilliseconds,dateTime=new Date(minimum);return"millisecond"===this.intervalType||("second"===this.intervalType?dateTime.getMilliseconds()>0&&(dateTime.setSeconds(dateTime.getSeconds()+1),dateTime.setMilliseconds(0)):"minute"===this.intervalType?(dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setMinutes(dateTime.getMinutes()+1),dateTime.setSeconds(0),dateTime.setMilliseconds(0)):"hour"===this.intervalType?(dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setHours(dateTime.getHours()+1),dateTime.setMinutes(0),dateTime.setSeconds(0),dateTime.setMilliseconds(0)):"day"===this.intervalType?(dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setDate(dateTime.getDate()+1),dateTime.setHours(0),dateTime.setMinutes(0),dateTime.setSeconds(0),dateTime.setMilliseconds(0)):"week"===this.intervalType?(dateTime.getDay()>0||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setDate(dateTime.getDate()+(7-dateTime.getDay())),dateTime.setHours(0),dateTime.setMinutes(0),dateTime.setSeconds(0),dateTime.setMilliseconds(0)):"month"===this.intervalType?(dateTime.getDate()>1||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setMonth(dateTime.getMonth()+1),dateTime.setDate(1),dateTime.setHours(0),dateTime.setMinutes(0),dateTime.setSeconds(0),dateTime.setMilliseconds(0)):"year"===this.intervalType&&(dateTime.getMonth()>0||dateTime.getDate()>1||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0)&&(dateTime.setFullYear(dateTime.getFullYear()+1),dateTime.setMonth(0),dateTime.setDate(1),dateTime.setHours(0),dateTime.setMinutes(0),dateTime.setSeconds(0),dateTime.setMilliseconds(0))),dateTime},extend(ScaleBreaks,CanvasJSObject),extend(Break,CanvasJSObject),Break.prototype.createUserOptions=function(options){if(void 0!==options||this.options._isPlaceholder){var optionsIndex=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(addArrayIndexOf(this.parent[this.optionsName]),optionsIndex=this.parent.options[this.optionsName].indexOf(this.options)),this.options=void 0===options?{}:options,this.parent.options[this.optionsName][optionsIndex]=this.options}},Break.prototype.render=function(ctx){if(0!==this.spacing||0!==this.options.lineThickness&&(void 0!==this.options.lineThickness||0!==this.parent.lineThickness)){var oldCtx=this.ctx,oldGlobalAlpha=this.ctx.globalAlpha;this.ctx=ctx||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var xyStart=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),xyEnd=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1;intToHexColorString(this.id);var sign,x1,x2,y1,y2,px,py,noOfRepatation,oscillation=Math.max(this.spacing,3),lineWidth=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=lineWidth,this.ctx.setLineDash&&this.ctx.setLineDash(getLineDashArray(this.lineDashType,lineWidth)),"bottom"===this.scaleBreaks.parent._position||"top"===this.scaleBreaks.parent._position){if(x1=lineWidth%2==1?.5+(xyStart.x|0):xyStart.x|0,x2=lineWidth%2==1?.5+(xyEnd.x|0):xyEnd.x|0,"top"===this.scaleBreaks.parent._position?(y1=this.chart.plotArea.y1,y2=this.chart.plotArea.y2+lineWidth/2+.5|0):(y1=this.chart.plotArea.y2,y2=this.chart.plotArea.y1-lineWidth/2+.5|0,oscillation*=-1),this.bounds={x1:x1-lineWidth/2,y1,x2:x2+lineWidth/2,y2},this.ctx.moveTo(x1,y1),"straight"===this.type||"top"===this.scaleBreaks.parent._position&&oscillation<=0||"bottom"===this.scaleBreaks.parent._position&&oscillation>=0)this.ctx.lineTo(x1,y2),this.ctx.lineTo(x2,y2),this.ctx.lineTo(x2,y1);else if("wavy"===this.type){px=x1,sign=.5,noOfRepatation=(y2-(py=y1))/oscillation/3;for(var i=0;i<noOfRepatation;i++)this.ctx.bezierCurveTo(px+sign*oscillation,py+oscillation,px+sign*oscillation,py+2*oscillation,px,py+3*oscillation),py+=3*oscillation,sign*=-1;this.ctx.bezierCurveTo(px+sign*oscillation,py+oscillation,px+sign*oscillation,py+2*oscillation,px,py+3*oscillation),px=x2,sign*=-1,this.ctx.lineTo(px,py);for(i=0;i<noOfRepatation;i++)this.ctx.bezierCurveTo(px+sign*oscillation,py-oscillation,px+sign*oscillation,py-2*oscillation,px,py-3*oscillation),py-=3*oscillation,sign*=-1}else if("zigzag"===this.type){sign=-1,px=x1+oscillation,noOfRepatation=(y2-(py=y1+oscillation))/oscillation/2;for(i=0;i<noOfRepatation;i++)this.ctx.lineTo(px,py),px+=2*sign*oscillation,py+=2*oscillation,sign*=-1;this.ctx.lineTo(px,py),px+=x2-x1;for(i=0;i<noOfRepatation+1;i++)this.ctx.lineTo(px,py),px+=2*sign*oscillation,py-=2*oscillation,sign*=-1;this.ctx.lineTo(px+sign*oscillation,py+oscillation)}}else if("left"===this.scaleBreaks.parent._position||"right"===this.scaleBreaks.parent._position)if(y1=lineWidth%2==1?.5+(xyEnd.y|0):xyEnd.y|0,y2=lineWidth%2==1?.5+(xyStart.y|0):xyStart.y|0,"left"===this.scaleBreaks.parent._position?(x1=this.chart.plotArea.x1,x2=this.chart.plotArea.x2+lineWidth/2+.5|0):(x1=this.chart.plotArea.x2,x2=this.chart.plotArea.x1-lineWidth/2+.5|0,oscillation*=-1),this.bounds={x1,y1:y1-lineWidth/2,x2,y2:y2+lineWidth/2},this.ctx.moveTo(x1,y1),"straight"===this.type||"left"===this.scaleBreaks.parent._position&&oscillation<=0||"right"===this.scaleBreaks.parent._position&&oscillation>=0)this.ctx.lineTo(x2,y1),this.ctx.lineTo(x2,y2),this.ctx.lineTo(x1,y2);else if("wavy"===this.type){py=y1,sign=.5,noOfRepatation=(x2-(px=x1))/oscillation/3;for(i=0;i<noOfRepatation;i++)this.ctx.bezierCurveTo(px+oscillation,py+sign*oscillation,px+2*oscillation,py+sign*oscillation,px+3*oscillation,py),px+=3*oscillation,sign*=-1;this.ctx.bezierCurveTo(px+oscillation,py+sign*oscillation,px+2*oscillation,py+sign*oscillation,px+3*oscillation,py),py=y2,sign*=-1,this.ctx.lineTo(px,py);for(i=0;i<noOfRepatation;i++)this.ctx.bezierCurveTo(px-oscillation,py+sign*oscillation,px-2*oscillation,py+sign*oscillation,px-3*oscillation,py),px-=3*oscillation,sign*=-1}else if("zigzag"===this.type){sign=1,py=y1-oscillation,noOfRepatation=(x2-(px=x1+oscillation))/oscillation/2;for(i=0;i<noOfRepatation;i++)this.ctx.lineTo(px,py),py+=2*sign*oscillation,px+=2*oscillation,sign*=-1;this.ctx.lineTo(px,py),py+=y2-y1;for(i=0;i<noOfRepatation+1;i++)this.ctx.lineTo(px,py),py+=2*sign*oscillation,px-=2*oscillation,sign*=-1;this.ctx.lineTo(px+oscillation,py+sign*oscillation)}lineWidth>0&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=oldGlobalAlpha,this.ctx=oldCtx}},extend(StripLine,CanvasJSObject),StripLine.prototype.createUserOptions=function(options){if(void 0!==options||this.options._isPlaceholder){var optionsIndex=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(addArrayIndexOf(this.parent.stripLines),optionsIndex=this.parent.options.stripLines.indexOf(this.options)),this.options=void 0===options?{}:options,this.parent.options.stripLines[optionsIndex]=this.options}},StripLine.prototype.render=function(){this.ctx.save();var xy=this.parent.getPixelCoordinatesOnAxis(this.value),lineWidth=Math.abs("pixel"===this._thicknessType?this.thickness:Math.abs(this.parent.convertValueToPixel(this.endValue)-this.parent.convertValueToPixel(this.startValue)));if(lineWidth>0){var opacity=null===this.opacity?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var oldGlobalAlpha=this.ctx.globalAlpha;this.ctx.globalAlpha=opacity;var x1,x2,y1,y2;intToHexColorString(this.id);if(this.ctx.lineWidth=lineWidth,this.ctx.setLineDash&&this.ctx.setLineDash(getLineDashArray(this.lineDashType,lineWidth)),"bottom"===this.parent._position||"top"===this.parent._position)x1=x2=this.ctx.lineWidth%2==1?.5+(xy.x|0):xy.x|0,y1=this.chart.plotArea.y1,y2=this.chart.plotArea.y2,this.bounds={x1:x1-lineWidth/2,y1,x2:x2+lineWidth/2,y2};else if("left"===this.parent._position||"right"===this.parent._position){y1=y2=this.ctx.lineWidth%2==1?.5+(xy.y|0):xy.y|0,x1=this.chart.plotArea.x1,x2=this.chart.plotArea.x2,this.bounds={x1,y1:y1-lineWidth/2,x2,y2:y2+lineWidth/2}}this.ctx.moveTo(x1,y1),this.ctx.lineTo(x2,y2),this.ctx.stroke(),this.ctx.globalAlpha=oldGlobalAlpha}this.ctx.restore()},extend(Crosshair,CanvasJSObject),Crosshair.prototype.showAt=function(value){if(!this.enabled)return!1;var chart=this.chart,shown=!1;if(chart.resetOverlayedCanvas(),chart.clearedOverlayedCanvas=this.parent.type,"xySwapped"===chart.plotInfo.axisPlacement){if("bottom"===this.parent._position)for(var i=0;i<chart.axisY.length;i++)this.parent===chart.axisY[i]&&(value>=chart.axisY[i].viewportMinimum&&value<=chart.axisY[i].viewportMaximum?chart.axisY[i]._crosshairValue=value:chart.axisY[i]._crosshairValue=null);else if("top"===this.parent._position)for(i=0;i<chart.axisY2.length;i++)this.parent===chart.axisY2[i]&&(value>=chart.axisY2[i].viewportMinimum&&value<=chart.axisY2[i].viewportMaximum?chart.axisY2[i]._crosshairValue=value:chart.axisY2[i]._crosshairValue=null);else if("left"===this.parent._position)for(i=0;i<chart.axisX.length;i++)this.parent===chart.axisX[i]&&(value>=chart.axisX[i].viewportMinimum&&value<=chart.axisX[i].viewportMaximum?chart.axisX[i]._crosshairValue=value:chart.axisX[i]._crosshairValue=null);else if("right"===this.parent._position)for(i=0;i<chart.axisX2.length;i++)this.parent===chart.axisX2[i]&&(value>=chart.axisX2[i].viewportMinimum&&value<=chart.axisX2[i].viewportMaximum?chart.axisX2[i]._crosshairValue=value:chart.axisX2[i]._crosshairValue=null)}else if("bottom"===this.parent._position)for(i=0;i<chart.axisX.length;i++)this.parent===chart.axisX[i]&&(value>=chart.axisX[i].viewportMinimum&&value<=chart.axisX[i].viewportMaximum?chart.axisX[i]._crosshairValue=value:chart.axisX[i]._crosshairValue=null);else if("top"===this.parent._position)for(i=0;i<chart.axisX2.length;i++)this.parent===chart.axisX2[i]&&(value>=chart.axisX2[i].viewportMinimum&&value<=chart.axisX2[i].viewportMaximum?chart.axisX2[i]._crosshairValue=value:chart.axisX2[i]._crosshairValue=null);else if("left"===this.parent._position)for(i=0;i<chart.axisY.length;i++)this.parent===chart.axisY[i]&&(value>=chart.axisY[i].viewportMinimum&&value<=chart.axisY[i].viewportMaximum?chart.axisY[i]._crosshairValue=value:chart.axisY[i]._crosshairValue=null);else if("right"===this.parent._position)for(i=0;i<chart.axisY2.length;i++)this.parent===chart.axisY2[i]&&(value>=chart.axisY2[i].viewportMinimum&&value<=chart.axisY2[i].viewportMaximum?chart.axisY2[i]._crosshairValue=value:chart.axisY2[i]._crosshairValue=null);for(i=0;i<chart.axisX.length;i++){var crosshairValue=chart.axisX[i]._crosshairValue;chart.axisX[i].crosshair&&chart.axisX[i].crosshair.enabled&&!isNullOrUndefined(crosshairValue)&&crosshairValue>=chart.axisX[i].viewportMinimum&&crosshairValue<=chart.axisX[i].viewportMaximum&&(chart.axisX[i].showCrosshair(crosshairValue),chart.axisX[i].crosshair._updatedValue=crosshairValue,this===chart.axisX[i].crosshair&&(shown=!0))}for(i=0;i<chart.axisX2.length;i++){crosshairValue=chart.axisX2[i]._crosshairValue;chart.axisX2[i].crosshair&&chart.axisX2[i].crosshair.enabled&&!isNullOrUndefined(crosshairValue)&&crosshairValue>=chart.axisX2[i].viewportMinimum&&crosshairValue<=chart.axisX2[i].viewportMaximum&&(chart.axisX2[i].showCrosshair(crosshairValue),chart.axisX2[i].crosshair._updatedValue=crosshairValue,this===chart.axisX2[i].crosshair&&(shown=!0))}for(i=0;i<chart.axisY.length;i++){crosshairValue=chart.axisY[i]._crosshairValue;chart.axisY[i].crosshair&&chart.axisY[i].crosshair.enabled&&!isNullOrUndefined(crosshairValue)&&crosshairValue>=chart.axisY[i].viewportMinimum&&crosshairValue<=chart.axisY[i].viewportMaximum&&(chart.axisY[i].showCrosshair(crosshairValue),chart.axisY[i].crosshair._updatedValue=crosshairValue,this===chart.axisY[i].crosshair&&(shown=!0))}for(i=0;i<chart.axisY2.length;i++){crosshairValue=chart.axisY2[i]._crosshairValue;chart.axisY2[i].crosshair&&chart.axisY2[i].crosshair.enabled&&!isNullOrUndefined(crosshairValue)&&chart._crosshairY2Value>=chart.axisY2[i].viewportMinimum&&chart._crosshairY2Value<=chart.axisY2[i].viewportMaximum&&(chart.axisY2[i].showCrosshair(crosshairValue),chart.axisY2[i].crosshair._updatedValue=crosshairValue,this===chart.axisY2[i].crosshair&&(shown=!0))}return this.chart.toolTip&&this.chart.toolTip._entries&&this.chart.toolTip.highlightObjects(this.chart.toolTip._entries),shown},Crosshair.prototype.hide=function(){this.chart.resetOverlayedCanvas(),this.chart.renderCrosshairs(this.parent),this._hidden=!0},Crosshair.prototype.render=function(mouseX,mouseY,label){var x1,x2,y1,y2,stripX=null,stripY=null,textBlock=null,text="";if(!this.valueFormatString)if("dateTime"===this.parent.valueType)this.valueFormatString=this.parent.valueFormatString;else{var decimalsAt100=0;"xySwapped"===this.chart.plotInfo.axisPlacement?(decimalsAt100=this.parent.range>50?0:this.chart.width>500&&this.parent.range<25?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(this.parent.range<5?2:this.parent.range<10?1:0),this.valueFormatString=Axis.generateValueFormatString(this.parent.range,decimalsAt100)):(decimalsAt100=this.parent.range>50?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(this.parent.range<5?2:this.parent.range<10?1:0),this.valueFormatString=Axis.generateValueFormatString(this.parent.range,decimalsAt100))}var opacity=null===this.opacity?1:this.opacity,lineWidth=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),overlaidCanvasCtx=this.chart.overlaidCanvasCtx,oldGlobalAlpha=overlaidCanvasCtx.globalAlpha;if(overlaidCanvasCtx.globalAlpha=opacity,overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.strokeStyle=this.color,overlaidCanvasCtx.lineWidth=lineWidth,overlaidCanvasCtx.save(),this.labelFontSize=isNullOrUndefined(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize,this.labelMaxWidth=isNullOrUndefined(this.options.labelMaxWidth)?.3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=isNullOrUndefined(this.options.labelWrap)||this.labelWrap?.3*this.chart.height:2*this.labelFontSize,lineWidth>0&&overlaidCanvasCtx.setLineDash&&overlaidCanvasCtx.setLineDash(getLineDashArray(this.lineDashType,lineWidth)),textBlock=new TextBlock(overlaidCanvasCtx,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var x=0,nearbyEntries=[];if("xySwapped"===this.chart.plotInfo.axisPlacement){var entry=null;"bottom"===this.parent._position||"top"===this.parent._position?x=this.parent.dataSeries[0].axisX.convertPixelToValue({y:mouseY}):"left"!==this.parent._position&&"right"!==this.parent._position||(x=this.parent.convertPixelToValue({y:mouseY}));for(var i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(entry.dataSeries=this.parent.dataSeries[i],null!==entry.dataPoint.y&&entry.dataSeries.visible&&nearbyEntries.push(entry));if(entry=null,0===nearbyEntries.length)return;nearbyEntries.sort((function(entry1,entry2){return entry1.distance-entry2.distance}));var smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),index=0;if("rangeBar"===nearbyEntries[0].dataSeries.type||"error"===nearbyEntries[0].dataSeries.type){smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[index].dataPoint.y[0]));for(var currentDiff=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(var k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y)))<smallestDiff&&(smallestDiff=currentDiff,index=j)}else if("stackedBar"===nearbyEntries[0].dataSeries.type){smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0;var cumulativeY=0;for(index=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else cumulativeY+=nearbyEntries[j].dataPoint.y,(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(cumulativeY)))<smallestDiff&&(smallestDiff=currentDiff,index=j)}else if("stackedBar100"===nearbyEntries[0].dataSeries.type){smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0;var yPercent=0;for(j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else{cumulativeY+=nearbyEntries[j].dataPoint.y;var dataPointX=nearbyEntries[j].dataPoint.x.getTime?nearbyEntries[j].dataPoint.x.getTime():nearbyEntries[j].dataPoint.x;yPercent=cumulativeY/nearbyEntries[j].dataSeries.plotUnit.dataPointYSums[dataPointX]*100,(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(yPercent)))<smallestDiff&&(smallestDiff=currentDiff,index=j)}}else for(smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,index=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y)))<smallestDiff&&(smallestDiff=currentDiff,index=j);var closest=nearbyEntries[index];if("bottom"===this.parent._position||"top"===this.parent._position){var dpsIndex=0;if("rangeBar"===this.parent.dataSeries[index].type||"error"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(closest.dataPoint.y[0])),currentDiff=0,j=0;j<closest.dataPoint.y.length;j++)(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(closest.dataPoint.y[j])))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j);stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataPoint.y[dpsIndex])|0):this.parent.convertValueToPixel(closest.dataPoint.y[dpsIndex])|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.y[dpsIndex]}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y[dpsIndex],this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,j=index;j>=0;j--)cumulativeY+=nearbyEntries[j].dataPoint.y,(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(cumulativeY)))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j);stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(cumulativeY)|0):this.parent.convertValueToPixel(cumulativeY)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.y}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar100"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseX-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,yPercent=0,j=index;j>=0;j--){cumulativeY+=nearbyEntries[j].dataPoint.y;dataPointX=nearbyEntries[j].dataPoint.x.getTime?nearbyEntries[j].dataPoint.x.getTime():nearbyEntries[j].dataPoint.x;yPercent=cumulativeY/nearbyEntries[j].dataSeries.plotUnit.dataPointYSums[dataPointX]*100,(currentDiff=Math.abs(mouseX-this.parent.convertValueToPixel(yPercent)))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j)}stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(yPercent)|0):this.parent.convertValueToPixel(yPercent)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||yPercent}):isNullOrUndefined(this.options.label)?numberFormat(label||yPercent,this.valueFormatString,this.chart._cultureInfo):this.label}else stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataPoint.y)|0):this.parent.convertValueToPixel(closest.dataPoint.y)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.y}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label;x1=x2=stripX,y1=this.chart.plotArea.y1,y2=this.chart.plotArea.y2,this.bounds={x1:x1-lineWidth/2,y1,x2:x2+lineWidth/2,y2},textBlock.x=x1-textBlock.measureText().width/2,textBlock.x+textBlock.width>this.chart.bounds.x2?textBlock.x=this.chart.bounds.x2-textBlock.width:textBlock.x<this.chart.bounds.x1&&(textBlock.x=this.chart.bounds.x1),textBlock.y=this.parent.lineCoordinates.y2+textBlock.fontSize/2+2,textBlock.y+textBlock.height>this.chart.bounds.y2?textBlock.y=this.chart.bounds.y2-textBlock.height:textBlock.y<this.chart.bounds.y1&&(textBlock.y=this.chart.bounds.y1)}else if("left"===this.parent._position||"right"===this.parent._position){y1=y2=stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataPoint.x)|0):this.parent.convertValueToPixel(closest.dataPoint.x)|0,x1=this.chart.plotArea.x1,x2=this.chart.plotArea.x2,this.bounds={x1,y1:y1-lineWidth/2,x2,y2:y2+lineWidth/2};var hasAllLabels=!1;if(this.parent.labels){var tempInterval=Math.ceil(this.parent.interval);for(j=0;j<this.parent.viewportMaximum;j+=tempInterval){if(!this.parent.labels[j]){hasAllLabels=!1;break}hasAllLabels=!0}}if(hasAllLabels){if("axisX"===this.parent.type){x=this.parent.convertPixelToValue({y:mouseY});for(entry=null,i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:closest.dataPoint.x}):isNullOrUndefined(this.options.label)?entry.dataPoint.label:this.label)}}else"dateTime"===this.parent.valueType?textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.x}):isNullOrUndefined(this.options.label)?dateFormat(label||closest.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.x}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);textBlock.y=y2+textBlock.fontSize/2-textBlock.measureText().height/2+2,textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1?textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2+2:textBlock.y+textBlock.measureText().height-textBlock.fontSize/2>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.measureText().height+textBlock.fontSize/2),"left"===this.parent._position?textBlock.x=this.parent.lineCoordinates.x2-textBlock.measureText().width:"right"===this.parent._position&&(textBlock.x=this.parent.lineCoordinates.x2)}nearbyEntries=null}else{if("bottom"===this.parent._position||"top"===this.parent._position){x=this.parent.convertPixelToValue({x:mouseX});for(i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(entry.dataSeries=this.parent.dataSeries[i],null!==entry.dataPoint.y&&entry.dataSeries.visible&&nearbyEntries.push(entry));if(0===nearbyEntries.length)return;nearbyEntries.sort((function(entry1,entry2){return entry1.distance-entry2.distance}));closest=nearbyEntries[0];x1=x2=stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataPoint.x)|0):this.parent.convertValueToPixel(closest.dataPoint.x)|0,y1=this.chart.plotArea.y1,y2=this.chart.plotArea.y2,this.bounds={x1:x1-lineWidth/2,y1,x2:x2+lineWidth/2,y2};hasAllLabels=!1;if(this.parent.labels)for(tempInterval=Math.ceil(this.parent.interval),j=0;j<this.parent.viewportMaximum;j+=tempInterval){if(!this.parent.labels[j]){hasAllLabels=!1;break}hasAllLabels=!0}if(hasAllLabels){if("axisX"===this.parent.type){x=this.parent.convertPixelToValue({x:mouseX});for(entry=null,i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:closest.dataPoint.x}):isNullOrUndefined(this.options.label)?entry.dataPoint.label:this.label)}}else"dateTime"===this.parent.valueType?textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:closest.dataPoint.x}):isNullOrUndefined(this.options.label)?dateFormat(label||closest.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:closest.dataPoint.x}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);this.value=closest.dataPoint.x,textBlock.x=x1-textBlock.measureText().width/2,textBlock.x+textBlock.width>this.chart.bounds.x2&&(textBlock.x=this.chart.bounds.x2-textBlock.width),textBlock.x<this.chart.bounds.x1&&(textBlock.x=this.chart.bounds.x1),"bottom"===this.parent._position?textBlock.y=this.parent.lineCoordinates.y2+textBlock.fontSize/2+2:"top"===this.parent._position&&(textBlock.y=this.parent.lineCoordinates.y1-textBlock.height+textBlock.fontSize/2+2)}else if("left"===this.parent._position||"right"===this.parent._position){!isNullOrUndefined(this.parent.dataSeries)&&this.parent.dataSeries.length>0&&(x=this.parent.dataSeries[0].axisX.convertPixelToValue({x:mouseX}));for(i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(entry.dataSeries=this.parent.dataSeries[i],null!==entry.dataPoint.y&&entry.dataSeries.visible&&nearbyEntries.push(entry));if(0===nearbyEntries.length)return;nearbyEntries.sort((function(entry1,entry2){return entry1.distance-entry2.distance}));index=0;if("rangeColumn"===nearbyEntries[0].dataSeries.type||"rangeArea"===nearbyEntries[0].dataSeries.type||"error"===nearbyEntries[0].dataSeries.type||"rangeSplineArea"===nearbyEntries[0].dataSeries.type||"candlestick"===nearbyEntries[0].dataSeries.type||"ohlc"===nearbyEntries[0].dataSeries.type||"boxAndWhisker"===nearbyEntries[0].dataSeries.type)for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y[0])),currentDiff=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y)))<smallestDiff&&(smallestDiff=currentDiff,index=j);else if("stackedColumn"===nearbyEntries[0].dataSeries.type||"stackedArea"===nearbyEntries[0].dataSeries.type)for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else cumulativeY+=nearbyEntries[j].dataPoint.y,(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(cumulativeY)))<smallestDiff&&(smallestDiff=currentDiff,index=j);else if("stackedColumn100"===nearbyEntries[0].dataSeries.type||"stackedArea100"===nearbyEntries[0].dataSeries.type)for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,yPercent=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else{cumulativeY+=nearbyEntries[j].dataPoint.y;dataPointX=nearbyEntries[j].dataPoint.x.getTime?nearbyEntries[j].dataPoint.x.getTime():nearbyEntries[j].dataPoint.x;yPercent=cumulativeY/nearbyEntries[j].dataSeries.plotUnit.dataPointYSums[dataPointX]*100,(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(yPercent)))<smallestDiff&&(smallestDiff=currentDiff,index=j)}else for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,j=0;j<nearbyEntries.length;j++)if(nearbyEntries[j].dataPoint.y&&nearbyEntries[j].dataPoint.y.length)for(k=0;k<nearbyEntries[j].dataPoint.y.length;k++)(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y[k])))<smallestDiff&&(smallestDiff=currentDiff,index=j);else(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[j].dataPoint.y)))<smallestDiff&&(smallestDiff=currentDiff,index=j);closest=nearbyEntries[index],dpsIndex=0;if("rangeColumn"===this.parent.dataSeries[index].type||"rangeArea"===this.parent.dataSeries[index].type||"error"===this.parent.dataSeries[index].type||"rangeSplineArea"===this.parent.dataSeries[index].type||"candlestick"===this.parent.dataSeries[index].type||"ohlc"===this.parent.dataSeries[index].type||"boxAndWhisker"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(closest.dataPoint.y[0])),currentDiff=0,j=0;j<closest.dataPoint.y.length;j++)(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(closest.dataPoint.y[j])))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j);stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataPoint.y[dpsIndex])|0):this.parent.convertValueToPixel(closest.dataPoint.y[dpsIndex])|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.y[dpsIndex]}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y[dpsIndex],this.valueFormatString,this.chart._cultureInfo):this.label,this.value=closest.dataPoint.y[dpsIndex]}else if("stackedColumn"===this.parent.dataSeries[index].type||"stackedArea"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,j=index;j>=0;j--)cumulativeY+=nearbyEntries[j].dataPoint.y,(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(cumulativeY)))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j);stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(cumulativeY)|0):this.parent.convertValueToPixel(cumulativeY)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataPoint.y}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=cumulativeY}else if("stackedColumn100"===this.parent.dataSeries[index].type||"stackedArea100"===this.parent.dataSeries[index].type){for(smallestDiff=Math.abs(mouseY-this.parent.convertValueToPixel(nearbyEntries[0].dataPoint.y)),currentDiff=0,cumulativeY=0,j=index;j>=0;j--){cumulativeY+=nearbyEntries[j].dataPoint.y;dataPointX=nearbyEntries[j].dataPoint.x.getTime?nearbyEntries[j].dataPoint.x.getTime():nearbyEntries[j].dataPoint.x;yPercent=cumulativeY/nearbyEntries[j].dataSeries.plotUnit.dataPointYSums[dataPointX]*100,(currentDiff=Math.abs(mouseY-this.parent.convertValueToPixel(yPercent)))<smallestDiff&&(smallestDiff=currentDiff,dpsIndex=j)}stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(yPercent)|0):this.parent.convertValueToPixel(yPercent)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||yPercent}):isNullOrUndefined(this.options.label)?numberFormat(label||yPercent,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=yPercent}else"waterfall"===this.parent.dataSeries[index].type?(stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(this.parent.convertValueToPixel(closest.dataSeries.dataPointEOs[closest.index].cumulativeSum)|0):this.parent.convertValueToPixel(closest.dataSeries.dataPointEOs[closest.index].cumulativeSum)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||closest.dataSeries.dataPointEOs[closest.index].cumulativeSum}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataSeries.dataPointEOs[closest.index].cumulativeSum,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=closest.dataSeries.dataPointEOs[closest.index].cumulativeSum):(stripY=overlaidCanvasCtx.lineWidth%2==1?(isNullOrUndefined(mouseX)?mouseY:this.parent.convertValueToPixel(closest.dataPoint.y)|0)+.5:isNullOrUndefined(mouseX)?mouseY:this.parent.convertValueToPixel(closest.dataPoint.y)|0,textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:closest.dataPoint.y}):isNullOrUndefined(this.options.label)?numberFormat(label||closest.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=closest.dataPoint.y);y1=y2=stripY,x1=this.chart.plotArea.x1,x2=this.chart.plotArea.x2,this.bounds={x1,y1:y1-lineWidth/2,x2,y2:y2+lineWidth/2},textBlock.y=y2+textBlock.fontSize/2-textBlock.measureText().height/2+2,textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1?textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2+2:textBlock.y+textBlock.measureText().height-textBlock.fontSize/2>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.measureText().height+textBlock.fontSize/2),"left"===this.parent._position?textBlock.x=this.parent.lineCoordinates.x2-textBlock.measureText().width:"right"===this.parent._position&&(textBlock.x=this.parent.lineCoordinates.x2)}nearbyEntries=null}"bottom"!==this.parent._position&&"top"!==this.parent._position||("top"===this.parent._position&&textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1&&(textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2),"bottom"===this.parent._position&&this.parent.lineCoordinates.y2-textBlock.fontSize/2+textBlock.measureText().height>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.height+textBlock.fontSize/2+2),x1>=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMaximum:this.parent.viewportMinimum)&&x2<=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMinimum:this.parent.viewportMaximum)&&(lineWidth>0&&(overlaidCanvasCtx.moveTo(x1,y1),overlaidCanvasCtx.lineTo(x2,y2),overlaidCanvasCtx.stroke(),this._hidden=!1),overlaidCanvasCtx.restore(),!isNullOrUndefined(textBlock.text)&&("number"==typeof textBlock.text.valueOf()||textBlock.text.length>0)&&textBlock.render(!0))),"left"!==this.parent._position&&"right"!==this.parent._position||("left"===this.parent._position&&textBlock.x<this.chart.bounds.x1&&(textBlock.x=this.chart.bounds.x1),"right"===this.parent._position&&textBlock.x+textBlock.measureText().width>this.chart.bounds.x2&&(textBlock.x=this.chart.bounds.x2-textBlock.measureText().width),y2>=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMinimum:this.parent.viewportMaximum)&&y1<=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMaximum:this.parent.viewportMinimum)&&(lineWidth>0&&(overlaidCanvasCtx.moveTo(x1,y1),overlaidCanvasCtx.lineTo(x2,y2),overlaidCanvasCtx.stroke(),this._hidden=!1),overlaidCanvasCtx.restore(),!isNullOrUndefined(textBlock.text)&&("number"==typeof textBlock.text.valueOf()||textBlock.text.length>0)&&textBlock.render(!0)))}else{if("bottom"===this.parent._position||"top"===this.parent._position?(x1=x2=stripX=overlaidCanvasCtx.lineWidth%2==1?.5+(mouseX|0):mouseX|0,y1=this.chart.plotArea.y1,y2=this.chart.plotArea.y2,this.bounds={x1:x1-lineWidth/2,y1,x2:x2+lineWidth/2,y2}):"left"!==this.parent._position&&"right"!==this.parent._position||(y1=y2=stripY=overlaidCanvasCtx.lineWidth%2==1?.5+(mouseY|0):mouseY|0,x1=this.chart.plotArea.x1,x2=this.chart.plotArea.x2,this.bounds={x1,y1:y1-lineWidth/2,x2,y2:y2+lineWidth/2}),"xySwapped"===this.chart.plotInfo.axisPlacement)if("left"===this.parent._position||"right"===this.parent._position){hasAllLabels=!1;if(this.parent.labels)for(tempInterval=Math.ceil(this.parent.interval),j=0;j<this.parent.viewportMaximum;j+=tempInterval){if(!this.parent.labels[j]){hasAllLabels=!1;break}hasAllLabels=!0}if(hasAllLabels){if("axisX"===this.parent.type){x=this.parent.convertPixelToValue({y:mouseY});for(entry=null,i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseX)}):isNullOrUndefined(this.options.label)?entry.dataPoint.label:this.label)}}else"dateTime"===this.parent.valueType?textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseY)}):isNullOrUndefined(this.options.label)?dateFormat(label||this.parent.convertPixelToValue(mouseY),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseY)}):isNullOrUndefined(this.options.label)?numberFormat(label||this.parent.convertPixelToValue(mouseY),this.valueFormatString,this.chart._cultureInfo):this.label);textBlock.y=mouseY+textBlock.fontSize/2-textBlock.measureText().height/2+2,textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1?textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2+2:textBlock.y+textBlock.measureText().height-textBlock.fontSize/2>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.measureText().height+textBlock.fontSize/2),"left"===this.parent._position?textBlock.x=this.parent.lineCoordinates.x1-textBlock.measureText().width:"right"===this.parent._position&&(textBlock.x=this.parent.lineCoordinates.x2)}else"bottom"!==this.parent._position&&"top"!==this.parent._position||(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseX)}):isNullOrUndefined(this.options.label)?numberFormat(label||this.parent.convertPixelToValue(mouseX),this.valueFormatString,this.chart._cultureInfo):this.label,textBlock.x=x1-textBlock.measureText().width/2,textBlock.x+textBlock.width>this.chart.bounds.x2&&(textBlock.x=this.chart.bounds.x2-textBlock.width),textBlock.x<this.chart.bounds.x1&&(textBlock.x=this.chart.bounds.x1),"bottom"===this.parent._position?textBlock.y=this.parent.lineCoordinates.y2+textBlock.fontSize/2+2:"top"===this.parent._position&&(textBlock.y=this.parent.lineCoordinates.y1-textBlock.height+textBlock.fontSize/2+2));else if("bottom"===this.parent._position||"top"===this.parent._position){hasAllLabels=!1,text="";if(this.parent.labels)for(tempInterval=Math.ceil(this.parent.interval),j=0;j<this.parent.viewportMaximum;j+=tempInterval){if(!this.parent.labels[j]){hasAllLabels=!1;break}hasAllLabels=!0}if(hasAllLabels){if("axisX"===this.parent.type){x=this.parent.convertPixelToValue({x:mouseX});for(entry=null,i=0;i<this.parent.dataSeries.length;i++)(entry=this.parent.dataSeries[i].getDataPointAtX(x,!0))&&entry.index>=0&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseX)}):isNullOrUndefined(this.options.label)?label||entry.dataPoint.label:this.label)}}else"dateTime"===this.parent.valueType?textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseX)}):isNullOrUndefined(this.options.label)?dateFormat(label||this.parent.convertPixelToValue(mouseX),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||(this.parent.dataSeries.length>0?this.parent.convertPixelToValue(mouseX):"")}):isNullOrUndefined(this.options.label)?numberFormat(label||this.parent.convertPixelToValue(mouseX),this.valueFormatString,this.chart._cultureInfo):this.label);textBlock.x=x1-textBlock.measureText().width/2,textBlock.x+textBlock.width>this.chart.bounds.x2&&(textBlock.x=this.chart.bounds.x2-textBlock.width),textBlock.x<this.chart.bounds.x1&&(textBlock.x=this.chart.bounds.x1),"bottom"===this.parent._position?textBlock.y=this.parent.lineCoordinates.y2+textBlock.fontSize/2+2:"top"===this.parent._position&&(textBlock.y=this.parent.lineCoordinates.y1-textBlock.height+textBlock.fontSize/2+2)}else"left"!==this.parent._position&&"right"!==this.parent._position||(textBlock.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:label||this.parent.convertPixelToValue(mouseY)}):isNullOrUndefined(this.options.label)?numberFormat(label||this.parent.convertPixelToValue(mouseY),this.valueFormatString,this.chart._cultureInfo):this.label,textBlock.y=mouseY+textBlock.fontSize/2-textBlock.measureText().height/2+2,textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1?textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2+2:textBlock.y+textBlock.measureText().height-textBlock.fontSize/2>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.measureText().height+textBlock.fontSize/2),"left"===this.parent._position?textBlock.x=this.parent.lineCoordinates.x2-textBlock.measureText().width:"right"===this.parent._position&&(textBlock.x=this.parent.lineCoordinates.x2));"left"===this.parent._position&&textBlock.x<this.chart.bounds.x1?textBlock.x=this.chart.bounds.x1:"right"===this.parent._position&&textBlock.x+textBlock.measureText().width>this.chart.bounds.x2?textBlock.x=this.chart.bounds.x2-textBlock.measureText().width:"top"===this.parent._position&&textBlock.y-textBlock.fontSize/2<this.chart.bounds.y1?textBlock.y=this.chart.bounds.y1+textBlock.fontSize/2:"bottom"===this.parent._position&&this.parent.lineCoordinates.y2-textBlock.fontSize/2+textBlock.measureText().height>this.chart.bounds.y2&&(textBlock.y=this.chart.bounds.y2-textBlock.height+textBlock.fontSize/2+2),lineWidth>0&&(overlaidCanvasCtx.moveTo(x1,y1),overlaidCanvasCtx.lineTo(x2,y2),overlaidCanvasCtx.stroke(),this._hidden=!1),overlaidCanvasCtx.restore(),!isNullOrUndefined(textBlock.text)&&("number"==typeof textBlock.text.valueOf()||textBlock.text.length>0)&&textBlock.render(!0),"bottom"===this.parent._position||"top"===this.parent._position?this.value=this.parent.convertPixelToValue(mouseX):this.value=this.parent.convertPixelToValue(mouseY)}"bottom"!==this.parent._position&&"top"!==this.parent._position||(this._updatedValue=this.parent.convertPixelToValue(stripX)),"left"!==this.parent._position&&"right"!==this.parent._position||(this._updatedValue=this.parent.convertPixelToValue(stripY)),overlaidCanvasCtx.globalAlpha=oldGlobalAlpha},extend(ToolTip,CanvasJSObject),ToolTip.prototype._initialize=function(){if(this.updateOption("updated"),this.updateOption("hidden"),this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var toolTipHtml='<div style=" width: auto;';toolTipHtml+="height: auto;",toolTipHtml+="min-width: 50px;",toolTipHtml+="line-height: auto;",toolTipHtml+="margin: 0px 0px 0px 0px;",toolTipHtml+="padding: 5px;",toolTipHtml+="font-family: Calibri, Arial, Georgia, serif;",toolTipHtml+="font-weight: normal;",toolTipHtml+="font-style: "+(isCanvasSupported?"italic;":"normal;"),toolTipHtml+="font-size: 14px;",toolTipHtml+="color: #000000;",toolTipHtml+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",toolTipHtml+="text-align: left;",toolTipHtml+="border: 2px solid gray;",toolTipHtml+=isCanvasSupported?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",toolTipHtml+="text-indent: 0px;",toolTipHtml+="white-space: nowrap;",toolTipHtml+="border-radius: 5px;",toolTipHtml+="-moz-user-select:none;",toolTipHtml+="-khtml-user-select: none;",toolTipHtml+="-webkit-user-select: none;",toolTipHtml+="-ms-user-select: none;",toolTipHtml+="user-select: none;",isCanvasSupported||(toolTipHtml+="filter: alpha(opacity = 90);",toolTipHtml+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),toolTipHtml+='} "> Sample Tooltip</div>',this.container.innerHTML=toolTipHtml,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},ToolTip.prototype.mouseMoveHandler=function(x,y){this._lastUpdated&&(new Date).getTime()-this._lastUpdated<4||(this._lastUpdated=(new Date).getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(x,y))},ToolTip.prototype._updateToolTip=function(mouseX,mouseY,closest){if(closest=void 0===closest||closest,this.container||this._initialize(),this.enabled||(this.hide(),this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this)),!this.chart.disableToolTip){if(void 0===mouseX||void 0===mouseY){if(isNaN(this._prevX)||isNaN(this._prevY))return;mouseX=this._prevX,mouseY=this._prevY}else this._prevX=mouseX,this._prevY=mouseY;var toolTipBottom,dataPoint=null,dataSeries=null,entries=[],x=0;if(this.shared&&this.enabled&&"none"!==this.chart.plotInfo.axisPlacement){if("xySwapped"===this.chart.plotInfo.axisPlacement){var nearbyEntries=[];if(this.chart.axisX)for(var k=0;k<this.chart.axisX.length;k++){x=this.chart.axisX[k].convertPixelToValue({y:mouseY});for(var entry=null,i=0;i<this.chart.axisX[k].dataSeries.length;i++)(entry=this.chart.axisX[k].dataSeries[i].getDataPointAtX(x,closest))&&entry.index>=0&&(entry.dataSeries=this.chart.axisX[k].dataSeries[i],null!==entry.dataPoint.y&&nearbyEntries.push(entry));entry=null}if(this.chart.axisX2)for(k=0;k<this.chart.axisX2.length;k++){x=this.chart.axisX2[k].convertPixelToValue({y:mouseY});for(entry=null,i=0;i<this.chart.axisX2[k].dataSeries.length;i++)(entry=this.chart.axisX2[k].dataSeries[i].getDataPointAtX(x,closest))&&entry.index>=0&&(entry.dataSeries=this.chart.axisX2[k].dataSeries[i],null!==entry.dataPoint.y&&nearbyEntries.push(entry));entry=null}}else{nearbyEntries=[];if(this.chart.axisX)for(k=0;k<this.chart.axisX.length;k++){x=this.chart.axisX[k].convertPixelToValue({x:mouseX});for(entry=null,i=0;i<this.chart.axisX[k].dataSeries.length;i++)(entry=this.chart.axisX[k].dataSeries[i].getDataPointAtX(x,closest))&&entry.index>=0&&(entry.dataSeries=this.chart.axisX[k].dataSeries[i],null!==entry.dataPoint.y&&nearbyEntries.push(entry))}if(this.chart.axisX2)for(k=0;k<this.chart.axisX2.length;k++){x=this.chart.axisX2[k].convertPixelToValue({x:mouseX});for(entry=null,i=0;i<this.chart.axisX2[k].dataSeries.length;i++)(entry=this.chart.axisX2[k].dataSeries[i].getDataPointAtX(x,closest))&&entry.index>=0&&(entry.dataSeries=this.chart.axisX2[k].dataSeries[i],null!==entry.dataPoint.y&&nearbyEntries.push(entry))}}if(0===nearbyEntries.length)return;nearbyEntries.sort((function(entry1,entry2){return entry1.distance-entry2.distance}));closest=nearbyEntries[0];for(i=0;i<nearbyEntries.length;i++)nearbyEntries[i].dataPoint.x.valueOf()===closest.dataPoint.x.valueOf()&&entries.push(nearbyEntries[i]);nearbyEntries=null}else{var dataPointInfo=this.chart.getDataPointAtXY(mouseX,mouseY,closest);if(dataPointInfo)this.currentDataPointIndex=dataPointInfo.dataPointIndex,this.currentSeriesIndex=dataPointInfo.dataSeries.index;else if(isCanvasSupported){var id=getObjectId(mouseX,mouseY,this.chart._eventManager.ghostCtx);if(id>0&&void 0!==this.chart._eventManager.objectMap[id]){var eventObject=this.chart._eventManager.objectMap[id];if("legendItem"===eventObject.objectType)return;this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=eventObject.dataPointIndex>=0?eventObject.dataPointIndex:-1}else this.currentDataPointIndex=-1}else this.currentDataPointIndex=-1;if(this.currentSeriesIndex>=0){dataSeries=this.chart.data[this.currentSeriesIndex];entry={};if(this.currentDataPointIndex>=0)dataPoint=dataSeries.dataPoints[this.currentDataPointIndex],entry.dataSeries=dataSeries,entry.dataPoint=dataPoint,entry.index=this.currentDataPointIndex,entry.distance=Math.abs(dataPoint.x-x),"waterfall"===dataSeries.type&&(entry.cumulativeSumYStartValue=dataSeries.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,entry.cumulativeSum=dataSeries.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else{if(!this.enabled||"line"!==dataSeries.type&&"stepLine"!==dataSeries.type&&"spline"!==dataSeries.type&&"area"!==dataSeries.type&&"stepArea"!==dataSeries.type&&"splineArea"!==dataSeries.type&&"stackedArea"!==dataSeries.type&&"stackedArea100"!==dataSeries.type&&"rangeArea"!==dataSeries.type&&"rangeSplineArea"!==dataSeries.type&&"candlestick"!==dataSeries.type&&"ohlc"!==dataSeries.type&&"boxAndWhisker"!==dataSeries.type)return;x=dataSeries.axisX.convertPixelToValue({x:mouseX});isNullOrUndefined(entry=dataSeries.getDataPointAtX(x,closest))||(entry.dataSeries=dataSeries,this.currentDataPointIndex=entry.index,dataPoint=entry.dataPoint)}if(!isNullOrUndefined(entry)&&!isNullOrUndefined(entry.dataPoint)&&!isNullOrUndefined(entry.dataPoint.y))if(entry.dataSeries.axisY)if(entry.dataPoint.y.length>0){var unboundToViewport=0;for(i=0;i<entry.dataPoint.y.length;i++)entry.dataPoint.y[i]<entry.dataSeries.axisY.viewportMinimum?unboundToViewport--:entry.dataPoint.y[i]>entry.dataSeries.axisY.viewportMaximum&&unboundToViewport++;unboundToViewport<entry.dataPoint.y.length&&unboundToViewport>-entry.dataPoint.y.length&&entries.push(entry)}else if("column"===dataSeries.type||"bar"===dataSeries.type)entry.dataPoint.y<0?entry.dataSeries.axisY.viewportMinimum<0&&entry.dataSeries.axisY.viewportMaximum>=entry.dataPoint.y&&entries.push(entry):entry.dataSeries.axisY.viewportMinimum<=entry.dataPoint.y&&entry.dataSeries.axisY.viewportMaximum>=0&&entries.push(entry);else if("bubble"===dataSeries.type){var radius=this.chart._eventManager.objectMap[dataSeries.dataPointIds[entry.index]].size/2;entry.dataPoint.y>=entry.dataSeries.axisY.viewportMinimum-radius&&entry.dataPoint.y<=entry.dataSeries.axisY.viewportMaximum+radius&&entries.push(entry)}else if("waterfall"===dataSeries.type){unboundToViewport=0;entry.cumulativeSumYStartValue<entry.dataSeries.axisY.viewportMinimum?unboundToViewport--:entry.cumulativeSumYStartValue>entry.dataSeries.axisY.viewportMaximum&&unboundToViewport++,entry.cumulativeSum<entry.dataSeries.axisY.viewportMinimum?unboundToViewport--:entry.cumulativeSum>entry.dataSeries.axisY.viewportMaximum&&unboundToViewport++,unboundToViewport<2&&unboundToViewport>-2&&entries.push(entry)}else(entry.dataSeries.type.indexOf("100")>=0||"stackedColumn"===dataSeries.type||"stackedBar"===dataSeries.type||entry.dataPoint.y>=entry.dataSeries.axisY.viewportMinimum&&entry.dataPoint.y<=entry.dataSeries.axisY.viewportMaximum)&&entries.push(entry);else entries.push(entry)}}if(entries.length>0){if(this.highlightObjects(entries),this.enabled){var toolTipInnerHtml="";if(null!==(toolTipInnerHtml=this.getToolTipInnerHTML({entries}))){this.contentDiv.innerHTML=toolTipInnerHtml;var toolTipLeft,previouslyHidden=!1;"none"===this.container.style.display&&(previouslyHidden=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:isCanvasSupported?"rgba(255,255,255,.9)":"rgb(255,255,255)","waterfall"===entries[0].dataSeries.type?this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataPoint.color?entries[0].dataPoint.color:entries[0].dataPoint.y>0?entries[0].dataSeries.risingColor:entries[0].dataSeries.fallingColor:"error"===entries[0].dataSeries.type?this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataSeries.color?entries[0].dataSeries.color:entries[0].dataSeries._colorSet[dataSeries.index%entries[0].dataSeries._colorSet.length]:this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataPoint.color?entries[0].dataPoint.color:entries[0].dataSeries.color?entries[0].dataSeries.color:entries[0].dataSeries._colorSet[entries[0].index%entries[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:isCanvasSupported?"italic":"normal"}catch(e){}"pie"===entries[0].dataSeries.type||"doughnut"===entries[0].dataSeries.type||"funnel"===entries[0].dataSeries.type||"pyramid"===entries[0].dataSeries.type||"bar"===entries[0].dataSeries.type||"rangeBar"===entries[0].dataSeries.type||"stackedBar"===entries[0].dataSeries.type||"stackedBar100"===entries[0].dataSeries.type?toolTipLeft=mouseX-10-this.container.clientWidth:(toolTipLeft=entries[0].dataSeries.axisX.convertValueToPixel(entries[0].dataPoint.x)-this.container.clientWidth|0,toolTipLeft-=10),toolTipLeft<0&&(toolTipLeft+=this.container.clientWidth+20),toolTipLeft+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(toolTipLeft=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),(toolTipBottom=10-(toolTipBottom=1!==entries.length||this.shared||"line"!==entries[0].dataSeries.type&&"stepLine"!==entries[0].dataSeries.type&&"spline"!==entries[0].dataSeries.type&&"area"!==entries[0].dataSeries.type&&"stepArea"!==entries[0].dataSeries.type&&"splineArea"!==entries[0].dataSeries.type?"bar"===entries[0].dataSeries.type||"rangeBar"===entries[0].dataSeries.type||"stackedBar"===entries[0].dataSeries.type||"stackedBar100"===entries[0].dataSeries.type?entries[0].dataSeries.axisX.convertValueToPixel(entries[0].dataPoint.x):mouseY:entries[0].dataSeries.axisY.convertValueToPixel(entries[0].dataPoint.y)))+this.container.clientHeight+5>0&&(toolTipBottom-=toolTipBottom+this.container.clientHeight+5-0),this.fixMozTransitionDelay(toolTipLeft,toolTipBottom),!this.animationEnabled||previouslyHidden?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.positionLeft=toolTipLeft,this.positionBottom=toolTipBottom,this.container.style.left=toolTipLeft+"px",this.container.style.bottom=toolTipBottom+"px"}else this.hide(!1),this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this)}var paramEntries=[];for(i=0;i<entries.length;i++)paramEntries.push({xValue:entries[i].dataPoint.x,dataPoint:entries[i].dataPoint,dataSeries:entries[i].dataSeries,dataPointIndex:entries[i].index,dataSeriesIndex:entries[i].dataSeries._index});var parameters={chart:this.chart,toolTip:this.options,content:toolTipInnerHtml,entries:paramEntries};this._entries=entries,this.dispatchEvent("updated",parameters,this)}else this.hide()}},ToolTip.prototype.highlightObjects=function(entries){var overlaidCanvasCtx=this.chart.overlaidCanvasCtx;(isNullOrUndefined(this.chart.clearedOverlayedCanvas)||"toolTip"===this.chart.clearedOverlayedCanvas)&&(this.chart.resetOverlayedCanvas(),overlaidCanvasCtx.clearRect(0,0,this.chart.width,this.chart.height),this.chart.clearedOverlayedCanvas="toolTip"),overlaidCanvasCtx.save();var plotArea=this.chart.plotArea,offset=0;overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.rect(plotArea.x1,plotArea.y1,plotArea.x2-plotArea.x1,plotArea.y2-plotArea.y1),overlaidCanvasCtx.clip();for(var i=0;i<entries.length;i++){var entry=entries[i],eventObject=this.chart._eventManager.objectMap[entry.dataSeries.dataPointIds[entry.index]];if(eventObject&&eventObject.objectType&&"dataPoint"===eventObject.objectType){var dataSeries=this.chart.data[eventObject.dataSeriesIndex],dataPoint=dataSeries.dataPoints[eventObject.dataPointIndex],index=eventObject.dataPointIndex;if(!1!==dataPoint.highlightEnabled&&(!0===dataSeries.highlightEnabled||!0===dataPoint.highlightEnabled))if("line"===dataSeries.type||"stepLine"===dataSeries.type||"spline"===dataSeries.type||"scatter"===dataSeries.type||"area"===dataSeries.type||"stepArea"===dataSeries.type||"splineArea"===dataSeries.type||"stackedArea"===dataSeries.type||"stackedArea100"===dataSeries.type||"rangeArea"===dataSeries.type||"rangeSplineArea"===dataSeries.type){if((markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y1,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*markerProps.size|0,10),markerProps.borderColor=markerProps.borderColor||"#FFFFFF",markerProps.borderThickness=markerProps.borderThickness||Math.ceil(.1*markerProps.size),RenderHelper.drawMarkers([markerProps]),void 0!==eventObject.y2)(markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y2,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*markerProps.size|0,10),markerProps.borderColor=markerProps.borderColor||"#FFFFFF",markerProps.borderThickness=markerProps.borderThickness||Math.ceil(.1*markerProps.size),RenderHelper.drawMarkers([markerProps])}else if("bubble"===dataSeries.type){var markerProps;(markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y1,this.chart.overlaidCanvasCtx)).size=eventObject.size,markerProps.color="white",markerProps.borderColor="white",overlaidCanvasCtx.globalAlpha=.3,RenderHelper.drawMarkers([markerProps]),overlaidCanvasCtx.globalAlpha=1}else"column"===dataSeries.type||"stackedColumn"===dataSeries.type||"stackedColumn100"===dataSeries.type||"bar"===dataSeries.type||"rangeBar"===dataSeries.type||"stackedBar"===dataSeries.type||"stackedBar100"===dataSeries.type||"rangeColumn"===dataSeries.type||"waterfall"===dataSeries.type?drawRect(overlaidCanvasCtx,eventObject.x1,eventObject.y1,eventObject.x2,eventObject.y2,"white",0,null,!1,!1,!1,!1,.3):"pie"===dataSeries.type||"doughnut"===dataSeries.type?drawSegment(overlaidCanvasCtx,eventObject.center,eventObject.radius,"white",dataSeries.type,eventObject.startAngle,eventObject.endAngle,.3,eventObject.percentInnerRadius):"funnel"===dataSeries.type||"pyramid"===dataSeries.type?drawSectionOfFunnel(overlaidCanvasCtx,eventObject.funnelSection,.3,"white"):"candlestick"===dataSeries.type?(overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.strokeStyle=eventObject.color,overlaidCanvasCtx.lineWidth=2*eventObject.borderThickness,offset=overlaidCanvasCtx.lineWidth%2==0?0:.5,overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3-offset,Math.min(eventObject.y2,eventObject.y3)),overlaidCanvasCtx.lineTo(eventObject.x3-offset,Math.min(eventObject.y1,eventObject.y4)),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3-offset,Math.max(eventObject.y1,eventObject.y4)),overlaidCanvasCtx.lineTo(eventObject.x3-offset,Math.max(eventObject.y2,eventObject.y3)),overlaidCanvasCtx.stroke(),drawRect(overlaidCanvasCtx,eventObject.x1,Math.min(eventObject.y1,eventObject.y4),eventObject.x2,Math.max(eventObject.y1,eventObject.y4),"transparent",2*eventObject.borderThickness,eventObject.color,!1,!1,!1,!1),overlaidCanvasCtx.globalAlpha=1):"ohlc"===dataSeries.type?(overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.strokeStyle=eventObject.color,overlaidCanvasCtx.lineWidth=2*eventObject.borderThickness,offset=overlaidCanvasCtx.lineWidth%2==0?0:.5,overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3-offset,eventObject.y2),overlaidCanvasCtx.lineTo(eventObject.x3-offset,eventObject.y3),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y1),overlaidCanvasCtx.lineTo(eventObject.x1,eventObject.y1),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y4),overlaidCanvasCtx.lineTo(eventObject.x2,eventObject.y4),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.globalAlpha=1):"boxAndWhisker"===dataSeries.type?(overlaidCanvasCtx.save(),overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.strokeStyle=eventObject.stemColor,overlaidCanvasCtx.lineWidth=2*eventObject.stemThickness,eventObject.stemThickness>0&&(overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y2+eventObject.borderThickness/2),overlaidCanvasCtx.lineTo(eventObject.x3,eventObject.y1+eventObject.whiskerThickness/2),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y4-eventObject.whiskerThickness/2),overlaidCanvasCtx.lineTo(eventObject.x3,eventObject.y3-eventObject.borderThickness/2),overlaidCanvasCtx.stroke()),overlaidCanvasCtx.beginPath(),drawRect(overlaidCanvasCtx,eventObject.x1-eventObject.borderThickness/2,Math.max(eventObject.y2+eventObject.borderThickness/2,eventObject.y3+eventObject.borderThickness/2),eventObject.x2+eventObject.borderThickness/2,Math.min(eventObject.y2-eventObject.borderThickness/2,eventObject.y3-eventObject.borderThickness/2),"transparent",eventObject.borderThickness,eventObject.color,!1,!1,!1,!1),overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.strokeStyle=eventObject.whiskerColor,overlaidCanvasCtx.lineWidth=2*eventObject.whiskerThickness,eventObject.whiskerThickness>0&&(overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(Math.floor(eventObject.x3-eventObject.whiskerLength/2),eventObject.y4),overlaidCanvasCtx.lineTo(Math.ceil(eventObject.x3+eventObject.whiskerLength/2),eventObject.y4),overlaidCanvasCtx.stroke(),overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(Math.floor(eventObject.x3-eventObject.whiskerLength/2),eventObject.y1),overlaidCanvasCtx.lineTo(Math.ceil(eventObject.x3+eventObject.whiskerLength/2),eventObject.y1),overlaidCanvasCtx.stroke()),overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.strokeStyle=eventObject.lineColor,overlaidCanvasCtx.lineWidth=2*eventObject.lineThickness,eventObject.lineThickness>0&&(overlaidCanvasCtx.beginPath(),overlaidCanvasCtx.moveTo(eventObject.x1,eventObject.y5),overlaidCanvasCtx.lineTo(eventObject.x2,eventObject.y5),overlaidCanvasCtx.stroke()),overlaidCanvasCtx.restore(),overlaidCanvasCtx.globalAlpha=1):"error"===dataSeries.type&&drawErrorLines(overlaidCanvasCtx,eventObject.x1,eventObject.y1,eventObject.x2,eventObject.y2,"white",eventObject.whiskerProperties,eventObject.stemProperties,eventObject.isXYSwapped,.3)}}overlaidCanvasCtx.restore(),overlaidCanvasCtx.globalAlpha=1,overlaidCanvasCtx.beginPath()},ToolTip.prototype.getToolTipInnerHTML=function(e){for(var entries=e.entries,toolTipInnerHtml=null,dataSeries=null,dataPoint=null,index=0,toolTipContent="",isToolTipDefinedInData=!0,i=0;i<entries.length;i++)if(entries[i].dataSeries.toolTipContent||entries[i].dataPoint.toolTipContent){isToolTipDefinedInData=!1;break}if(isToolTipDefinedInData&&(this.content&&"function"==typeof this.content||this.contentFormatter)){var param={chart:this.chart,toolTip:this.options,entries};toolTipInnerHtml=this.contentFormatter?this.contentFormatter(param):this.content(param)}else if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){var prevDataSeriesXIndex=null,toolTipInnerHtmlPrefix="";for(i=0;i<entries.length;i++)dataSeries=entries[i].dataSeries,dataPoint=entries[i].dataPoint,index=entries[i].index,toolTipContent="",0===i&&isToolTipDefinedInData&&!this.content&&(this.chart.axisX&&this.chart.axisX.length>0?toolTipInnerHtmlPrefix+=void 0!==this.chart.axisX[0].labels[dataPoint.x]?this.chart.axisX[0].labels[dataPoint.x]:"{x}":this.chart.axisX2&&this.chart.axisX2.length>0&&(toolTipInnerHtmlPrefix+=void 0!==this.chart.axisX2[0].labels[dataPoint.x]?this.chart.axisX2[0].labels[dataPoint.x]:"{x}"),toolTipInnerHtmlPrefix+="</br>",toolTipInnerHtmlPrefix=this.chart.replaceKeywordsWithValue(toolTipInnerHtmlPrefix,dataPoint,dataSeries,index)),null===dataPoint.toolTipContent||void 0===dataPoint.toolTipContent&&null===dataSeries.options.toolTipContent||("line"===dataSeries.type||"stepLine"===dataSeries.type||"spline"===dataSeries.type||"area"===dataSeries.type||"stepArea"===dataSeries.type||"splineArea"===dataSeries.type||"column"===dataSeries.type||"bar"===dataSeries.type||"scatter"===dataSeries.type||"stackedColumn"===dataSeries.type||"stackedColumn100"===dataSeries.type||"stackedBar"===dataSeries.type||"stackedBar100"===dataSeries.type||"stackedArea"===dataSeries.type||"stackedArea100"===dataSeries.type||"waterfall"===dataSeries.type?(this.chart.axisX&&this.chart.axisX.length>1&&(toolTipContent+=prevDataSeriesXIndex!=dataSeries.axisXIndex?dataSeries.axisX.title?dataSeries.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}",prevDataSeriesXIndex=dataSeries.axisXIndex):"bubble"===dataSeries.type?(this.chart.axisX&&this.chart.axisX.length>1&&(toolTipContent+=prevDataSeriesXIndex!=dataSeries.axisXIndex?dataSeries.axisX.title?dataSeries.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}"):"rangeColumn"===dataSeries.type||"rangeBar"===dataSeries.type||"rangeArea"===dataSeries.type||"rangeSplineArea"===dataSeries.type||"error"===dataSeries.type?(this.chart.axisX&&this.chart.axisX.length>1&&(toolTipContent+=prevDataSeriesXIndex!=dataSeries.axisXIndex?dataSeries.axisX.title?dataSeries.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}"):"candlestick"===dataSeries.type||"ohlc"===dataSeries.type?(this.chart.axisX&&this.chart.axisX.length>1&&(toolTipContent+=prevDataSeriesXIndex!=dataSeries.axisXIndex?dataSeries.axisX.title?dataSeries.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"):"boxAndWhisker"===dataSeries.type&&(this.chart.axisX&&this.chart.axisX.length>1&&(toolTipContent+=prevDataSeriesXIndex!=dataSeries.axisXIndex?dataSeries.axisX.title?dataSeries.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===toolTipInnerHtml&&(toolTipInnerHtml=""),!0===this.reversed?(toolTipInnerHtml=this.chart.replaceKeywordsWithValue(toolTipContent,dataPoint,dataSeries,index)+toolTipInnerHtml,i<entries.length-1&&(toolTipInnerHtml="</br>"+toolTipInnerHtml)):(toolTipInnerHtml+=this.chart.replaceKeywordsWithValue(toolTipContent,dataPoint,dataSeries,index),i<entries.length-1&&(toolTipInnerHtml+="</br>")));null!==toolTipInnerHtml&&(toolTipInnerHtml=toolTipInnerHtmlPrefix+toolTipInnerHtml)}else{if(dataSeries=entries[0].dataSeries,dataPoint=entries[0].dataPoint,index=entries[0].index,null===dataPoint.toolTipContent||void 0===dataPoint.toolTipContent&&null===dataSeries.options.toolTipContent)return null;"line"===dataSeries.type||"stepLine"===dataSeries.type||"spline"===dataSeries.type||"area"===dataSeries.type||"stepArea"===dataSeries.type||"splineArea"===dataSeries.type||"column"===dataSeries.type||"bar"===dataSeries.type||"scatter"===dataSeries.type||"stackedColumn"===dataSeries.type||"stackedColumn100"===dataSeries.type||"stackedBar"===dataSeries.type||"stackedBar100"===dataSeries.type||"stackedArea"===dataSeries.type||"stackedArea100"===dataSeries.type||"waterfall"===dataSeries.type?toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":"bubble"===dataSeries.type?toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"===dataSeries.type||"doughnut"===dataSeries.type||"funnel"===dataSeries.type||"pyramid"===dataSeries.type?toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.name?"{name}:</span>&nbsp;&nbsp;":dataPoint.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":"rangeColumn"===dataSeries.type||"rangeBar"===dataSeries.type||"rangeArea"===dataSeries.type||"rangeSplineArea"===dataSeries.type||"error"===dataSeries.type?toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":"candlestick"===dataSeries.type||"ohlc"===dataSeries.type?toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":"boxAndWhisker"===dataSeries.type&&(toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(dataPoint.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===toolTipInnerHtml&&(toolTipInnerHtml=""),toolTipInnerHtml+=this.chart.replaceKeywordsWithValue(toolTipContent,dataPoint,dataSeries,index)}return toolTipInnerHtml},ToolTip.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var containerTransition=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=containerTransition,this.container.style.MsTransition=containerTransition,this.container.style.transition=containerTransition,this.container.style.MozTransition=this.mozContainerTransition}},ToolTip.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},ToolTip.prototype.hide=function(resetOverlayedCanvas){this.container&&(resetOverlayedCanvas=void 0===resetOverlayedCanvas||resetOverlayedCanvas,this.container.style.display="none",this.currentSeriesIndex=-1,this._prevX=NaN,this._prevY=NaN,resetOverlayedCanvas&&this.chart.resetOverlayedCanvas())},ToolTip.prototype.show=function(px,py,closest){closest=void 0!==closest&&closest,this._updateToolTip(px,py,closest)},ToolTip.prototype.showAtIndex=function(dataPointIndex,dataSeriesIndex){},ToolTip.prototype.showAtX=function(xValue,dataSeriesIndex){if(!this.enabled)return!1;var dataSeries,valueOutsideViewport;this.chart.clearedOverlayedCanvas=null;var entries=[];if(valueOutsideViewport=!1,dataSeriesIndex=!isNullOrUndefined(dataSeriesIndex)&&dataSeriesIndex>=0&&dataSeriesIndex<this.chart.data.length?dataSeriesIndex:0,this.shared)for(var i=0;i<this.chart.data.length;i++)(entry=(dataSeries=this.chart.data[i]).getDataPointAtX(xValue,!1))&&entry.dataPoint&&!isNullOrUndefined(entry.dataPoint.y)&&dataSeries.visible&&(entry.dataSeries=dataSeries,entries.push(entry));else(entry=(dataSeries=this.chart.data[dataSeriesIndex]).getDataPointAtX(xValue,!1))&&entry.dataPoint&&!isNullOrUndefined(entry.dataPoint.y)&&dataSeries.visible&&(entry.dataSeries=dataSeries,entries.push(entry));if(!(entries.length>0))return this.hide(),!1;for(i=0;i<entries.length;i++){var entry;if(!((entry=entries[i]).dataPoint.x<entry.dataSeries.axisX.viewportMinimum||entry.dataPoint.x>entry.dataSeries.axisX.viewportMaximum||entry.dataPoint.y<entry.dataSeries.axisY.viewportMinimum||entry.dataPoint.y>entry.dataSeries.axisY.viewportMaximum)){valueOutsideViewport=!1;break}valueOutsideViewport=!0}if(valueOutsideViewport)return this.hide(),!1;this.highlightObjects(entries),this._entries=entries;var toolTipInnerHtml;if(null===(toolTipInnerHtml=this.getToolTipInnerHTML({entries})))return this.hide(!1),!1;this.contentDiv.innerHTML=toolTipInnerHtml;var toolTipLeft,toolTipBottom,previouslyHidden=!1;"none"===this.container.style.display&&(previouslyHidden=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:isCanvasSupported?"rgba(255,255,255,.9)":"rgb(255,255,255)","waterfall"===entries[0].dataSeries.type?this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataPoint.color?entries[0].dataPoint.color:entries[0].dataPoint.y>0?entries[0].dataSeries.risingColor:entries[0].dataSeries.fallingColor:"error"===entries[0].dataSeries.type?this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataSeries.color?entries[0].dataSeries.color:entries[0].dataSeries._colorSet[dataSeries.index%entries[0].dataSeries._colorSet.length]:this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:entries[0].dataPoint.color?entries[0].dataPoint.color:entries[0].dataSeries.color?entries[0].dataSeries.color:entries[0].dataSeries._colorSet[entries[0].index%entries[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:isCanvasSupported?"italic":"normal"}catch(e){}return"pie"===entries[0].dataSeries.type||"doughnut"===entries[0].dataSeries.type||"funnel"===entries[0].dataSeries.type||"pyramid"===entries[0].dataSeries.type?toolTipLeft=mouseX-10-this.container.clientWidth:"bar"===entries[0].dataSeries.type||"rangeBar"===entries[0].dataSeries.type||"stackedBar"===entries[0].dataSeries.type||"stackedBar100"===entries[0].dataSeries.type?(toolTipLeft=entries[0].dataSeries.axisY.convertValueToPixel(entries[0].dataPoint.y)-this.container.clientWidth|0,toolTipLeft-=10):(toolTipLeft=entries[0].dataSeries.axisX.convertValueToPixel(entries[0].dataPoint.x)-this.container.clientWidth|0,toolTipLeft-=10),toolTipLeft<0&&(toolTipLeft+=this.container.clientWidth+20),toolTipLeft+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(toolTipLeft=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),(toolTipBottom=10-(toolTipBottom=(1!==entries.length||this.shared||"line"!==entries[0].dataSeries.type&&"stepLine"!==entries[0].dataSeries.type&&"spline"!==entries[0].dataSeries.type&&"area"!==entries[0].dataSeries.type&&"stepArea"!==entries[0].dataSeries.type&&"splineArea"!==entries[0].dataSeries.type)&&("bar"===entries[0].dataSeries.type||"rangeBar"===entries[0].dataSeries.type||"stackedBar"===entries[0].dataSeries.type||"stackedBar100"===entries[0].dataSeries.type)?entries[0].dataSeries.axisX.convertValueToPixel(entries[0].dataPoint.x):entries[0].dataSeries.axisY.convertValueToPixel(entries[0].dataPoint.y)))+this.container.clientHeight+5>0&&(toolTipBottom-=toolTipBottom+this.container.clientHeight+5-0),this.fixMozTransitionDelay(toolTipLeft,toolTipBottom),!this.animationEnabled||previouslyHidden?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=toolTipLeft+"px",this.container.style.bottom=toolTipBottom+"px",!0},ToolTip.prototype.fixMozTransitionDelay=function(left,bottom){if(this.chart._eventManager.lastObjectId>20)this.mozContainerTransition=this.getContainerTransition(0);else{var prevLeft=parseFloat(this.container.style.left),prevBottom=(prevLeft=isNaN(prevLeft)?0:prevLeft,parseFloat(this.container.style.bottom)),updateDistance=(prevBottom=isNaN(prevBottom)?0:prevBottom,Math.sqrt(Math.pow(prevLeft-left,2)+Math.pow(prevBottom-bottom,2)));this.mozContainerTransition=updateDistance>10?this.getContainerTransition(.1):this.getContainerTransition(0)}},ToolTip.prototype.getContainerTransition=function(duration){return"left "+duration+"s ease-out 0s, bottom "+duration+"s ease-out 0s"},EventManager.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],isCanvasSupported&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},EventManager.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},EventManager.prototype.mouseEventHandler=function(ev){if("mousemove"===ev.type||"click"===ev.type){var id,eventObjectMaps=[],xy=getMouseCoordinates(ev);if((id=this.chart.getObjectAtXY(xy.x,xy.y,!1))&&void 0!==this.objectMap[id]){var eventObjectMap=this.objectMap[id];if("dataPoint"===eventObjectMap.objectType){var dataPoint=(dataSeries=this.chart.data[eventObjectMap.dataSeriesIndex]).dataPoints[eventObjectMap.dataPointIndex],dataPointIndex=eventObjectMap.dataPointIndex;eventObjectMap.eventParameter={x:xy.x,y:xy.y,dataPoint,dataSeries:dataSeries.options,dataPointIndex,dataSeriesIndex:dataSeries.index,chart:this.chart},eventObjectMap.eventContext={context:dataPoint,userContext:dataPoint,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},eventObjectMaps.push(eventObjectMap),(eventObjectMap=this.objectMap[dataSeries.id]).eventParameter={x:xy.x,y:xy.y,dataPoint,dataSeries:dataSeries.options,dataPointIndex,dataSeriesIndex:dataSeries.index,chart:this.chart},eventObjectMap.eventContext={context:dataSeries,userContext:dataSeries.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},eventObjectMaps.push(this.objectMap[dataSeries.id])}else if("legendItem"===eventObjectMap.objectType){var dataSeries=this.chart.data[eventObjectMap.dataSeriesIndex];dataPoint=null!==eventObjectMap.dataPointIndex?dataSeries.dataPoints[eventObjectMap.dataPointIndex]:null;eventObjectMap.eventParameter={x:xy.x,y:xy.y,dataSeries:dataSeries.options,dataPoint,dataPointIndex:eventObjectMap.dataPointIndex,dataSeriesIndex:eventObjectMap.dataSeriesIndex,chart:this.chart},eventObjectMap.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},eventObjectMaps.push(eventObjectMap)}}for(var mouseOutObjectMapsExcluded=[],i=0;i<this.mouseoveredObjectMaps.length;i++){for(var mouseOut=!0,j=0;j<eventObjectMaps.length;j++)if(eventObjectMaps[j].id===this.mouseoveredObjectMaps[i].id){mouseOut=!1;break}mouseOut?this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",ev):mouseOutObjectMapsExcluded.push(this.mouseoveredObjectMaps[i])}this.mouseoveredObjectMaps=mouseOutObjectMapsExcluded;for(i=0;i<eventObjectMaps.length;i++){var existing=!1;for(j=0;j<this.mouseoveredObjectMaps.length;j++)if(eventObjectMaps[i].id===this.mouseoveredObjectMaps[j].id){existing=!0;break}existing||(this.fireEvent(eventObjectMaps[i],"mouseover",ev),this.mouseoveredObjectMaps.push(eventObjectMaps[i])),"click"===ev.type?this.fireEvent(eventObjectMaps[i],"click",ev):"mousemove"===ev.type&&this.fireEvent(eventObjectMaps[i],"mousemove",ev)}}},EventManager.prototype.fireEvent=function(eventObjectMap,eventType,ev){if(eventObjectMap&&eventType){var eventParameter=eventObjectMap.eventParameter,eventContext=eventObjectMap.eventContext,userContext=eventObjectMap.eventContext.userContext;userContext&&eventContext&&userContext[eventContext[eventType]]&&userContext[eventContext[eventType]].call(userContext,eventParameter),"mouseout"!==eventType?userContext.cursor&&userContext.cursor!==ev.target.style.cursor&&(ev.target.style.cursor=userContext.cursor):(ev.target.style.cursor=this.chart._defaultCursor,delete eventObjectMap.eventParameter,delete eventObjectMap.eventContext),"click"===eventType&&"dataPoint"===eventObjectMap.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[eventObjectMap.dataSeriesIndex],eventParameter),"click"===eventType&&"dataPoint"===eventObjectMap.objectType&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[eventObjectMap.dataSeriesIndex],eventParameter)}},Animator.prototype.animate=function(startDelay,duration,animationCallback,onComplete,easingFunction){var _this=this;this.chart.isAnimating=!0,easingFunction=easingFunction||AnimationHelper.easing.linear,animationCallback&&this.animations.push({startTime:(new Date).getTime()+(startDelay||0),duration,animationCallback,onComplete});for(var remainingAnimations=[];this.animations.length>0;){var animation=this.animations.shift(),now=(new Date).getTime(),fractionComplete=0;animation.startTime<=now&&(fractionComplete=easingFunction(Math.min(now-animation.startTime,animation.duration),0,1,animation.duration),fractionComplete=Math.min(fractionComplete,1),!isNaN(fractionComplete)&&isFinite(fractionComplete)||(fractionComplete=1)),fractionComplete<1&&remainingAnimations.push(animation),animation.animationCallback(fractionComplete),fractionComplete>=1&&animation.onComplete&&animation.onComplete()}this.animations=remainingAnimations,this.animations.length>0?this.animationRequestId=this.chart.requestAnimFrame.call(window,(function(){_this.animate.call(_this)})):this.chart.isAnimating=!1},Animator.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var AnimationHelper={yScaleAnimation:function(fractionComplete,animationInfo){if(0!==fractionComplete){var ctx=animationInfo.dest,sourceCanvas=animationInfo.source.canvas,base=animationInfo.animationBase,offsetY=base-base*fractionComplete;ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,0,offsetY,ctx.canvas.width/devicePixelBackingStoreRatio,fractionComplete*ctx.canvas.height/devicePixelBackingStoreRatio)}},xScaleAnimation:function(fractionComplete,animationInfo){if(0!==fractionComplete){var ctx=animationInfo.dest,sourceCanvas=animationInfo.source.canvas,base=animationInfo.animationBase,offsetX=base-base*fractionComplete;ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,offsetX,0,fractionComplete*ctx.canvas.width/devicePixelBackingStoreRatio,ctx.canvas.height/devicePixelBackingStoreRatio)}},xClipAnimation:function(fractionComplete,animationInfo){if(0!==fractionComplete){var ctx=animationInfo.dest,sourceCanvas=animationInfo.source.canvas;ctx.save(),fractionComplete>0&&ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width*fractionComplete,sourceCanvas.height,0,0,sourceCanvas.width*fractionComplete/devicePixelBackingStoreRatio,sourceCanvas.height/devicePixelBackingStoreRatio),ctx.restore()}},fadeInAnimation:function(fractionComplete,animationInfo){if(0!==fractionComplete){var ctx=animationInfo.dest,sourceCanvas=animationInfo.source.canvas;ctx.save(),ctx.globalAlpha=fractionComplete,ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,0,0,ctx.canvas.width/devicePixelBackingStoreRatio,ctx.canvas.height/devicePixelBackingStoreRatio),ctx.restore()}},easing:{linear:function(t,b,c,d){return c*t/d+b},easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeOutQuart:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},easeInQuart:function(t,b,c,d){return c*(t/=d)*t*t*t+b}}},RenderHelper={drawMarker:function(x,y,ctx,markerType,markerSize,markerColor,markerBorderColor,markerBorderThickness){if(ctx){var alpha=1;ctx.fillStyle=markerColor||"#000000",ctx.strokeStyle=markerBorderColor||"#000000",ctx.lineWidth=markerBorderThickness||0,ctx.setLineDash&&ctx.setLineDash(getLineDashArray("solid",markerBorderThickness)),"circle"===markerType?(ctx.moveTo(x,y),ctx.beginPath(),ctx.arc(x,y,markerSize/2,0,2*Math.PI,!1),markerColor&&ctx.fill(),markerBorderThickness&&(markerBorderColor?ctx.stroke():(alpha=ctx.globalAlpha,ctx.globalAlpha=.15,ctx.strokeStyle="black",ctx.stroke(),ctx.globalAlpha=alpha))):"square"===markerType?(ctx.beginPath(),ctx.rect(x-markerSize/2,y-markerSize/2,markerSize,markerSize),markerColor&&ctx.fill(),markerBorderThickness&&(markerBorderColor?ctx.stroke():(alpha=ctx.globalAlpha,ctx.globalAlpha=.15,ctx.strokeStyle="black",ctx.stroke(),ctx.globalAlpha=alpha))):"triangle"===markerType?(ctx.beginPath(),ctx.moveTo(x-markerSize/2,y+markerSize/2),ctx.lineTo(x+markerSize/2,y+markerSize/2),ctx.lineTo(x,y-markerSize/2),ctx.closePath(),markerColor&&ctx.fill(),markerBorderThickness&&(markerBorderColor?ctx.stroke():(alpha=ctx.globalAlpha,ctx.globalAlpha=.15,ctx.strokeStyle="black",ctx.stroke(),ctx.globalAlpha=alpha)),ctx.beginPath()):"cross"===markerType&&(ctx.strokeStyle=markerColor,markerBorderThickness=markerSize/4,ctx.lineWidth=markerBorderThickness,ctx.beginPath(),ctx.moveTo(x-markerSize/2,y-markerSize/2),ctx.lineTo(x+markerSize/2,y+markerSize/2),ctx.stroke(),ctx.moveTo(x+markerSize/2,y-markerSize/2),ctx.lineTo(x-markerSize/2,y+markerSize/2),ctx.stroke())}},drawMarkers:function(markers){for(var i=0;i<markers.length;i++){var marker=markers[i];RenderHelper.drawMarker(marker.x,marker.y,marker.ctx,marker.type,marker.size,marker.color,marker.borderColor,marker.borderThickness)}}};return Chart}();CanvasJSChart.version="v3.2.6 GA",window.CanvasJS&&CanvasJSChart&&!window.CanvasJS.Chart&&(window.CanvasJS.Chart=CanvasJSChart)}();